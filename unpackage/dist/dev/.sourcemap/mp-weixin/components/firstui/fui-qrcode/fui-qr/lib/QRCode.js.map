{"version":3,"file":"QRCode.js","sources":["components/firstui/fui-qrcode/fui-qr/lib/QRCode.js"],"sourcesContent":["\r\nimport BitByte from './8BitByte.js'\r\nimport RSBlock from './RSBlock.js'\r\nimport BitBuffer from './BitBuffer.js'\r\nimport util from './util.js'\r\nimport Polynomial from './Polynomial.js'\r\n\r\nfunction QRCode(typeNumber, errorCorrectLevel) {\r\n\tthis.typeNumber = typeNumber;\r\n\tthis.errorCorrectLevel = errorCorrectLevel;\r\n\tthis.modules = null;\r\n\tthis.moduleCount = 0;\r\n\tthis.dataCache = null;\r\n\tthis.dataList = [];\r\n}\r\n\r\n// for client side minification\r\nvar proto = QRCode.prototype;\r\n\r\nproto.addData = function(data) {\r\n\tvar newData = new BitByte(data);\r\n\tthis.dataList.push(newData);\r\n\tthis.dataCache = null;\r\n};\r\n\r\nproto.isDark = function(row, col) {\r\n\tif (row < 0 || this.moduleCount <= row || col < 0 || this.moduleCount <= col) {\r\n\t\tthrow new Error(row + \",\" + col);\r\n\t}\r\n\treturn this.modules[row][col];\r\n};\r\n\r\nproto.getModuleCount = function() {\r\n\treturn this.moduleCount;\r\n};\r\n\r\nproto.make = function() {\r\n\t// Calculate automatically typeNumber if provided is < 1\r\n\tif (this.typeNumber < 1 ){\r\n\t\tvar typeNumber = 1;\r\n\t\tfor (typeNumber = 1; typeNumber < 40; typeNumber++) {\r\n\t\t\tvar rsBlocks = RSBlock.getRSBlocks(typeNumber, this.errorCorrectLevel);\r\n\r\n\t\t\tvar buffer = new BitBuffer();\r\n\t\t\tvar totalDataCount = 0;\r\n\t\t\tfor (var i = 0; i < rsBlocks.length; i++) {\r\n\t\t\t\ttotalDataCount += rsBlocks[i].dataCount;\r\n\t\t\t}\r\n\r\n\t\t\tfor (var i = 0; i < this.dataList.length; i++) {\r\n\t\t\t\tvar data = this.dataList[i];\r\n\t\t\t\tbuffer.put(data.mode, 4);\r\n\t\t\t\tbuffer.put(data.getLength(), util.getLengthInBits(data.mode, typeNumber) );\r\n\t\t\t\tdata.write(buffer);\r\n\t\t\t}\r\n\t\t\tif (buffer.getLengthInBits() <= totalDataCount * 8)\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\tthis.typeNumber = typeNumber;\r\n\t}\r\n\tthis.makeImpl(false, this.getBestMaskPattern() );\r\n};\r\n\r\nproto.makeImpl = function(test, maskPattern) {\r\n\r\n\tthis.moduleCount = this.typeNumber * 4 + 17;\r\n\tthis.modules = new Array(this.moduleCount);\r\n\r\n\tfor (var row = 0; row < this.moduleCount; row++) {\r\n\r\n\t\tthis.modules[row] = new Array(this.moduleCount);\r\n\r\n\t\tfor (var col = 0; col < this.moduleCount; col++) {\r\n\t\t\tthis.modules[row][col] = null;//(col + row) % 3;\r\n\t\t}\r\n\t}\r\n\r\n\tthis.setupPositionProbePattern(0, 0);\r\n\tthis.setupPositionProbePattern(this.moduleCount - 7, 0);\r\n\tthis.setupPositionProbePattern(0, this.moduleCount - 7);\r\n\tthis.setupPositionAdjustPattern();\r\n\tthis.setupTimingPattern();\r\n\tthis.setupTypeInfo(test, maskPattern);\r\n\r\n\tif (this.typeNumber >= 7) {\r\n\t\tthis.setupTypeNumber(test);\r\n\t}\r\n\r\n\tif (this.dataCache == null) {\r\n\t\tthis.dataCache = QRCode.createData(this.typeNumber, this.errorCorrectLevel, this.dataList);\r\n\t}\r\n\r\n\tthis.mapData(this.dataCache, maskPattern);\r\n};\r\n\r\nproto.setupPositionProbePattern = function(row, col)  {\r\n\r\n\tfor (var r = -1; r <= 7; r++) {\r\n\r\n\t\tif (row + r <= -1 || this.moduleCount <= row + r) continue;\r\n\r\n\t\tfor (var c = -1; c <= 7; c++) {\r\n\r\n\t\t\tif (col + c <= -1 || this.moduleCount <= col + c) continue;\r\n\r\n\t\t\tif ( (0 <= r && r <= 6 && (c == 0 || c == 6) )\r\n\t\t\t\t\t|| (0 <= c && c <= 6 && (r == 0 || r == 6) )\r\n\t\t\t\t\t|| (2 <= r && r <= 4 && 2 <= c && c <= 4) ) {\r\n\t\t\t\tthis.modules[row + r][col + c] = true;\r\n\t\t\t} else {\r\n\t\t\t\tthis.modules[row + r][col + c] = false;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n};\r\n\r\nproto.getBestMaskPattern = function() {\r\n\r\n\tvar minLostPoint = 0;\r\n\tvar pattern = 0;\r\n\r\n\tfor (var i = 0; i < 8; i++) {\r\n\r\n\t\tthis.makeImpl(true, i);\r\n\r\n\t\tvar lostPoint = util.getLostPoint(this);\r\n\r\n\t\tif (i == 0 || minLostPoint >  lostPoint) {\r\n\t\t\tminLostPoint = lostPoint;\r\n\t\t\tpattern = i;\r\n\t\t}\r\n\t}\r\n\r\n\treturn pattern;\r\n};\r\n\r\nproto.createMovieClip = function(target_mc, instance_name, depth) {\r\n\r\n\tvar qr_mc = target_mc.createEmptyMovieClip(instance_name, depth);\r\n\tvar cs = 1;\r\n\r\n\tthis.make();\r\n\r\n\tfor (var row = 0; row < this.modules.length; row++) {\r\n\r\n\t\tvar y = row * cs;\r\n\r\n\t\tfor (var col = 0; col < this.modules[row].length; col++) {\r\n\r\n\t\t\tvar x = col * cs;\r\n\t\t\tvar dark = this.modules[row][col];\r\n\r\n\t\t\tif (dark) {\r\n\t\t\t\tqr_mc.beginFill(0, 100);\r\n\t\t\t\tqr_mc.moveTo(x, y);\r\n\t\t\t\tqr_mc.lineTo(x + cs, y);\r\n\t\t\t\tqr_mc.lineTo(x + cs, y + cs);\r\n\t\t\t\tqr_mc.lineTo(x, y + cs);\r\n\t\t\t\tqr_mc.endFill();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\treturn qr_mc;\r\n};\r\n\r\nproto.setupTimingPattern = function() {\r\n\r\n\tfor (var r = 8; r < this.moduleCount - 8; r++) {\r\n\t\tif (this.modules[r][6] != null) {\r\n\t\t\tcontinue;\r\n\t\t}\r\n\t\tthis.modules[r][6] = (r % 2 == 0);\r\n\t}\r\n\r\n\tfor (var c = 8; c < this.moduleCount - 8; c++) {\r\n\t\tif (this.modules[6][c] != null) {\r\n\t\t\tcontinue;\r\n\t\t}\r\n\t\tthis.modules[6][c] = (c % 2 == 0);\r\n\t}\r\n};\r\n\r\nproto.setupPositionAdjustPattern = function() {\r\n\r\n\tvar pos = util.getPatternPosition(this.typeNumber);\r\n\r\n\tfor (var i = 0; i < pos.length; i++) {\r\n\r\n\t\tfor (var j = 0; j < pos.length; j++) {\r\n\r\n\t\t\tvar row = pos[i];\r\n\t\t\tvar col = pos[j];\r\n\r\n\t\t\tif (this.modules[row][col] != null) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tfor (var r = -2; r <= 2; r++) {\r\n\r\n\t\t\t\tfor (var c = -2; c <= 2; c++) {\r\n\r\n\t\t\t\t\tif (r == -2 || r == 2 || c == -2 || c == 2\r\n\t\t\t\t\t\t\t|| (r == 0 && c == 0) ) {\r\n\t\t\t\t\t\tthis.modules[row + r][col + c] = true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.modules[row + r][col + c] = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n};\r\n\r\nproto.setupTypeNumber = function(test) {\r\n\r\n\tvar bits = util.getBCHTypeNumber(this.typeNumber);\r\n\r\n\tfor (var i = 0; i < 18; i++) {\r\n\t\tvar mod = (!test && ( (bits >> i) & 1) == 1);\r\n\t\tthis.modules[Math.floor(i / 3)][i % 3 + this.moduleCount - 8 - 3] = mod;\r\n\t}\r\n\r\n\tfor (var i = 0; i < 18; i++) {\r\n\t\tvar mod = (!test && ( (bits >> i) & 1) == 1);\r\n\t\tthis.modules[i % 3 + this.moduleCount - 8 - 3][Math.floor(i / 3)] = mod;\r\n\t}\r\n};\r\n\r\nproto.setupTypeInfo = function(test, maskPattern) {\r\n\r\n\tvar data = (this.errorCorrectLevel << 3) | maskPattern;\r\n\tvar bits = util.getBCHTypeInfo(data);\r\n\r\n\t// vertical\r\n\tfor (var i = 0; i < 15; i++) {\r\n\r\n\t\tvar mod = (!test && ( (bits >> i) & 1) == 1);\r\n\r\n\t\tif (i < 6) {\r\n\t\t\tthis.modules[i][8] = mod;\r\n\t\t} else if (i < 8) {\r\n\t\t\tthis.modules[i + 1][8] = mod;\r\n\t\t} else {\r\n\t\t\tthis.modules[this.moduleCount - 15 + i][8] = mod;\r\n\t\t}\r\n\t}\r\n\r\n\t// horizontal\r\n\tfor (var i = 0; i < 15; i++) {\r\n\r\n\t\tvar mod = (!test && ( (bits >> i) & 1) == 1);\r\n\r\n\t\tif (i < 8) {\r\n\t\t\tthis.modules[8][this.moduleCount - i - 1] = mod;\r\n\t\t} else if (i < 9) {\r\n\t\t\tthis.modules[8][15 - i - 1 + 1] = mod;\r\n\t\t} else {\r\n\t\t\tthis.modules[8][15 - i - 1] = mod;\r\n\t\t}\r\n\t}\r\n\r\n\t// fixed module\r\n\tthis.modules[this.moduleCount - 8][8] = (!test);\r\n};\r\n\r\nproto.mapData = function(data, maskPattern) {\r\n\r\n\tvar inc = -1;\r\n\tvar row = this.moduleCount - 1;\r\n\tvar bitIndex = 7;\r\n\tvar byteIndex = 0;\r\n\r\n\tfor (var col = this.moduleCount - 1; col > 0; col -= 2) {\r\n\r\n\t\tif (col == 6) col--;\r\n\r\n\t\twhile (true) {\r\n\r\n\t\t\tfor (var c = 0; c < 2; c++) {\r\n\r\n\t\t\t\tif (this.modules[row][col - c] == null) {\r\n\r\n\t\t\t\t\tvar dark = false;\r\n\r\n\t\t\t\t\tif (byteIndex < data.length) {\r\n\t\t\t\t\t\tdark = ( ( (data[byteIndex] >>> bitIndex) & 1) == 1);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar mask = util.getMask(maskPattern, row, col - c);\r\n\r\n\t\t\t\t\tif (mask) {\r\n\t\t\t\t\t\tdark = !dark;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis.modules[row][col - c] = dark;\r\n\t\t\t\t\tbitIndex--;\r\n\r\n\t\t\t\t\tif (bitIndex == -1) {\r\n\t\t\t\t\t\tbyteIndex++;\r\n\t\t\t\t\t\tbitIndex = 7;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\trow += inc;\r\n\r\n\t\t\tif (row < 0 || this.moduleCount <= row) {\r\n\t\t\t\trow -= inc;\r\n\t\t\t\tinc = -inc;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n};\r\n\r\nQRCode.PAD0 = 0xEC;\r\nQRCode.PAD1 = 0x11;\r\n\r\nQRCode.createData = function(typeNumber, errorCorrectLevel, dataList) {\r\n\r\n\tvar rsBlocks = RSBlock.getRSBlocks(typeNumber, errorCorrectLevel);\r\n\r\n\tvar buffer = new BitBuffer();\r\n\r\n\tfor (var i = 0; i < dataList.length; i++) {\r\n\t\tvar data = dataList[i];\r\n\t\tbuffer.put(data.mode, 4);\r\n\t\tbuffer.put(data.getLength(), util.getLengthInBits(data.mode, typeNumber) );\r\n\t\tdata.write(buffer);\r\n\t}\r\n\r\n\t// calc num max data.\r\n\tvar totalDataCount = 0;\r\n\tfor (var i = 0; i < rsBlocks.length; i++) {\r\n\t\ttotalDataCount += rsBlocks[i].dataCount;\r\n\t}\r\n\r\n\tif (buffer.getLengthInBits() > totalDataCount * 8) {\r\n\t\tthrow new Error(\"code length overflow. (\"\r\n\t\t\t+ buffer.getLengthInBits()\r\n\t\t\t+ \">\"\r\n\t\t\t+  totalDataCount * 8\r\n\t\t\t+ \")\");\r\n\t}\r\n\r\n\t// end code\r\n\tif (buffer.getLengthInBits() + 4 <= totalDataCount * 8) {\r\n\t\tbuffer.put(0, 4);\r\n\t}\r\n\r\n\t// padding\r\n\twhile (buffer.getLengthInBits() % 8 != 0) {\r\n\t\tbuffer.putBit(false);\r\n\t}\r\n\r\n\t// padding\r\n\twhile (true) {\r\n\r\n\t\tif (buffer.getLengthInBits() >= totalDataCount * 8) {\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tbuffer.put(QRCode.PAD0, 8);\r\n\r\n\t\tif (buffer.getLengthInBits() >= totalDataCount * 8) {\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tbuffer.put(QRCode.PAD1, 8);\r\n\t}\r\n\r\n\treturn QRCode.createBytes(buffer, rsBlocks);\r\n};\r\n\r\nQRCode.createBytes = function(buffer, rsBlocks) {\r\n\r\n\tvar offset = 0;\r\n\r\n\tvar maxDcCount = 0;\r\n\tvar maxEcCount = 0;\r\n\r\n\tvar dcdata = new Array(rsBlocks.length);\r\n\tvar ecdata = new Array(rsBlocks.length);\r\n\r\n\tfor (var r = 0; r < rsBlocks.length; r++) {\r\n\r\n\t\tvar dcCount = rsBlocks[r].dataCount;\r\n\t\tvar ecCount = rsBlocks[r].totalCount - dcCount;\r\n\r\n\t\tmaxDcCount = Math.max(maxDcCount, dcCount);\r\n\t\tmaxEcCount = Math.max(maxEcCount, ecCount);\r\n\r\n\t\tdcdata[r] = new Array(dcCount);\r\n\r\n\t\tfor (var i = 0; i < dcdata[r].length; i++) {\r\n\t\t\tdcdata[r][i] = 0xff & buffer.buffer[i + offset];\r\n\t\t}\r\n\t\toffset += dcCount;\r\n\r\n\t\tvar rsPoly = util.getErrorCorrectPolynomial(ecCount);\r\n\t\tvar rawPoly = new Polynomial(dcdata[r], rsPoly.getLength() - 1);\r\n\r\n\t\tvar modPoly = rawPoly.mod(rsPoly);\r\n\t\tecdata[r] = new Array(rsPoly.getLength() - 1);\r\n\t\tfor (var i = 0; i < ecdata[r].length; i++) {\r\n            var modIndex = i + modPoly.getLength() - ecdata[r].length;\r\n\t\t\tecdata[r][i] = (modIndex >= 0)? modPoly.get(modIndex) : 0;\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tvar totalCodeCount = 0;\r\n\tfor (var i = 0; i < rsBlocks.length; i++) {\r\n\t\ttotalCodeCount += rsBlocks[i].totalCount;\r\n\t}\r\n\r\n\tvar data = new Array(totalCodeCount);\r\n\tvar index = 0;\r\n\r\n\tfor (var i = 0; i < maxDcCount; i++) {\r\n\t\tfor (var r = 0; r < rsBlocks.length; r++) {\r\n\t\t\tif (i < dcdata[r].length) {\r\n\t\t\t\tdata[index++] = dcdata[r][i];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfor (var i = 0; i < maxEcCount; i++) {\r\n\t\tfor (var r = 0; r < rsBlocks.length; r++) {\r\n\t\t\tif (i < ecdata[r].length) {\r\n\t\t\t\tdata[index++] = ecdata[r][i];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\treturn data;\r\n};\r\n\r\nexport default QRCode;\r\n"],"names":["BitByte","RSBlock","BitBuffer","util","Polynomial"],"mappings":"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"}