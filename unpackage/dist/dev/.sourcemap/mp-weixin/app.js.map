{"version":3,"file":"app.js","sources":["App.vue","main.js"],"sourcesContent":["<script>\r\n\timport { getToken } from '@/utils/auth'\r\n\timport store from '@/store'\r\n\t\r\n\texport default {\r\n\t\tonLaunch: function() {\r\n\t\t\tconsole.log('App Launch')\r\n\t\t\t// 检查登录状态\r\n\t\t\tthis.checkLoginStatus()\r\n\t\t},\r\n\t\tonShow: function() {\r\n\t\t\tconsole.log('App Show')\r\n\t\t},\r\n\t\tonHide: function() {\r\n\t\t\tconsole.log('App Hide')\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t// 检查登录状态\r\n\t\t\tcheckLoginStatus() {\r\n\t\t\t\tconst token = getToken()\r\n\t\t\t\tconsole.log('检查登录状态，token:', token)\r\n\t\t\t\t\r\n\t\t\t\tif (token) {\r\n\t\t\t\t\t// 如果有token，尝试获取用户信息以验证token有效性\r\n\t\t\t\t\tstore.dispatch('GetInfo').then(() => {\r\n\t\t\t\t\t\tconsole.log('自动登录成功，用户信息已恢复')\r\n\t\t\t\t\t\t// 不需要跳转，保持当前页面\r\n\t\t\t\t\t}).catch((error) => {\r\n\t\t\t\t\t\tconsole.log('Token已过期，需要重新登录', error)\r\n\t\t\t\t\t\t// Token无效，清除本地存储\r\n\t\t\t\t\t\tstore.dispatch('LogOut')\r\n\t\t\t\t\t})\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconsole.log('未找到登录信息')\r\n\t\t\t\t\t// 没有token，不做任何操作，让各个页面自己处理登录检查\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t/*每个页面公共css */\r\n</style>","import App from './App'\r\n\r\n// #ifndef VUE3\r\nimport Vue from 'vue'\r\nimport './uni.promisify.adaptor'\r\nVue.config.productionTip = false\r\nApp.mpType = 'app'\r\nconst app = new Vue({\r\n  ...App\r\n})\r\napp.$mount()\r\n// #endif\r\n\r\n// #ifdef VUE3\r\nimport { createSSRApp } from 'vue'\r\nexport function createApp() {\r\n  const app = createSSRApp(App)\r\n  return {\r\n    app\r\n  }\r\n}\r\n// #endif"],"names":["uni","getToken","store","createSSRApp","App"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAIC,MAAK,YAAU;AAAA,EACd,UAAU,WAAW;AACpBA,kBAAAA,MAAA,MAAA,OAAA,gBAAY,YAAY;AAExB,SAAK,iBAAiB;AAAA,EACtB;AAAA,EACD,QAAQ,WAAW;AAClBA,kBAAAA,MAAY,MAAA,OAAA,iBAAA,UAAU;AAAA,EACtB;AAAA,EACD,QAAQ,WAAW;AAClBA,kBAAAA,MAAY,MAAA,OAAA,iBAAA,UAAU;AAAA,EACtB;AAAA,EACD,SAAS;AAAA;AAAA,IAER,mBAAmB;AAClB,YAAM,QAAQC,WAAAA,SAAS;AACvBD,oBAAAA,MAAY,MAAA,OAAA,iBAAA,iBAAiB,KAAK;AAElC,UAAI,OAAO;AAEVE,oBAAAA,MAAM,SAAS,SAAS,EAAE,KAAK,MAAM;AACpCF,wBAAAA,MAAY,MAAA,OAAA,iBAAA,gBAAgB;AAAA,QAE7B,CAAC,EAAE,MAAM,CAAC,UAAU;AACnBA,wBAAAA,MAAA,MAAA,OAAA,iBAAY,mBAAmB,KAAK;AAEpCE,sBAAK,MAAC,SAAS,QAAQ;AAAA,SACvB;AAAA,aACK;AACNF,sBAAAA,oCAAY,SAAS;AAAA,MAEtB;AAAA,IACD;AAAA,EACD;AACD;ACvBM,SAAS,YAAY;AAC1B,QAAM,MAAMG,cAAY,aAACC,SAAG;AAC5B,SAAO;AAAA,IACL;AAAA,EACD;AACH;;;"}