{"version":3,"file":"archiveQueryPage.js","sources":["pages/archiveQueryPage/archiveQueryPage.js","pages/archiveQueryPage/archiveQueryPage.vue","../../../apps/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvYXJjaGl2ZVF1ZXJ5UGFnZS9hcmNoaXZlUXVlcnlQYWdlLnZ1ZQ"],"sourcesContent":["import { ref, reactive } from 'vue';\r\nimport { \r\n\tgetArchiveApplicationList, \r\n\taddArchiveApplication, \r\n\tupdateArchiveApplication, \r\n\tdeleteArchiveApplication,\r\n\tgetArchiveApplicationDetail \r\n} from '@/api/archives';\r\nimport store from '@/store';\r\n\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\t// 导航栏配置\r\n\t\t\tnavBackground: '#004299',\r\n\t\t\tnavTitleColor: '#FFFFFF',\r\n\t\t\tprimaryColor: '#004299',\r\n\t\t\t\r\n\t\t\t// 申请列表数据\r\n\t\t\tapplications: [],\r\n\t\t\t\r\n\t\t\t// 表单数据\r\n\t\t\tformData: {\r\n\t\t\t\ttitle: '', // 申请标题\r\n\t\t\t\tapplicationFile: '', // 申请材料\r\n\t\t\t\tapplicationReason: '', // 申请原因\r\n\t\t\t\tapplicationAnnexes: '', // 申请附件\r\n\t\t\t\tsendType: '', // 接收方式值\r\n\t\t\t\tsendTypeText: '', // 接收方式显示文本\r\n\t\t\t\temail: '', // 电子邮箱\r\n\t\t\t\taddress: '', // 邮寄地址\r\n\t\t\t\tphone: '', // 联系电话\r\n\t\t\t\tremark: '' // 备注\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// 接收方式选项（字符串数组）\r\n\t\t\tsendTypeOptions: ['电子档', '纸质档(邮寄)', '两者都需要'],\r\n\t\t\t\r\n\t\t\t// 接收方式映射\r\n\t\t\tsendTypeMap: {\r\n\t\t\t\t'电子档': 'email',\r\n\t\t\t\t'纸质档(邮寄)': 'paper',\r\n\t\t\t\t'两者都需要': 'both'\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// 选择器配置\r\n\t\t\tpickerConfig: {\r\n\t\t\t\tshow: false,\r\n\t\t\t\toptions: [],\r\n\t\t\t\tcurrentField: ''\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// 状态控制\r\n\t\t\tisLoading: false, // 列表加载状态\r\n\t\t\tisSubmitting: false, // 提交加载状态\r\n\t\t\tshowFormPopup: false, // 是否显示表单弹窗\r\n\t\t\tformMode: 'add', // 表单模式：add-新增, edit-编辑\r\n\t\t\tcurrentEditId: null // 当前编辑的申请ID\r\n\t\t}\r\n\t},\r\n\tonLoad() {\r\n\t\tthis.loadApplications();\r\n\t},\r\n\tonShow() {\r\n\t\t// 页面重新显示时刷新列表\r\n\t\tthis.loadApplications();\r\n\t},\r\n\tmethods: {\r\n\t\t/**\r\n\t\t * 返回上一页\r\n\t\t */\r\n\t\tgoBack() {\r\n\t\t\tuni.navigateBack({\r\n\t\t\t\tdelta: 1\r\n\t\t\t});\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * 加载申请列表\r\n\t\t */\r\n\t\tasync loadApplications() {\r\n\t\t\ttry {\r\n\t\t\t\tthis.isLoading = true;\r\n\t\t\t\t\r\n\t\t\t\t// 获取当前用户ID（从store中获取）\r\n\t\t\t\tconst userInfo = store.getters.userInfo || {};\r\n\t\t\t\tconst userId = userInfo.userId || userInfo.id;\r\n\t\t\t\t\r\n\t\t\t\tconsole.log('=== 加载档案申请列表 ===');\r\n\t\t\t\tconsole.log('用户信息:', userInfo);\r\n\t\t\t\tconsole.log('用户ID:', userId);\r\n\t\t\t\t\r\n\t\t\t\t// 调用API获取列表 - 根据API文档优化查询参数\r\n\t\t\t\tconst queryParams = {\r\n\t\t\t\t\tapplicant: userId,\r\n\t\t\t\t\t// 可以添加其他查询条件\r\n\t\t\t\t\t// status: '', // 申请状态筛选\r\n\t\t\t\t\t// title: '', // 标题筛选\r\n\t\t\t\t\t// applicationFile: '', // 申请材料筛选\r\n\t\t\t\t};\r\n\t\t\t\t\r\n\t\t\t\tconsole.log('查询参数:', queryParams);\r\n\t\t\t\tconst response = await getArchiveApplicationList(queryParams);\r\n\t\t\t\t\r\n\t\t\t\t// 处理返回数据 - 根据API响应结构\r\n\t\t\t\tconsole.log('API响应:', response);\r\n\t\t\t\t\r\n\t\t\t\tif (response && response.code === 1) {\r\n\t\t\t\t\t// 成功响应，处理数据\r\n\t\t\t\t\tif (response.rows && Array.isArray(response.rows)) {\r\n\t\t\t\t\t\tthis.applications = response.rows.map(item => ({\r\n\t\t\t\t\t\t\t...item,\r\n\t\t\t\t\t\t\tstatus: this.mapStatus(item.status),\r\n\t\t\t\t\t\t\tstatusText: this.getStatusText(item.status)\r\n\t\t\t\t\t\t}));\r\n\t\t\t\t\t\tconsole.log('处理后的申请列表:', this.applications);\r\n\t\t\t\t\t\tconsole.log('总记录数:', response.total);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.applications = [];\r\n\t\t\t\t\t\tconsole.log('无申请记录');\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// 响应失败\r\n\t\t\t\t\tthis.applications = [];\r\n\t\t\t\t\tconst errorMsg = response?.msg || '获取列表失败';\r\n\t\t\t\t\tconsole.error('API响应错误:', errorMsg);\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: errorMsg,\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.error('加载申请列表失败:', error);\r\n\t\t\t\tthis.applications = [];\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '加载失败',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t});\r\n\t\t\t} finally {\r\n\t\t\t\tthis.isLoading = false;\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * 显示申请表单\r\n\t\t */\r\n\t\tshowApplicationForm() {\r\n\t\t\tthis.formMode = 'add';\r\n\t\t\tthis.currentEditId = null;\r\n\t\t\tthis.resetFormData();\r\n\t\t\t// 获取用户信息填充电话和邮箱\r\n\t\t\tconst userInfo = store.getters.userInfo || {};\r\n\t\t\tthis.formData.phone = userInfo.phonenumber || userInfo.phone || '';\r\n\t\t\tthis.formData.email = userInfo.email || '';\r\n\t\t\tthis.showFormPopup = true;\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * 关闭表单弹窗\r\n\t\t */\r\n\t\tcloseFormPopup() {\r\n\t\t\tthis.showFormPopup = false;\r\n\t\t\tthis.resetFormData();\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * 重置表单数据\r\n\t\t */\r\n\t\tresetFormData() {\r\n\t\t\tthis.formData = {\r\n\t\t\t\ttitle: '',\r\n\t\t\t\tapplicationFile: '',\r\n\t\t\t\tapplicationReason: '',\r\n\t\t\t\tapplicationAnnexes: '',\r\n\t\t\t\tsendType: '',\r\n\t\t\t\tsendTypeText: '',\r\n\t\t\t\temail: '',\r\n\t\t\t\taddress: '',\r\n\t\t\t\tphone: '',\r\n\t\t\t\tremark: ''\r\n\t\t\t};\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * 打开接收方式选择器\r\n\t\t */\r\n\t\tshowSendTypePicker() {\r\n\t\t\tthis.pickerConfig = {\r\n\t\t\t\tshow: true,\r\n\t\t\t\toptions: this.sendTypeOptions,\r\n\t\t\t\tcurrentField: 'sendType'\r\n\t\t\t};\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * 关闭选择器\r\n\t\t */\r\n\t\tclosePicker() {\r\n\t\t\tthis.pickerConfig.show = false;\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * 选择器确认选择\r\n\t\t */\r\n\t\tonPickerConfirm(e) {\r\n\t\t\ttry {\r\n\t\t\t\tconst selectedText = e.text; // 选中的文本\r\n\t\t\t\tconst selectedValue = this.sendTypeMap[selectedText]; // 映射到对应的值\r\n\t\t\t\t\r\n\t\t\t\t// 先关闭选择器，避免布局冲突\r\n\t\t\t\tthis.closePicker();\r\n\t\t\t\t\r\n\t\t\t\t// 延迟更新数据，确保选择器完全关闭后再更新\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.formData.sendTypeText = selectedText;\r\n\t\t\t\t\tthis.formData.sendType = selectedValue;\r\n\t\t\t\t}, 150);\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.error('选择器确认错误:', error);\r\n\t\t\t\tthis.closePicker();\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * 下载查询结果\r\n\t\t */\r\n\t\tdownloadResult(recordId) {\r\n\t\t\tconst record = this.applications.find(item => item.id === recordId);\r\n\t\t\tif (!record || !record.resultUrl) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '暂无可下载文件',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t});\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// 如果有下载链接，使用uni.downloadFile下载\r\n\t\t\tuni.downloadFile({\r\n\t\t\t\turl: record.resultUrl,\r\n\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\tif (res.statusCode === 200) {\r\n\t\t\t\t\t\t// 保存文件到本地\r\n\t\t\t\t\t\tconst filePath = res.tempFilePath;\r\n\t\t\t\t\t\tuni.saveFile({\r\n\t\t\t\t\t\t\ttempFilePath: filePath,\r\n\t\t\t\t\t\t\tsuccess: (saveRes) => {\r\n\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: '下载成功',\r\n\t\t\t\t\t\t\t\t\ticon: 'success'\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tfail: () => {\r\n\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: '保存失败',\r\n\t\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tfail: (error) => {\r\n\t\t\t\t\tconsole.error('下载失败:', error);\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '下载失败',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * 提交表单\r\n\t\t */\r\n\t\tasync submitForm() {\r\n\t\t\t// 表单验证\r\n\t\t\tif (!this.validateForm()) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\ttry {\r\n\t\t\t\tthis.isSubmitting = true;\r\n\t\t\t\t\r\n\t\t\t\t// 获取当前用户信息\r\n\t\t\t\t// const userInfo = store.getters.userInfo || {};\r\n\t\t\t\t// const userId = userInfo.userId || userInfo.id;\r\n\t\t\t\t// const userName = userInfo.userName || userInfo.nickName || '';\r\n\t\t\t\t\r\n\t\t\t\t// // 检查用户信息\r\n\t\t\t\t// if (!userId) {\r\n\t\t\t\t// \tconsole.error('用户信息缺失，无法提交申请');\r\n\t\t\t\t// \tuni.showModal({\r\n\t\t\t\t// \t\ttitle: '提示',\r\n\t\t\t\t// \t\tcontent: '用户信息缺失，请重新登录后再试',\r\n\t\t\t\t// \t\tshowCancel: false,\r\n\t\t\t\t// \t\tsuccess: () => {\r\n\t\t\t\t// \t\t\tuni.reLaunch({ url: '/pages/login/login' });\r\n\t\t\t\t// \t\t}\r\n\t\t\t\t// \t});\r\n\t\t\t\t// \treturn;\r\n\t\t\t\t// }\r\n\t\t\t\t\r\n\t\t\t\t// 构建提交数据 - 完全匹配API示例结构\r\n\t\t\t\tconst submitData = {\r\n\t\t\t\t\ttitle: this.formData.title,\r\n\t\t\t\t\t// applicant: userId,\r\n\t\t\t\t\t// applicantUserName: userName,\r\n\t\t\t\t\t// applicantNickName: userInfo.nickName || '',\r\n\t\t\t\t\t// deptId: userInfo.deptId || 1, // 默认为1\r\n\t\t\t\t\tapplicationFile: this.formData.applicationFile,\r\n\t\t\t\t\tapplicationReason: this.formData.applicationReason,\r\n\t\t\t\t\tapplicationAnnexes: this.formData.applicationAnnexes || '', // 申请附件\r\n\t\t\t\t\tsendType: this.formData.sendType,\r\n\t\t\t\t\temail: this.formData.email || userInfo.email || '',\r\n\t\t\t\t\taddress: this.formData.address || '',\r\n\t\t\t\t\tphone: this.formData.phone,\r\n\t\t\t\t\t// status: '0', // 0-待审核\r\n\t\t\t\t\treviewer: null, // 审核人，新增时为空\r\n\t\t\t\t\treviewerName: '', // 审核人姓名\r\n\t\t\t\t\treviewComments: '', // 审核意见\r\n\t\t\t\t\t// createBy: userName, // 创建者\r\n\t\t\t\t\t// updateBy: userName, // 更新者\r\n\t\t\t\t\tremark: this.formData.remark || '',\r\n\t\t\t\t\tparams: {\r\n\t\t\t\t\t\t// 扩展参数，可用于存储额外信息\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\t\r\n\t\t\t\t// 打印调试信息\r\n\t\t\t\t// console.log('=== 档案申请提交调试信息 ===');\r\n\t\t\t\t// console.log('用户信息:', userInfo);\r\n\t\t\t\t// console.log('表单数据:', this.formData);\r\n\t\t\t\t// console.log('提交数据:', submitData);\r\n\t\t\t\t// console.log('API模式:', this.formMode === 'edit' ? '编辑' : '新增');\r\n\t\t\t\t\r\n\t\t\t\t// 根据是否为编辑模式调用不同API\r\n\t\t\t\tif (this.formMode === 'edit' && this.currentEditId) {\r\n\t\t\t\t\tsubmitData.id = this.currentEditId;\r\n\t\t\t\t\tconsole.log('调用编辑API:', submitData);\r\n\t\t\t\t\tconst response = await updateArchiveApplication(submitData);\r\n\t\t\t\t\tconsole.log('编辑API响应:', response);\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '修改成功',\r\n\t\t\t\t\t\ticon: 'success'\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconsole.log('调用新增API:', submitData);\r\n\t\t\t\t\tconst response = await addArchiveApplication(submitData);\r\n\t\t\t\t\tconsole.log('新增API响应:', response);\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '提交成功',\r\n\t\t\t\t\t\ticon: 'success'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tthis.loadApplications();\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.error('提交错误:', error);\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: this.formMode === 'edit' ? '修改失败' : '提交失败',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t});\r\n\t\t\t} finally {\r\n\t\t\t\tthis.isSubmitting = false;\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * 表单验证\r\n\t\t */\r\n\t\tvalidateForm() {\r\n\t\t\tif (!this.formData.title) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '请输入申请标题',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t});\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (!this.formData.applicationFile) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '请输入申请材料名称',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t});\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (!this.formData.applicationReason) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '请输入申请原因',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t});\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (!this.formData.sendType) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '请选择接收方式',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t});\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// 验证电子邮箱（电子档或两者都需要时必填）\r\n\t\t\tif ((this.formData.sendType === 'email' || this.formData.sendType === 'both') && !this.formData.email) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '请输入电子邮箱',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t});\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// 验证邮箱格式\r\n\t\t\tif (this.formData.email && !/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(this.formData.email)) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '请输入正确的邮箱格式',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t});\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif ((this.formData.sendType === 'paper' || this.formData.sendType === 'both') && !this.formData.address) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '请输入邮寄地址',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t});\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (!this.formData.phone) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '请输入联系电话',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t});\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tconst phoneReg = /^1[3-9]\\d{9}$/;\r\n\t\t\tif (!phoneReg.test(this.formData.phone)) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '请输入正确的手机号',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t});\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * 编辑档案申请\r\n\t\t */\r\n\t\teditApplication(app) {\r\n\t\t\tthis.formMode = 'edit';\r\n\t\t\tthis.currentEditId = app.id;\r\n\t\t\t\r\n\t\t\t// 填充表单数据\r\n\t\t\tconst sendTypeText = Object.keys(this.sendTypeMap).find(key => this.sendTypeMap[key] === app.sendType) || '';\r\n\t\t\t\r\n\t\t\tthis.formData = {\r\n\t\t\t\ttitle: app.title || '',\r\n\t\t\t\tapplicationFile: app.applicationFile || '',\r\n\t\t\t\tapplicationReason: app.applicationReason || '',\r\n\t\t\t\tapplicationAnnexes: app.applicationAnnexes || '',\r\n\t\t\t\tsendType: app.sendType || '',\r\n\t\t\t\tsendTypeText: sendTypeText,\r\n\t\t\t\temail: app.email || '',\r\n\t\t\t\taddress: app.address || '',\r\n\t\t\t\tphone: app.phone || '',\r\n\t\t\t\tremark: app.remark || ''\r\n\t\t\t};\r\n\t\t\t\r\n\t\t\t// 显示表单\r\n\t\t\tthis.showFormPopup = true;\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * 撤回档案申请\r\n\t\t */\r\n\t\tasync withdrawApplication(appId) {\r\n\t\t\ttry {\r\n\t\t\t\tconst confirmResult = await new Promise((resolve) => {\r\n\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\ttitle: '确认撤回',\r\n\t\t\t\t\t\tcontent: '确定要撤回这条申请吗？',\r\n\t\t\t\t\t\tsuccess: (res) => resolve(res.confirm),\r\n\t\t\t\t\t\tfail: () => resolve(false)\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tif (!confirmResult) return;\r\n\t\t\t\t\r\n\t\t\t\t// 撤回即删除\r\n\t\t\t\tawait deleteArchiveApplication(appId);\r\n\t\t\t\t\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '已撤回',\r\n\t\t\t\t\ticon: 'success'\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tthis.loadApplications();\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.error('撤回失败:', error);\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '撤回失败',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * 删除档案申请\r\n\t\t */\r\n\t\tasync deleteApplication(appId) {\r\n\t\t\ttry {\r\n\t\t\t\tconst confirmResult = await new Promise((resolve) => {\r\n\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\ttitle: '确认删除',\r\n\t\t\t\t\t\tcontent: '确定要删除这条申请吗？删除后将无法恢复。',\r\n\t\t\t\t\t\tsuccess: (res) => resolve(res.confirm),\r\n\t\t\t\t\t\tfail: () => resolve(false)\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tif (!confirmResult) return;\r\n\t\t\t\t\r\n\t\t\t\tawait deleteArchiveApplication(appId);\r\n\t\t\t\t\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '删除成功',\r\n\t\t\t\t\ticon: 'success'\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tthis.loadApplications();\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.error('删除申请错误:', error);\r\n\t\t\t\tuni.hideLoading();\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '删除失败，请重试',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * 映射状态值\r\n\t\t */\r\n\t\tmapStatus(statusValue) {\r\n\t\t\tconst statusMap = {\r\n\t\t\t\t'0': 'pending',\r\n\t\t\t\t'1': 'completed',\r\n\t\t\t\t'2': 'rejected'\r\n\t\t\t};\r\n\t\t\treturn statusMap[String(statusValue)] || 'pending';\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * 获取状态文本\r\n\t\t */\r\n\t\tgetStatusText(statusValue) {\r\n\t\t\tconst textMap = {\r\n\t\t\t\t'0': '待审核',\r\n\t\t\t\t'1': '已通过',\r\n\t\t\t\t'2': '已拒绝'\r\n\t\t\t};\r\n\t\t\treturn textMap[String(statusValue)] || '待审核';\r\n\t\t}\r\n\t}\r\n}\r\n","<template>\r\n\t<view class=\"page-container\">\r\n\t\t<!-- 自定义导航栏 -->\r\n\t\t<fui-nav-bar\r\n\t\t\ttitle=\"档案查询申请\"\r\n\t\t\t:background=\"navBackground\"\r\n\t\t\t:color=\"navTitleColor\"\r\n\t\t\tfontWeight=\"bold\"\r\n\t\t\t:splitLine=\"true\"\r\n\t\t\t:isFixed=\"true\"\r\n\t\t\t:isOccupy=\"true\"\r\n\t\t\t@init=\"navbarInit\"\r\n\t\t\t@leftClick=\"goBack\">\r\n\t\t\t<fui-icon name=\"arrowleft\" :color=\"navTitleColor\" :size=\"36\"></fui-icon>\r\n\t\t</fui-nav-bar>\r\n\t\t\r\n\t\t<!-- 内容区域 -->\r\n\t\t<view class=\"content-container\" :style=\"{ paddingTop: navHeight + 'px' }\">\r\n\t\t\t\r\n\t\t\t<!-- 顶部操作区 -->\r\n\t\t\t<view class=\"action-bar\">\r\n\t\t\t\t<fui-button \r\n\t\t\t\t\ttype=\"primary\" \r\n\t\t\t\t\t:background=\"primaryColor\" \r\n\t\t\t\t\t@click=\"showApplicationForm\"\r\n\t\t\t\t\tclass=\"add-button\">\r\n\t\t\t\t\t<fui-icon name=\"add\" color=\"#FFFFFF\" :size=\"32\"></fui-icon>\r\n\t\t\t\t\t<text class=\"add-text\">新增申请</text>\r\n\t\t\t\t</fui-button>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<!-- 申请列表区域 -->\r\n\t\t\t<view class=\"application-list\">\r\n\t\t\t\t<!-- 列表标题 -->\r\n\t\t\t\t<view class=\"list-header\">\r\n\t\t\t\t\t<text class=\"header-title\">我的申请</text>\r\n\t\t\t\t\t<text class=\"header-count\">共 {{applications.length}} 条</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t\r\n\t\t\t\t<!-- 加载提示 -->\r\n\t\t\t\t<view v-if=\"isLoading\" class=\"empty-records\">\r\n\t\t\t\t\t<fui-loadmore text=\"加载中...\" iconColor=\"#004299\"></fui-loadmore>\r\n\t\t\t\t</view>\r\n\t\t\t\t\r\n\t\t\t\t<!-- 无记录提示 -->\r\n\t\t\t\t<view v-else-if=\"applications.length === 0\" class=\"empty-records\">\r\n\t\t\t\t\t<fui-icon name=\"file-search-line\" :size=\"80\" color=\"#CCCCCC\"></fui-icon>\r\n\t\t\t\t\t<text class=\"empty-text\">暂无申请记录</text>\r\n\t\t\t\t\t<text class=\"empty-hint\">点击上方\"新增申请\"按钮创建档案查询申请</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t\r\n\t\t\t\t<!-- 申请记录列表 -->\r\n\t\t\t\t<view v-else class=\"application-cards\">\r\n\t\t\t\t\t<view class=\"app-card\" v-for=\"(app, index) in applications\" :key=\"app.id\">\r\n\t\t\t\t\t\t<!-- 卡片头部 -->\r\n\t\t\t\t\t\t<view class=\"card-header\">\r\n\t\t\t\t\t\t\t<view class=\"card-title-area\">\r\n\t\t\t\t\t\t\t\t<text class=\"card-title\">{{app.title}}</text>\r\n\t\t\t\t\t\t\t\t<view class=\"card-status\" :class=\"'status-' + app.status\">\r\n\t\t\t\t\t\t\t\t\t{{app.statusText}}\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"card-time\">{{app.createTime}}</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<!-- 卡片内容 -->\r\n\t\t\t\t\t\t<view class=\"card-body\">\r\n\t\t\t\t\t\t\t<view class=\"card-row\">\r\n\t\t\t\t\t\t\t\t<text class=\"row-label\">申请材料：</text>\r\n\t\t\t\t\t\t\t\t<text class=\"row-value\">{{app.applicationFile}}</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"card-row\">\r\n\t\t\t\t\t\t\t\t<text class=\"row-label\">申请原因：</text>\r\n\t\t\t\t\t\t\t\t<text class=\"row-value\">{{app.applicationReason}}</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"card-row\" v-if=\"app.address\">\r\n\t\t\t\t\t\t\t\t<text class=\"row-label\">邮寄地址：</text>\r\n\t\t\t\t\t\t\t\t<text class=\"row-value\">{{app.address}}</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"card-row\" v-if=\"app.reviewComments\">\r\n\t\t\t\t\t\t\t\t<text class=\"row-label error-label\">审核意见：</text>\r\n\t\t\t\t\t\t\t\t<text class=\"row-value error-text\">{{app.reviewComments}}</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<!-- 操作按钮 -->\r\n\t\t\t\t\t\t<view class=\"card-actions\">\r\n\t\t\t\t\t\t\t<!-- 待审核状态：编辑、撤回、删除 -->\r\n\t\t\t\t\t\t\t<template v-if=\"app.status === 'pending'\">\r\n\t\t\t\t\t\t\t\t<fui-button \r\n\t\t\t\t\t\t\t\t\tsize=\"small\" \r\n\t\t\t\t\t\t\t\t\tbackground=\"#FF9800\"\r\n\t\t\t\t\t\t\t\t\tclass=\"mini-btn\" \r\n\t\t\t\t\t\t\t\t\t@click=\"editApplication(app)\">\r\n\t\t\t\t\t\t\t\t\t编辑\r\n\t\t\t\t\t\t\t\t</fui-button>\r\n\t\t\t\t\t\t\t\t<fui-button \r\n\t\t\t\t\t\t\t\t\tsize=\"small\" \r\n\t\t\t\t\t\t\t\t\tbackground=\"#2A6DCF\"\r\n\t\t\t\t\t\t\t\t\tclass=\"mini-btn\" \r\n\t\t\t\t\t\t\t\t\t@click=\"withdrawApplication(app.id)\">\r\n\t\t\t\t\t\t\t\t\t撤回\r\n\t\t\t\t\t\t\t\t</fui-button>\r\n\t\t\t\t\t\t\t\t<fui-button \r\n\t\t\t\t\t\t\t\t\tsize=\"small\" \r\n\t\t\t\t\t\t\t\t\tbackground=\"#FF5151\"\r\n\t\t\t\t\t\t\t\t\tclass=\"mini-btn\" \r\n\t\t\t\t\t\t\t\t\t@click=\"deleteApplication(app.id)\">\r\n\t\t\t\t\t\t\t\t\t删除\r\n\t\t\t\t\t\t\t\t</fui-button>\r\n\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t<!-- 已完成状态：下载 -->\r\n\t\t\t\t\t\t\t<template v-if=\"app.status === 'completed'\">\r\n\t\t\t\t\t\t\t\t<fui-button \r\n\t\t\t\t\t\t\t\t\tsize=\"small\" \r\n\t\t\t\t\t\t\t\t\t:background=\"primaryColor\"\r\n\t\t\t\t\t\t\t\t\tclass=\"mini-btn\" \r\n\t\t\t\t\t\t\t\t\t@click=\"downloadResult(app.id)\">\r\n\t\t\t\t\t\t\t\t\t下载结果\r\n\t\t\t\t\t\t\t\t</fui-button>\r\n\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t<!-- 已拒绝状态：删除 -->\r\n\t\t\t\t\t\t\t<template v-if=\"app.status === 'rejected'\">\r\n\t\t\t\t\t\t\t\t<fui-button \r\n\t\t\t\t\t\t\t\t\tsize=\"small\" \r\n\t\t\t\t\t\t\t\t\tbackground=\"#FF5151\"\r\n\t\t\t\t\t\t\t\t\tclass=\"mini-btn\" \r\n\t\t\t\t\t\t\t\t\t@click=\"deleteApplication(app.id)\">\r\n\t\t\t\t\t\t\t\t\t删除\r\n\t\t\t\t\t\t\t\t</fui-button>\r\n\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<!-- 安全区域 -->\r\n\t\t\t<view class=\"safe-area-bottom\"></view>\r\n\t\t</view>\r\n\t\t\r\n\t\t<!-- 申请表单弹窗 -->\r\n\t\t<fui-bottom-popup \r\n\t\t\t:show=\"showFormPopup\" \r\n\t\t\t@close=\"closeFormPopup\"\r\n\t\t\theight=\"75%\">\r\n\t\t\t<view class=\"form-popup\">\r\n\t\t\t\t<view class=\"popup-title\">{{ formMode === 'edit' ? '编辑' : '新增' }}档案申请</view>\r\n\t\t\t\t\r\n\t\t\t\t<scroll-view scroll-y class=\"form-scroll\">\r\n\t\t\t\t\t<fui-form>\r\n\t\t\t\t\t\t<fui-form-item label=\"申请标题\" required asterisk>\r\n\t\t\t\t\t\t\t<fui-input \r\n\t\t\t\t\t\t\t\tv-model=\"formData.title\" \r\n\t\t\t\t\t\t\t\tplaceholder=\"请输入申请标题\">\r\n\t\t\t\t\t\t\t</fui-input>\r\n\t\t\t\t\t\t</fui-form-item>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<fui-form-item label=\"申请材料\" required asterisk>\r\n\t\t\t\t\t\t\t<fui-input \r\n\t\t\t\t\t\t\t\tv-model=\"formData.applicationFile\" \r\n\t\t\t\t\t\t\t\tplaceholder=\"请输入申请材料名称（如：成绩单）\">\r\n\t\t\t\t\t\t\t</fui-input>\r\n\t\t\t\t\t\t</fui-form-item>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<fui-form-item label=\"申请原因\" required asterisk>\r\n\t\t\t\t\t\t\t<fui-textarea \r\n\t\t\t\t\t\t\t\tv-model=\"formData.applicationReason\" \r\n\t\t\t\t\t\t\t\tplaceholder=\"请输入申请原因\" \r\n\t\t\t\t\t\t\t\t:maxlength=\"200\">\r\n\t\t\t\t\t\t\t</fui-textarea>\r\n\t\t\t\t\t\t</fui-form-item>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<fui-form-item label=\"接收方式\" required asterisk>\r\n\t\t\t\t\t\t\t<fui-input \r\n\t\t\t\t\t\t\t\tv-model=\"formData.sendTypeText\" \r\n\t\t\t\t\t\t\t\tplaceholder=\"请选择接收方式\" \r\n\t\t\t\t\t\t\t\t@click=\"showSendTypePicker\" \r\n\t\t\t\t\t\t\t\treadonly \r\n\t\t\t\t\t\t\t\trightIcon=\"right\">\r\n\t\t\t\t\t\t\t</fui-input>\r\n\t\t\t\t\t\t</fui-form-item>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<fui-form-item v-if=\"formData.sendType === 'email' || formData.sendType === 'both'\" label=\"电子邮箱\" required asterisk>\r\n\t\t\t\t\t\t\t<fui-input \r\n\t\t\t\t\t\t\t\tv-model=\"formData.email\" \r\n\t\t\t\t\t\t\t\tplaceholder=\"请输入电子邮箱\"\r\n\t\t\t\t\t\t\t\ttype=\"email\">\r\n\t\t\t\t\t\t\t</fui-input>\r\n\t\t\t\t\t\t</fui-form-item>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<fui-form-item v-if=\"formData.sendType === 'paper' || formData.sendType === 'both'\" label=\"邮寄地址\">\r\n\t\t\t\t\t\t\t<fui-textarea \r\n\t\t\t\t\t\t\t\tv-model=\"formData.address\" \r\n\t\t\t\t\t\t\t\tplaceholder=\"请输入邮寄地址\" \r\n\t\t\t\t\t\t\t\t:maxlength=\"100\">\r\n\t\t\t\t\t\t\t</fui-textarea>\r\n\t\t\t\t\t\t</fui-form-item>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<fui-form-item label=\"联系电话\" required asterisk>\r\n\t\t\t\t\t\t\t<fui-input \r\n\t\t\t\t\t\t\t\tv-model=\"formData.phone\" \r\n\t\t\t\t\t\t\t\tplaceholder=\"请输入联系电话\"\r\n\t\t\t\t\t\t\t\ttype=\"number\">\r\n\t\t\t\t\t\t\t</fui-input>\r\n\t\t\t\t\t\t</fui-form-item>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<fui-form-item label=\"备注\">\r\n\t\t\t\t\t\t\t<fui-textarea \r\n\t\t\t\t\t\t\t\tv-model=\"formData.remark\" \r\n\t\t\t\t\t\t\t\tplaceholder=\"请输入备注信息（选填）\" \r\n\t\t\t\t\t\t\t\t:maxlength=\"200\">\r\n\t\t\t\t\t\t\t</fui-textarea>\r\n\t\t\t\t\t\t</fui-form-item>\r\n\t\t\t\t\t</fui-form>\r\n\t\t\t\t</scroll-view>\r\n\t\t\t\t\r\n\t\t\t\t<view class=\"popup-footer\">\r\n\t\t\t\t\t<fui-button \r\n\t\t\t\t\ttype=\"default\" \r\n\t\t\t\t\t@click=\"closeFormPopup\"\r\n\t\t\t\t\tclass=\"footer-btn cancel-btn\"\r\n\t\t\t\t\tbackground=\"#E8E8E8\"\r\n\t\t\t\t\tcolor=\"#333333\">\r\n\t\t\t\t\t取消\r\n\t\t\t\t</fui-button>\r\n\t\t\t\t\t<fui-button \r\n\t\t\t\t\t\ttype=\"primary\" \r\n\t\t\t\t\t\t:background=\"primaryColor\"\r\n\t\t\t\t\t\t@click=\"submitForm\"\r\n\t\t\t\t\t\t:loading=\"isSubmitting\"\r\n\t\t\t\t\t\tclass=\"footer-btn\">\r\n\t\t\t\t\t\t{{ formMode === 'edit' ? '保存' : '提交' }}\r\n\t\t\t\t\t</fui-button>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</fui-bottom-popup>\r\n\t\t\r\n\t\t<!-- 选择器组件 -->\r\n\t\t<fui-picker \r\n\t\t\t:show=\"pickerConfig.show\" \r\n\t\t\t:options=\"pickerConfig.options\" \r\n\t\t\t:zIndex=\"1100\"\r\n\t\t\t@change=\"onPickerConfirm\" \r\n\t\t\t@cancel=\"closePicker\">\r\n\t\t</fui-picker>\r\n\t\t\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport archiveQueryPageJs from './archiveQueryPage.js'\r\n\timport { ref } from 'vue';\r\n\t\r\n\texport default {\r\n\t\tmixins: [archiveQueryPageJs],\r\n\t\tsetup() {\r\n\t\t\t// 导航栏高度\r\n\t\t\tconst navHeight = ref(44);\r\n\t\t\tconst statusBarHeight = ref(0);\r\n\t\t\t\r\n\t\t\t// 初始化导航栏\r\n\t\t\tconst navbarInit = (e) => {\r\n\t\t\t\tstatusBarHeight.value = e.statusBarHeight;\r\n\t\t\t\tnavHeight.value = e.height + e.statusBarHeight;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn {\r\n\t\t\t\tnavHeight,\r\n\t\t\t\tstatusBarHeight,\r\n\t\t\t\tnavbarInit\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t@import './archiveQueryPage.css';\r\n</style>\r\n","import MiniProgramPage from 'D:/code/cfecer/xiaoyouhui-xiaochengxu/pages/archiveQueryPage/archiveQueryPage.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","userInfo","store","getArchiveApplicationList","updateArchiveApplication","addArchiveApplication","deleteArchiveApplication","ref"],"mappings":"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"}