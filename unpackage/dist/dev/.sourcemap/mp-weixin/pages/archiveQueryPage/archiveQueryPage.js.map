{"version":3,"file":"archiveQueryPage.js","sources":["pages/archiveQueryPage/archiveQueryPage.js","pages/archiveQueryPage/archiveQueryPage.vue","../../../../Program Files/HBuilderX.4.76.2025082103/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvYXJjaGl2ZVF1ZXJ5UGFnZS9hcmNoaXZlUXVlcnlQYWdlLnZ1ZQ"],"sourcesContent":["import { ref, reactive } from 'vue';\nimport { \n\tgetArchiveApplicationList, \n\taddArchiveApplication, \n\tupdateArchiveApplication, \n\tdeleteArchiveApplication,\n\tgetArchiveApplicationDetail \n} from '@/api/archives';\nimport store from '@/store';\n\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\t// 导航栏配置\n\t\t\tnavBackground: '#004299',\n\t\t\tnavTitleColor: '#FFFFFF',\n\t\t\tprimaryColor: '#004299',\n\t\t\t\n\t\t\t// 申请列表数据\n\t\t\tapplications: [],\n\t\t\t\n\t\t\t// 表单数据\n\t\t\tformData: {\n\t\t\t\ttitle: '', // 申请标题\n\t\t\t\tapplicationFile: '', // 申请材料\n\t\t\t\tapplicationReason: '', // 申请原因\n\t\t\t\tapplicationAnnexes: '', // 申请附件\n\t\t\t\tsendType: '', // 接收方式值\n\t\t\t\tsendTypeText: '', // 接收方式显示文本\n\t\t\t\temail: '', // 电子邮箱\n\t\t\t\taddress: '', // 邮寄地址\n\t\t\t\tphone: '', // 联系电话\n\t\t\t\tremark: '' // 备注\n\t\t\t},\n\t\t\t\n\t\t\t// 接收方式选项（字符串数组）\n\t\t\tsendTypeOptions: ['电子档', '纸质档(邮寄)', '两者都需要'],\n\t\t\t\n\t\t\t// 接收方式映射\n\t\t\tsendTypeMap: {\n\t\t\t\t'电子档': 'electronic',\n\t\t\t\t'纸质档(邮寄)': 'paper',\n\t\t\t\t'两者都需要': 'both'\n\t\t\t},\n\t\t\t\n\t\t\t// 选择器配置\n\t\t\tpickerConfig: {\n\t\t\t\tshow: false,\n\t\t\t\toptions: [],\n\t\t\t\tcurrentField: ''\n\t\t\t},\n\t\t\t\n\t\t\t// 状态控制\n\t\t\tisLoading: false, // 列表加载状态\n\t\t\tisSubmitting: false, // 提交加载状态\n\t\t\tshowFormPopup: false, // 是否显示表单弹窗\n\t\t\tformMode: 'add', // 表单模式：add-新增, edit-编辑\n\t\t\tcurrentEditId: null // 当前编辑的申请ID\n\t\t}\n\t},\n\tonLoad() {\n\t\tthis.loadApplications();\n\t},\n\tonShow() {\n\t\t// 页面重新显示时刷新列表\n\t\tthis.loadApplications();\n\t},\n\tmethods: {\n\t\t/**\n\t\t * 返回上一页\n\t\t */\n\t\tgoBack() {\n\t\t\tuni.navigateBack({\n\t\t\t\tdelta: 1\n\t\t\t});\n\t\t},\n\t\t\n\t\t/**\n\t\t * 加载申请列表\n\t\t */\n\t\tasync loadApplications() {\n\t\t\ttry {\n\t\t\t\tthis.isLoading = true;\n\t\t\t\t\n\t\t\t\t// 获取当前用户ID（从store中获取）\n\t\t\t\tconst userInfo = store.getters.userInfo || {};\n\t\t\t\tconst userId = userInfo.userId || userInfo.id;\n\t\t\t\t\n\t\t\t\tconsole.log('=== 加载档案申请列表 ===');\n\t\t\t\tconsole.log('用户信息:', userInfo);\n\t\t\t\tconsole.log('用户ID:', userId);\n\t\t\t\t\n\t\t\t\t// 调用API获取列表 - 根据API文档优化查询参数\n\t\t\t\tconst queryParams = {\n\t\t\t\t\tapplicant: userId,\n\t\t\t\t\t// 可以添加其他查询条件\n\t\t\t\t\t// status: '', // 申请状态筛选\n\t\t\t\t\t// title: '', // 标题筛选\n\t\t\t\t\t// applicationFile: '', // 申请材料筛选\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tconsole.log('查询参数:', queryParams);\n\t\t\t\tconst response = await getArchiveApplicationList(queryParams);\n\t\t\t\t\n\t\t\t\t// 处理返回数据 - 根据API响应结构\n\t\t\t\tconsole.log('API响应:', response);\n\t\t\t\t\n\t\t\t\tif (response && response.code === 1) {\n\t\t\t\t\t// 成功响应，处理数据\n\t\t\t\t\tif (response.rows && Array.isArray(response.rows)) {\n\t\t\t\t\t\tthis.applications = response.rows.map(item => ({\n\t\t\t\t\t\t\t...item,\n\t\t\t\t\t\t\tstatus: this.mapStatus(item.status),\n\t\t\t\t\t\t\tstatusText: this.getStatusText(item.status)\n\t\t\t\t\t\t}));\n\t\t\t\t\t\tconsole.log('处理后的申请列表:', this.applications);\n\t\t\t\t\t\tconsole.log('总记录数:', response.total);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.applications = [];\n\t\t\t\t\t\tconsole.log('无申请记录');\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// 响应失败\n\t\t\t\t\tthis.applications = [];\n\t\t\t\t\tconst errorMsg = response?.msg || '获取列表失败';\n\t\t\t\t\tconsole.error('API响应错误:', errorMsg);\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: errorMsg,\n\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('加载申请列表失败:', error);\n\t\t\t\tthis.applications = [];\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '加载失败',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t});\n\t\t\t} finally {\n\t\t\t\tthis.isLoading = false;\n\t\t\t}\n\t\t},\n\t\t\n\t\t/**\n\t\t * 显示申请表单\n\t\t */\n\t\tshowApplicationForm() {\n\t\t\tthis.formMode = 'add';\n\t\t\tthis.currentEditId = null;\n\t\t\tthis.resetFormData();\n\t\t\t// 获取用户信息填充电话和邮箱\n\t\t\tconst userInfo = store.getters.userInfo || {};\n\t\t\tthis.formData.phone = userInfo.phonenumber || userInfo.phone || '';\n\t\t\tthis.formData.email = userInfo.email || '';\n\t\t\tthis.showFormPopup = true;\n\t\t},\n\t\t\n\t\t/**\n\t\t * 关闭表单弹窗\n\t\t */\n\t\tcloseFormPopup() {\n\t\t\tthis.showFormPopup = false;\n\t\t\tthis.resetFormData();\n\t\t},\n\t\t\n\t\t/**\n\t\t * 重置表单数据\n\t\t */\n\t\tresetFormData() {\n\t\t\tthis.formData = {\n\t\t\t\ttitle: '',\n\t\t\t\tapplicationFile: '',\n\t\t\t\tapplicationReason: '',\n\t\t\t\tapplicationAnnexes: '',\n\t\t\t\tsendType: '',\n\t\t\t\tsendTypeText: '',\n\t\t\t\temail: '',\n\t\t\t\taddress: '',\n\t\t\t\tphone: '',\n\t\t\t\tremark: ''\n\t\t\t};\n\t\t},\n\t\t\n\t\t/**\n\t\t * 打开接收方式选择器\n\t\t */\n\t\tshowSendTypePicker() {\n\t\t\tthis.pickerConfig = {\n\t\t\t\tshow: true,\n\t\t\t\toptions: this.sendTypeOptions,\n\t\t\t\tcurrentField: 'sendType'\n\t\t\t};\n\t\t},\n\t\t\n\t\t/**\n\t\t * 关闭选择器\n\t\t */\n\t\tclosePicker() {\n\t\t\tthis.pickerConfig.show = false;\n\t\t},\n\t\t\n\t\t/**\n\t\t * 选择器确认选择\n\t\t */\n\t\tonPickerConfirm(e) {\n\t\t\ttry {\n\t\t\t\tconst selectedText = e.text; // 选中的文本\n\t\t\t\tconst selectedValue = this.sendTypeMap[selectedText]; // 映射到对应的值\n\t\t\t\t\n\t\t\t\t// 先关闭选择器，避免布局冲突\n\t\t\t\tthis.closePicker();\n\t\t\t\t\n\t\t\t\t// 延迟更新数据，确保选择器完全关闭后再更新\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.formData.sendTypeText = selectedText;\n\t\t\t\t\tthis.formData.sendType = selectedValue;\n\t\t\t\t}, 150);\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('选择器确认错误:', error);\n\t\t\t\tthis.closePicker();\n\t\t\t}\n\t\t},\n\t\t\n\t\t/**\n\t\t * 下载查询结果\n\t\t */\n\t\tdownloadResult(recordId) {\n\t\t\tconst record = this.applications.find(item => item.id === recordId);\n\t\t\tif (!record || !record.resultUrl) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '暂无可下载文件',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\t// 如果有下载链接，使用uni.downloadFile下载\n\t\t\tuni.downloadFile({\n\t\t\t\turl: record.resultUrl,\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\tif (res.statusCode === 200) {\n\t\t\t\t\t\t// 保存文件到本地\n\t\t\t\t\t\tconst filePath = res.tempFilePath;\n\t\t\t\t\t\tuni.saveFile({\n\t\t\t\t\t\t\ttempFilePath: filePath,\n\t\t\t\t\t\t\tsuccess: (saveRes) => {\n\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\ttitle: '下载成功',\n\t\t\t\t\t\t\t\t\ticon: 'success'\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tfail: () => {\n\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\ttitle: '保存失败',\n\t\t\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tfail: (error) => {\n\t\t\t\t\tconsole.error('下载失败:', error);\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '下载失败',\n\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t\n\t\t/**\n\t\t * 提交表单\n\t\t */\n\t\tasync submitForm() {\n\t\t\t// 表单验证\n\t\t\tif (!this.validateForm()) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\ttry {\n\t\t\t\tthis.isSubmitting = true;\n\t\t\t\t\n\t\t\t\t// 获取当前用户信息\n\t\t\t\tconst userInfo = store.getters.userInfo || {};\n\t\t\t\tconst userId = userInfo.userId || userInfo.id;\n\t\t\t\tconst userName = userInfo.userName || userInfo.nickName || '';\n\t\t\t\t\n\t\t\t\t// 检查用户信息\n\t\t\t\tif (!userId) {\n\t\t\t\t\tconsole.error('用户信息缺失，无法提交申请');\n\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\ttitle: '提示',\n\t\t\t\t\t\tcontent: '用户信息缺失，请重新登录后再试',\n\t\t\t\t\t\tshowCancel: false,\n\t\t\t\t\t\tsuccess: () => {\n\t\t\t\t\t\t\tuni.reLaunch({ url: '/pages/login/login' });\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 构建提交数据 - 完全匹配API示例结构\n\t\t\t\tconst submitData = {\n\t\t\t\t\ttitle: this.formData.title,\n\t\t\t\t\tapplicant: userId,\n\t\t\t\t\tapplicantUserName: userName,\n\t\t\t\t\tapplicantNickName: userInfo.nickName || '',\n\t\t\t\t\tdeptId: userInfo.deptId || 1, // 默认为1\n\t\t\t\t\tapplicationFile: this.formData.applicationFile,\n\t\t\t\t\tapplicationReason: this.formData.applicationReason,\n\t\t\t\t\tapplicationAnnexes: this.formData.applicationAnnexes || '', // 申请附件\n\t\t\t\t\tsendType: this.formData.sendType,\n\t\t\t\t\temail: this.formData.email || userInfo.email || '',\n\t\t\t\t\taddress: this.formData.address || '',\n\t\t\t\t\tphone: this.formData.phone,\n\t\t\t\t\tstatus: '0', // 0-待审核\n\t\t\t\t\treviewer: null, // 审核人，新增时为空\n\t\t\t\t\treviewerName: '', // 审核人姓名\n\t\t\t\t\treviewComments: '', // 审核意见\n\t\t\t\t\tcreateBy: userName, // 创建者\n\t\t\t\t\tupdateBy: userName, // 更新者\n\t\t\t\t\tremark: this.formData.remark || '',\n\t\t\t\t\tparams: {\n\t\t\t\t\t\t// 扩展参数，可用于存储额外信息\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\t// 打印调试信息\n\t\t\t\tconsole.log('=== 档案申请提交调试信息 ===');\n\t\t\t\tconsole.log('用户信息:', userInfo);\n\t\t\t\tconsole.log('表单数据:', this.formData);\n\t\t\t\tconsole.log('提交数据:', submitData);\n\t\t\t\tconsole.log('API模式:', this.formMode === 'edit' ? '编辑' : '新增');\n\t\t\t\t\n\t\t\t\t// 根据是否为编辑模式调用不同API\n\t\t\t\tif (this.formMode === 'edit' && this.currentEditId) {\n\t\t\t\t\tsubmitData.id = this.currentEditId;\n\t\t\t\t\tconsole.log('调用编辑API:', submitData);\n\t\t\t\t\tconst response = await updateArchiveApplication(submitData);\n\t\t\t\t\tconsole.log('编辑API响应:', response);\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '修改成功',\n\t\t\t\t\t\ticon: 'success'\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tconsole.log('调用新增API:', submitData);\n\t\t\t\t\tconst response = await addArchiveApplication(submitData);\n\t\t\t\t\tconsole.log('新增API响应:', response);\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '提交成功',\n\t\t\t\t\t\ticon: 'success'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tthis.loadApplications();\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('提交错误:', error);\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: this.formMode === 'edit' ? '修改失败' : '提交失败',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t});\n\t\t\t} finally {\n\t\t\t\tthis.isSubmitting = false;\n\t\t\t}\n\t\t},\n\t\t\n\t\t/**\n\t\t * 表单验证\n\t\t */\n\t\tvalidateForm() {\n\t\t\tif (!this.formData.title) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '请输入申请标题',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t});\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t\n\t\t\tif (!this.formData.applicationFile) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '请输入申请材料名称',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t});\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t\n\t\t\tif (!this.formData.applicationReason) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '请输入申请原因',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t});\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t\n\t\t\tif (!this.formData.sendType) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '请选择接收方式',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t});\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t\n\t\t\t// 验证电子邮箱（电子档或两者都需要时必填）\n\t\t\tif ((this.formData.sendType === 'electronic' || this.formData.sendType === 'both') && !this.formData.email) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '请输入电子邮箱',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t});\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t\n\t\t\t// 验证邮箱格式\n\t\t\tif (this.formData.email && !/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(this.formData.email)) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '请输入正确的邮箱格式',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t});\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t\n\t\t\tif ((this.formData.sendType === 'paper' || this.formData.sendType === 'both') && !this.formData.address) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '请输入邮寄地址',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t});\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t\n\t\t\tif (!this.formData.phone) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '请输入联系电话',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t});\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t\n\t\t\tconst phoneReg = /^1[3-9]\\d{9}$/;\n\t\t\tif (!phoneReg.test(this.formData.phone)) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '请输入正确的手机号',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t});\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t\n\t\t\treturn true;\n\t\t},\n\t\t\n\t\t/**\n\t\t * 编辑档案申请\n\t\t */\n\t\teditApplication(app) {\n\t\t\tthis.formMode = 'edit';\n\t\t\tthis.currentEditId = app.id;\n\t\t\t\n\t\t\t// 填充表单数据\n\t\t\tconst sendTypeText = Object.keys(this.sendTypeMap).find(key => this.sendTypeMap[key] === app.sendType) || '';\n\t\t\t\n\t\t\tthis.formData = {\n\t\t\t\ttitle: app.title || '',\n\t\t\t\tapplicationFile: app.applicationFile || '',\n\t\t\t\tapplicationReason: app.applicationReason || '',\n\t\t\t\tapplicationAnnexes: app.applicationAnnexes || '',\n\t\t\t\tsendType: app.sendType || '',\n\t\t\t\tsendTypeText: sendTypeText,\n\t\t\t\temail: app.email || '',\n\t\t\t\taddress: app.address || '',\n\t\t\t\tphone: app.phone || '',\n\t\t\t\tremark: app.remark || ''\n\t\t\t};\n\t\t\t\n\t\t\t// 显示表单\n\t\t\tthis.showFormPopup = true;\n\t\t},\n\t\t\n\t\t/**\n\t\t * 撤回档案申请\n\t\t */\n\t\tasync withdrawApplication(appId) {\n\t\t\ttry {\n\t\t\t\tconst confirmResult = await new Promise((resolve) => {\n\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\ttitle: '确认撤回',\n\t\t\t\t\t\tcontent: '确定要撤回这条申请吗？',\n\t\t\t\t\t\tsuccess: (res) => resolve(res.confirm),\n\t\t\t\t\t\tfail: () => resolve(false)\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tif (!confirmResult) return;\n\t\t\t\t\n\t\t\t\t// 撤回即删除\n\t\t\t\tawait deleteArchiveApplication(appId);\n\t\t\t\t\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '已撤回',\n\t\t\t\t\ticon: 'success'\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tthis.loadApplications();\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('撤回失败:', error);\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '撤回失败',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t\n\t\t/**\n\t\t * 删除档案申请\n\t\t */\n\t\tasync deleteApplication(appId) {\n\t\t\ttry {\n\t\t\t\tconst confirmResult = await new Promise((resolve) => {\n\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\ttitle: '确认删除',\n\t\t\t\t\t\tcontent: '确定要删除这条申请吗？删除后将无法恢复。',\n\t\t\t\t\t\tsuccess: (res) => resolve(res.confirm),\n\t\t\t\t\t\tfail: () => resolve(false)\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tif (!confirmResult) return;\n\t\t\t\t\n\t\t\t\tawait deleteArchiveApplication(appId);\n\t\t\t\t\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '删除成功',\n\t\t\t\t\ticon: 'success'\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tthis.loadApplications();\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('删除申请错误:', error);\n\t\t\t\tuni.hideLoading();\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '删除失败，请重试',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t\n\t\t/**\n\t\t * 映射状态值\n\t\t */\n\t\tmapStatus(statusValue) {\n\t\t\tconst statusMap = {\n\t\t\t\t'0': 'pending',\n\t\t\t\t'1': 'completed',\n\t\t\t\t'2': 'rejected'\n\t\t\t};\n\t\t\treturn statusMap[String(statusValue)] || 'pending';\n\t\t},\n\t\t\n\t\t/**\n\t\t * 获取状态文本\n\t\t */\n\t\tgetStatusText(statusValue) {\n\t\t\tconst textMap = {\n\t\t\t\t'0': '待审核',\n\t\t\t\t'1': '已通过',\n\t\t\t\t'2': '已拒绝'\n\t\t\t};\n\t\t\treturn textMap[String(statusValue)] || '待审核';\n\t\t}\n\t}\n}\n","<template>\n\t<view class=\"page-container\">\n\t\t<!-- 自定义导航栏 -->\n\t\t<fui-nav-bar\n\t\t\ttitle=\"档案查询申请\"\n\t\t\t:background=\"navBackground\"\n\t\t\t:color=\"navTitleColor\"\n\t\t\tfontWeight=\"bold\"\n\t\t\t:splitLine=\"true\"\n\t\t\t:isFixed=\"true\"\n\t\t\t:isOccupy=\"true\"\n\t\t\t@init=\"navbarInit\"\n\t\t\t@leftClick=\"goBack\">\n\t\t\t<fui-icon name=\"arrowleft\" :color=\"navTitleColor\" :size=\"36\"></fui-icon>\n\t\t</fui-nav-bar>\n\t\t\n\t\t<!-- 内容区域 -->\n\t\t<view class=\"content-container\" :style=\"{ paddingTop: navHeight + 'px' }\">\n\t\t\t\n\t\t\t<!-- 顶部操作区 -->\n\t\t\t<view class=\"action-bar\">\n\t\t\t\t<fui-button \n\t\t\t\t\ttype=\"primary\" \n\t\t\t\t\t:background=\"primaryColor\" \n\t\t\t\t\t@click=\"showApplicationForm\"\n\t\t\t\t\tclass=\"add-button\">\n\t\t\t\t\t<fui-icon name=\"add\" color=\"#FFFFFF\" :size=\"32\"></fui-icon>\n\t\t\t\t\t<text class=\"add-text\">新增申请</text>\n\t\t\t\t</fui-button>\n\t\t\t</view>\n\t\t\t\n\t\t\t<!-- 申请列表区域 -->\n\t\t\t<view class=\"application-list\">\n\t\t\t\t<!-- 列表标题 -->\n\t\t\t\t<view class=\"list-header\">\n\t\t\t\t\t<text class=\"header-title\">我的申请</text>\n\t\t\t\t\t<text class=\"header-count\">共 {{applications.length}} 条</text>\n\t\t\t\t</view>\n\t\t\t\t\n\t\t\t\t<!-- 加载提示 -->\n\t\t\t\t<view v-if=\"isLoading\" class=\"empty-records\">\n\t\t\t\t\t<fui-loadmore text=\"加载中...\" iconColor=\"#004299\"></fui-loadmore>\n\t\t\t\t</view>\n\t\t\t\t\n\t\t\t\t<!-- 无记录提示 -->\n\t\t\t\t<view v-else-if=\"applications.length === 0\" class=\"empty-records\">\n\t\t\t\t\t<fui-icon name=\"file-search-line\" :size=\"80\" color=\"#CCCCCC\"></fui-icon>\n\t\t\t\t\t<text class=\"empty-text\">暂无申请记录</text>\n\t\t\t\t\t<text class=\"empty-hint\">点击上方\"新增申请\"按钮创建档案查询申请</text>\n\t\t\t\t</view>\n\t\t\t\t\n\t\t\t\t<!-- 申请记录列表 -->\n\t\t\t\t<view v-else class=\"application-cards\">\n\t\t\t\t\t<view class=\"app-card\" v-for=\"(app, index) in applications\" :key=\"app.id\">\n\t\t\t\t\t\t<!-- 卡片头部 -->\n\t\t\t\t\t\t<view class=\"card-header\">\n\t\t\t\t\t\t\t<view class=\"card-title-area\">\n\t\t\t\t\t\t\t\t<text class=\"card-title\">{{app.title}}</text>\n\t\t\t\t\t\t\t\t<view class=\"card-status\" :class=\"'status-' + app.status\">\n\t\t\t\t\t\t\t\t\t{{app.statusText}}\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t<view class=\"card-time\">{{app.createTime}}</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<!-- 卡片内容 -->\n\t\t\t\t\t\t<view class=\"card-body\">\n\t\t\t\t\t\t\t<view class=\"card-row\">\n\t\t\t\t\t\t\t\t<text class=\"row-label\">申请材料：</text>\n\t\t\t\t\t\t\t\t<text class=\"row-value\">{{app.applicationFile}}</text>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t<view class=\"card-row\">\n\t\t\t\t\t\t\t\t<text class=\"row-label\">申请原因：</text>\n\t\t\t\t\t\t\t\t<text class=\"row-value\">{{app.applicationReason}}</text>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t<view class=\"card-row\" v-if=\"app.address\">\n\t\t\t\t\t\t\t\t<text class=\"row-label\">邮寄地址：</text>\n\t\t\t\t\t\t\t\t<text class=\"row-value\">{{app.address}}</text>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t<view class=\"card-row\" v-if=\"app.reviewComments\">\n\t\t\t\t\t\t\t\t<text class=\"row-label error-label\">审核意见：</text>\n\t\t\t\t\t\t\t\t<text class=\"row-value error-text\">{{app.reviewComments}}</text>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<!-- 操作按钮 -->\n\t\t\t\t\t\t<view class=\"card-actions\">\n\t\t\t\t\t\t\t<!-- 待审核状态：编辑、撤回、删除 -->\n\t\t\t\t\t\t\t<template v-if=\"app.status === 'pending'\">\n\t\t\t\t\t\t\t\t<fui-button \n\t\t\t\t\t\t\t\t\tsize=\"small\" \n\t\t\t\t\t\t\t\t\tbackground=\"#FF9800\"\n\t\t\t\t\t\t\t\t\tclass=\"mini-btn\" \n\t\t\t\t\t\t\t\t\t@click=\"editApplication(app)\">\n\t\t\t\t\t\t\t\t\t编辑\n\t\t\t\t\t\t\t\t</fui-button>\n\t\t\t\t\t\t\t\t<fui-button \n\t\t\t\t\t\t\t\t\tsize=\"small\" \n\t\t\t\t\t\t\t\t\tbackground=\"#2A6DCF\"\n\t\t\t\t\t\t\t\t\tclass=\"mini-btn\" \n\t\t\t\t\t\t\t\t\t@click=\"withdrawApplication(app.id)\">\n\t\t\t\t\t\t\t\t\t撤回\n\t\t\t\t\t\t\t\t</fui-button>\n\t\t\t\t\t\t\t\t<fui-button \n\t\t\t\t\t\t\t\t\tsize=\"small\" \n\t\t\t\t\t\t\t\t\tbackground=\"#FF5151\"\n\t\t\t\t\t\t\t\t\tclass=\"mini-btn\" \n\t\t\t\t\t\t\t\t\t@click=\"deleteApplication(app.id)\">\n\t\t\t\t\t\t\t\t\t删除\n\t\t\t\t\t\t\t\t</fui-button>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t<!-- 已完成状态：下载 -->\n\t\t\t\t\t\t\t<template v-if=\"app.status === 'completed'\">\n\t\t\t\t\t\t\t\t<fui-button \n\t\t\t\t\t\t\t\t\tsize=\"small\" \n\t\t\t\t\t\t\t\t\t:background=\"primaryColor\"\n\t\t\t\t\t\t\t\t\tclass=\"mini-btn\" \n\t\t\t\t\t\t\t\t\t@click=\"downloadResult(app.id)\">\n\t\t\t\t\t\t\t\t\t下载结果\n\t\t\t\t\t\t\t\t</fui-button>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t<!-- 已拒绝状态：删除 -->\n\t\t\t\t\t\t\t<template v-if=\"app.status === 'rejected'\">\n\t\t\t\t\t\t\t\t<fui-button \n\t\t\t\t\t\t\t\t\tsize=\"small\" \n\t\t\t\t\t\t\t\t\tbackground=\"#FF5151\"\n\t\t\t\t\t\t\t\t\tclass=\"mini-btn\" \n\t\t\t\t\t\t\t\t\t@click=\"deleteApplication(app.id)\">\n\t\t\t\t\t\t\t\t\t删除\n\t\t\t\t\t\t\t\t</fui-button>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t\n\t\t\t<!-- 安全区域 -->\n\t\t\t<view class=\"safe-area-bottom\"></view>\n\t\t</view>\n\t\t\n\t\t<!-- 申请表单弹窗 -->\n\t\t<fui-bottom-popup \n\t\t\t:show=\"showFormPopup\" \n\t\t\t@close=\"closeFormPopup\"\n\t\t\theight=\"75%\">\n\t\t\t<view class=\"form-popup\">\n\t\t\t\t<view class=\"popup-title\">{{ formMode === 'edit' ? '编辑' : '新增' }}档案申请</view>\n\t\t\t\t\n\t\t\t\t<scroll-view scroll-y class=\"form-scroll\">\n\t\t\t\t\t<fui-form>\n\t\t\t\t\t\t<fui-form-item label=\"申请标题\" required asterisk>\n\t\t\t\t\t\t\t<fui-input \n\t\t\t\t\t\t\t\tv-model=\"formData.title\" \n\t\t\t\t\t\t\t\tplaceholder=\"请输入申请标题\">\n\t\t\t\t\t\t\t</fui-input>\n\t\t\t\t\t\t</fui-form-item>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<fui-form-item label=\"申请材料\" required asterisk>\n\t\t\t\t\t\t\t<fui-input \n\t\t\t\t\t\t\t\tv-model=\"formData.applicationFile\" \n\t\t\t\t\t\t\t\tplaceholder=\"请输入申请材料名称（如：成绩单）\">\n\t\t\t\t\t\t\t</fui-input>\n\t\t\t\t\t\t</fui-form-item>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<fui-form-item label=\"申请原因\" required asterisk>\n\t\t\t\t\t\t\t<fui-textarea \n\t\t\t\t\t\t\t\tv-model=\"formData.applicationReason\" \n\t\t\t\t\t\t\t\tplaceholder=\"请输入申请原因\" \n\t\t\t\t\t\t\t\t:maxlength=\"200\">\n\t\t\t\t\t\t\t</fui-textarea>\n\t\t\t\t\t\t</fui-form-item>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<fui-form-item label=\"接收方式\" required asterisk>\n\t\t\t\t\t\t\t<fui-input \n\t\t\t\t\t\t\t\tv-model=\"formData.sendTypeText\" \n\t\t\t\t\t\t\t\tplaceholder=\"请选择接收方式\" \n\t\t\t\t\t\t\t\t@click=\"showSendTypePicker\" \n\t\t\t\t\t\t\t\treadonly \n\t\t\t\t\t\t\t\trightIcon=\"right\">\n\t\t\t\t\t\t\t</fui-input>\n\t\t\t\t\t\t</fui-form-item>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<fui-form-item v-if=\"formData.sendType === 'electronic' || formData.sendType === 'both'\" label=\"电子邮箱\" required asterisk>\n\t\t\t\t\t\t\t<fui-input \n\t\t\t\t\t\t\t\tv-model=\"formData.email\" \n\t\t\t\t\t\t\t\tplaceholder=\"请输入电子邮箱\"\n\t\t\t\t\t\t\t\ttype=\"email\">\n\t\t\t\t\t\t\t</fui-input>\n\t\t\t\t\t\t</fui-form-item>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<fui-form-item v-if=\"formData.sendType === 'paper' || formData.sendType === 'both'\" label=\"邮寄地址\">\n\t\t\t\t\t\t\t<fui-textarea \n\t\t\t\t\t\t\t\tv-model=\"formData.address\" \n\t\t\t\t\t\t\t\tplaceholder=\"请输入邮寄地址\" \n\t\t\t\t\t\t\t\t:maxlength=\"100\">\n\t\t\t\t\t\t\t</fui-textarea>\n\t\t\t\t\t\t</fui-form-item>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<fui-form-item label=\"联系电话\" required asterisk>\n\t\t\t\t\t\t\t<fui-input \n\t\t\t\t\t\t\t\tv-model=\"formData.phone\" \n\t\t\t\t\t\t\t\tplaceholder=\"请输入联系电话\"\n\t\t\t\t\t\t\t\ttype=\"number\">\n\t\t\t\t\t\t\t</fui-input>\n\t\t\t\t\t\t</fui-form-item>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<fui-form-item label=\"备注\">\n\t\t\t\t\t\t\t<fui-textarea \n\t\t\t\t\t\t\t\tv-model=\"formData.remark\" \n\t\t\t\t\t\t\t\tplaceholder=\"请输入备注信息（选填）\" \n\t\t\t\t\t\t\t\t:maxlength=\"200\">\n\t\t\t\t\t\t\t</fui-textarea>\n\t\t\t\t\t\t</fui-form-item>\n\t\t\t\t\t</fui-form>\n\t\t\t\t</scroll-view>\n\t\t\t\t\n\t\t\t\t<view class=\"popup-footer\">\n\t\t\t\t\t<fui-button \n\t\t\t\t\ttype=\"default\" \n\t\t\t\t\t@click=\"closeFormPopup\"\n\t\t\t\t\tclass=\"footer-btn cancel-btn\"\n\t\t\t\t\tbackground=\"#E8E8E8\"\n\t\t\t\t\tcolor=\"#333333\">\n\t\t\t\t\t取消\n\t\t\t\t</fui-button>\n\t\t\t\t\t<fui-button \n\t\t\t\t\t\ttype=\"primary\" \n\t\t\t\t\t\t:background=\"primaryColor\"\n\t\t\t\t\t\t@click=\"submitForm\"\n\t\t\t\t\t\t:loading=\"isSubmitting\"\n\t\t\t\t\t\tclass=\"footer-btn\">\n\t\t\t\t\t\t{{ formMode === 'edit' ? '保存' : '提交' }}\n\t\t\t\t\t</fui-button>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</fui-bottom-popup>\n\t\t\n\t\t<!-- 选择器组件 -->\n\t\t<fui-picker \n\t\t\t:show=\"pickerConfig.show\" \n\t\t\t:options=\"pickerConfig.options\" \n\t\t\t:zIndex=\"1100\"\n\t\t\t@change=\"onPickerConfirm\" \n\t\t\t@cancel=\"closePicker\">\n\t\t</fui-picker>\n\t\t\n\t</view>\n</template>\n\n<script>\n\timport archiveQueryPageJs from './archiveQueryPage.js'\n\timport { ref } from 'vue';\n\t\n\texport default {\n\t\tmixins: [archiveQueryPageJs],\n\t\tsetup() {\n\t\t\t// 导航栏高度\n\t\t\tconst navHeight = ref(44);\n\t\t\tconst statusBarHeight = ref(0);\n\t\t\t\n\t\t\t// 初始化导航栏\n\t\t\tconst navbarInit = (e) => {\n\t\t\t\tstatusBarHeight.value = e.statusBarHeight;\n\t\t\t\tnavHeight.value = e.height + e.statusBarHeight;\n\t\t\t}\n\t\t\t\n\t\t\treturn {\n\t\t\t\tnavHeight,\n\t\t\t\tstatusBarHeight,\n\t\t\t\tnavbarInit\n\t\t\t};\n\t\t}\n\t}\n</script>\n\n<style>\n\t@import './archiveQueryPage.css';\n</style>\n","import MiniProgramPage from 'D:/Projects/XBuider/校友会/xiaoyouhui-xiaochengxu/pages/archiveQueryPage/archiveQueryPage.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","store","getArchiveApplicationList","updateArchiveApplication","addArchiveApplication","deleteArchiveApplication","ref"],"mappings":"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"}