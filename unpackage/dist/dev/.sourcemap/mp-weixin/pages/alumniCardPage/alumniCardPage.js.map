{"version":3,"file":"alumniCardPage.js","sources":["pages/alumniCardPage/alumniCardPage.js","pages/alumniCardPage/alumniCardPage.vue","../../../../Program Files/HBuilderX.4.76.2025082103/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvYWx1bW5pQ2FyZFBhZ2UvYWx1bW5pQ2FyZFBhZ2UudnVl"],"sourcesContent":["export default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\t// 导航栏配置\r\n\t\t\tnavBackground: '#F0F4F8', // 导航栏背景色 - 与页面背景色保持一致\r\n\t\t\tnavTitleColor: '#004299', // 导航栏标题颜色 - 重财蓝，在浅色背景上使用深色文字\r\n\t\t\t\r\n\t\t\t// 用户信息\r\n\t\t\tuserInfo: {\r\n\t\t\t\tname: '张三', // 用户姓名\r\n\t\t\t\tenrollmentYear: '2025', // 入学年份\r\n\t\t\t\teducationType: '本科', // 入学类型：本科、专升本等\r\n\t\t\t\tfaculty: '会计学院', // 院系\r\n\t\t\t\tavatar: '', // 头像URL，为空则使用默认头像\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// 二维码数据\r\n\t\t\tqrcodeValue: '', // 二维码内容\r\n\t\t\tqrcodeExpireTime: 0, // 二维码过期时间戳\r\n\t\t\t\r\n\t\t\t// 是否显示二维码\r\n\t\t\tshowQRCode: false\r\n\t\t}\r\n\t},\r\n\tonLoad() {\r\n\t\t// 页面加载时生成二维码\r\n\t\tthis.generateQRCode();\r\n\t},\r\n\tmethods: {\r\n\t\t/**\r\n\t\t * 返回上一页\r\n\t\t */\r\n\t\tgoBack() {\r\n\t\t\tuni.navigateBack({\r\n\t\t\t\tdelta: 1\r\n\t\t\t});\r\n\t\t},\r\n\t\r\n\t\t/**\r\n\t\t * 生成二维码\r\n\t\t */\r\n\t\tgenerateQRCode() {\r\n\t\t\t// 模拟生成二维码，实际应用中应该从服务器获取\r\n\t\t\t// 二维码内容可以包含用户ID、时间戳等信息，并加密\r\n\t\t\tconst timestamp = Date.now();\r\n\t\t\tconst expireTime = timestamp + 30 * 60 * 1000; // 30分钟后过期\r\n\t\t\t\r\n\t\t\t// 二维码内容格式(示例)：userID_timestamp_expireTime_signature\r\n\t\t\t// 这里简化处理，实际应用中应该添加签名防篡改\r\n\t\t\tconst qrcodeContent = `alumni_${this.userInfo.name}_${timestamp}_${expireTime}`;\r\n\t\t\t\r\n\t\t\tthis.qrcodeValue = qrcodeContent;\r\n\t\t\tthis.qrcodeExpireTime = expireTime;\r\n\t\t\t\r\n\t\t\t// 设置定时器，接近过期时提醒用户刷新\r\n\t\t\tthis.setExpirationReminder();\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * 设置过期提醒\r\n\t\t */\r\n\t\tsetExpirationReminder() {\r\n\t\t\t// 清除之前的计时器\r\n\t\t\tif (this.expirationTimer) {\r\n\t\t\t\tclearTimeout(this.expirationTimer);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tconst now = Date.now();\r\n\t\t\tconst timeToExpire = this.qrcodeExpireTime - now;\r\n\t\t\t\r\n\t\t\t// 如果已过期，立即刷新\r\n\t\t\tif (timeToExpire <= 0) {\r\n\t\t\t\tthis.generateQRCode();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// 设置在二维码过期前5分钟提醒\r\n\t\t\tconst reminderTime = timeToExpire - (5 * 60 * 1000);\r\n\t\t\tif (reminderTime > 0) {\r\n\t\t\t\tthis.expirationTimer = setTimeout(() => {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '二维码即将过期，请刷新',\r\n\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\tduration: 3000\r\n\t\t\t\t\t});\r\n\t\t\t\t}, reminderTime);\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * 切换二维码显示/隐藏\r\n\t\t */\r\n\t\ttoggleQRCode() {\r\n\t\t\tif (!this.showQRCode) {\r\n\t\t\t\t// 显示前刷新二维码\r\n\t\t\t\tthis.generateQRCode();\r\n\t\t\t}\r\n\t\t\tthis.showQRCode = !this.showQRCode;\r\n\t\t}\r\n\t}\r\n}\r\n","<template>\n\t<view class=\"content-area\">\n\t\t<!-- 使用FirstUI导航栏组件 -->\n\t\t<fui-nav-bar\n\t\t\t:statusBar=\"true\"\n\t\t\ttitle=\"校友卡\"\n\t\t\t:background=\"navBackground\"\n\t\t\t:color=\"navTitleColor\"\n\t\t\t:size=\"18\"\n\t\t\t:isFixed=\"true\"\n\t\t\t:fontWeight=\"500\"\n\t\t\t@init=\"navbarInit\"\n\t\t\t@leftClick=\"goBack\">\n\t\t\t<!-- 根据文档，左侧内容通过默认插槽实现 -->\n\t\t\t<fui-icon name=\"arrowleft\" :size=\"48\" :color=\"navTitleColor\"></fui-icon>\n\t\t</fui-nav-bar>\n\t\t\n\t\t<!-- 卡片主体内容 -->\n\t\t<view class=\"card-container\" :style=\"{ marginTop: navHeight + 'px' }\">\n\t\t\t<!-- 校友卡信息卡片 -->\n\t\t\t<view class=\"alumni-card\">\n\t\t\t\t<!-- 卡片顶部校徽和校名 -->\n\t\t\t\t<view class=\"card-header\">\n\t\t\t\t\t<view class=\"school-title-image\">\n\t\t\t\t\t\t<image src=\"/static/school-badge- belt.png\" class=\"title-full-image\"></image>\n\t\t\t\t\t\t<!-- <text class=\"school-alumni-text\">校友卡</text> -->\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t\n\t\t\t\t<!-- 卡片内容区域 -->\n\t\t\t\t<view class=\"card-content\">\n\t\t\t\t\t<!-- 左侧信息区 -->\n\t\t\t\t\t<view class=\"user-info\">\n\t\t\t\t\t\t<fui-row margin-bottom=\"16rpx\">\n\t\t\t\t\t\t\t<fui-col :span=\"8\">\n\t\t\t\t\t\t\t\t<view class=\"label-container\">\n\t\t\t\t\t\t\t\t\t<text class=\"info-label\">姓名</text>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t</fui-col>\n\t\t\t\t\t\t\t<fui-col :span=\"16\">\n\t\t\t\t\t\t\t\t<text class=\"info-value\">{{ userInfo.name }}</text>\n\t\t\t\t\t\t\t</fui-col>\n\t\t\t\t\t\t</fui-row>\n\t\t\t\t\t\t<fui-row margin-bottom=\"16rpx\">\n\t\t\t\t\t\t\t<fui-col :span=\"8\">\n\t\t\t\t\t\t\t\t<view class=\"label-container\">\n\t\t\t\t\t\t\t\t\t<text class=\"info-label\">入校年份</text>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t</fui-col>\n\t\t\t\t\t\t\t<fui-col :span=\"16\">\n\t\t\t\t\t\t\t\t<text class=\"info-value\">{{ userInfo.enrollmentYear }}</text>\n\t\t\t\t\t\t\t</fui-col>\n\t\t\t\t\t\t</fui-row>\n\t\t\t\t\t\t<fui-row margin-bottom=\"16rpx\">\n\t\t\t\t\t\t\t<fui-col :span=\"8\">\n\t\t\t\t\t\t\t\t<view class=\"label-container\">\n\t\t\t\t\t\t\t\t\t<text class=\"info-label\">入校类型</text>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t</fui-col>\n\t\t\t\t\t\t\t<fui-col :span=\"16\">\n\t\t\t\t\t\t\t\t<text class=\"info-value\">{{ userInfo.educationType }}</text>\n\t\t\t\t\t\t\t</fui-col>\n\t\t\t\t\t\t</fui-row>\n\t\t\t\t\t\t<fui-row>\n\t\t\t\t\t\t\t<fui-col :span=\"8\">\n\t\t\t\t\t\t\t\t<view class=\"label-container\">\n\t\t\t\t\t\t\t\t\t<text class=\"info-label\">院系</text>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t</fui-col>\n\t\t\t\t\t\t\t<fui-col :span=\"16\">\n\t\t\t\t\t\t\t\t<text class=\"info-value\">{{ userInfo.faculty }}</text>\n\t\t\t\t\t\t\t</fui-col>\n\t\t\t\t\t\t</fui-row>\n\t\t\t\t\t</view>\n\t\t\t\t\t\n\t\t\t\t\t<!-- 右侧照片区 -->\n\t\t\t\t\t<view class=\"user-photo\">\n\t\t\t\t\t\t<image :src=\"userInfo.avatar || '/static/user-fill.svg'\" class=\"photo-image\"></image>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t\n\t\t\t<!-- 内嵌二维码区域 -->\n\t\t\t<view class=\"qrcode-area\" v-if=\"showQRCode\">\n\t\t\t\t<view class=\"inline-qrcode-container\">\n\t\t\t\t\t<view class=\"qrcode-title-area\">\n\t\t\t\t\t\t<text class=\"qrcode-title\">校友身份二维码</text>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"qrcode-content\">\n\t\t\t\t\t\t<fui-qrcode \n\t\t\t\t\t\t\t:value=\"qrcodeValue\" \n\t\t\t\t\t\t\t:width=\"240\" \n\t\t\t\t\t\t\t:height=\"240\"\n\t\t\t\t\t\t\tforeground=\"#004299\"\n\t\t\t\t\t\t\tbackground=\"#ffffff\"\n\t\t\t\t\t\t\t@ready=\"onQRCodeReady\">\n\t\t\t\t\t\t</fui-qrcode>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"qrcode-footer\">\n\t\t\t\t\t\t<text class=\"qrcode-desc\">扫码验证校友身份</text>\n\t\t\t\t\t\t<text class=\"qrcode-tip\">二维码有效期30分钟，请勿外传</text>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\t\t\n\t\t<!-- 底部固定按钮 -->\n\t\t<view class=\"bottom-button\" @tap=\"toggleQRCode\">\n\t\t\t<view class=\"button-content\">\n\t\t\t\t<image src=\"/static/qr-code-line.svg\" class=\"qrcode-icon\"></image>\n\t\t\t\t<text class=\"button-text\">二维码</text>\n\t\t\t</view>\n\t\t</view>\n\t</view>\n</template>\n\n<script>\n\timport alumniCardPageJs from './alumniCardPage.js'\n\timport { ref, computed, onMounted } from 'vue';\n\t// import fuiQrcode from '@/components/firstui/fui-qrcode/fui-qrcode.vue'; // 使用easycom后，不再需要手动引入\n\t\n\texport default {\n\t\tcomponents: {\n\t\t\t// fuiQrcode // 使用easycom后，不再需要手动注册\n\t\t},\n\t\t...alumniCardPageJs,\n\t\tsetup() {\n\t\t\t// 导航栏高度\n\t\t\tconst navHeight = ref(44);\n\t\t\tconst statusBarHeight = ref(0);\n\t\t\t\n\t\t\t// 初始化导航栏\n\t\t\tconst navbarInit = (e) => {\n\t\t\t\tstatusBarHeight.value = e.statusBarHeight;\n\t\t\t\tnavHeight.value = e.height + e.statusBarHeight;\n\t\t\t}\n\t\t\t\n\t\t\treturn {\n\t\t\t\tnavHeight,\n\t\t\t\tstatusBarHeight,\n\t\t\t\tnavbarInit\n\t\t\t};\n\t\t},\n\t\tmethods: {\n\t\t\t...alumniCardPageJs.methods,\n\t\t\tonQRCodeReady(e) {\n\t\t\t\tconsole.log('QR Code ready:', e);\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style>\n\t@import './alumniCardPage.css';\n</style>\n","import MiniProgramPage from 'D:/Projects/XBuider/校友会/ruoyi-app-vue3/pages/alumniCardPage/alumniCardPage.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","ref"],"mappings":";;;AAAA,MAAe,mBAAA;AAAA,EACd,OAAO;AACN,WAAO;AAAA;AAAA,MAEN,eAAe;AAAA;AAAA,MACf,eAAe;AAAA;AAAA;AAAA,MAGf,UAAU;AAAA,QACT,MAAM;AAAA;AAAA,QACN,gBAAgB;AAAA;AAAA,QAChB,eAAe;AAAA;AAAA,QACf,SAAS;AAAA;AAAA,QACT,QAAQ;AAAA;AAAA,MACR;AAAA;AAAA,MAGD,aAAa;AAAA;AAAA,MACb,kBAAkB;AAAA;AAAA;AAAA,MAGlB,YAAY;AAAA,IACZ;AAAA,EACD;AAAA,EACD,SAAS;AAER,SAAK,eAAc;AAAA,EACnB;AAAA,EACD,SAAS;AAAA;AAAA;AAAA;AAAA,IAIR,SAAS;AACRA,oBAAAA,MAAI,aAAa;AAAA,QAChB,OAAO;AAAA,MACX,CAAI;AAAA,IACD;AAAA;AAAA;AAAA;AAAA,IAKD,iBAAiB;AAGhB,YAAM,YAAY,KAAK;AACvB,YAAM,aAAa,YAAY,KAAK,KAAK;AAIzC,YAAM,gBAAgB,UAAU,KAAK,SAAS,IAAI,IAAI,SAAS,IAAI,UAAU;AAE7E,WAAK,cAAc;AACnB,WAAK,mBAAmB;AAGxB,WAAK,sBAAqB;AAAA,IAC1B;AAAA;AAAA;AAAA;AAAA,IAKD,wBAAwB;AAEvB,UAAI,KAAK,iBAAiB;AACzB,qBAAa,KAAK,eAAe;AAAA,MACjC;AAED,YAAM,MAAM,KAAK;AACjB,YAAM,eAAe,KAAK,mBAAmB;AAG7C,UAAI,gBAAgB,GAAG;AACtB,aAAK,eAAc;AACnB;AAAA,MACA;AAGD,YAAM,eAAe,eAAgB,IAAI,KAAK;AAC9C,UAAI,eAAe,GAAG;AACrB,aAAK,kBAAkB,WAAW,MAAM;AACvCA,wBAAAA,MAAI,UAAU;AAAA,YACb,OAAO;AAAA,YACP,MAAM;AAAA,YACN,UAAU;AAAA,UAChB,CAAM;AAAA,QACD,GAAE,YAAY;AAAA,MACf;AAAA,IACD;AAAA;AAAA;AAAA;AAAA,IAKD,eAAe;AACd,UAAI,CAAC,KAAK,YAAY;AAErB,aAAK,eAAc;AAAA,MACnB;AACD,WAAK,aAAa,CAAC,KAAK;AAAA,IACxB;AAAA,EACD;AACF;ACqBC,MAAK,YAAU;AAAA,EACd,YAAY;AAAA;AAAA,EAEX;AAAA,EACD,GAAG;AAAA,EACH,QAAQ;AAEP,UAAM,YAAYC,kBAAI,EAAE;AACxB,UAAM,kBAAkBA,kBAAI,CAAC;AAG7B,UAAM,aAAa,CAAC,MAAM;AACzB,sBAAgB,QAAQ,EAAE;AAC1B,gBAAU,QAAQ,EAAE,SAAS,EAAE;AAAA,IAChC;AAEA,WAAO;AAAA,MACN;AAAA,MACA;AAAA,MACA;AAAA;EAED;AAAA,EACD,SAAS;AAAA,IACR,GAAG,iBAAiB;AAAA,IACpB,cAAc,GAAG;AAChBD,oBAAY,MAAA,MAAA,OAAA,kDAAA,kBAAkB,CAAC;AAAA,IAChC;AAAA,EACD;AACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACpJD,GAAG,WAAW,eAAe;"}