{"version":3,"file":"myOrganizationsPage.js","sources":["pages/myOrganizationsPage/myOrganizationsPage.js","pages/myOrganizationsPage/myOrganizationsPage.vue","../../../apps/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvbXlPcmdhbml6YXRpb25zUGFnZS9teU9yZ2FuaXphdGlvbnNQYWdlLnZ1ZQ"],"sourcesContent":["// myOrganizationsPage.js - API接口和模拟数据\r\n\r\n// 模拟数据 - 仅用于开发测试\r\nconst mockJoinedOrganizations = [\r\n  {\r\n    id: '1',\r\n    name: '重庆财经校友总会',\r\n    type: '校友总会',\r\n    logoUrl: '/static/images/org_logo_default.png',\r\n    qrCodeUrl: 'https://doc.firstui.cn'\r\n  },\r\n  {\r\n    id: '2',\r\n    name: '北京校友分会',\r\n    type: '地方分会',\r\n    logoUrl: '/static/images/org_logo_default.png',\r\n    qrCodeUrl: 'https://doc.firstui.cn'\r\n  },\r\n  {\r\n    id: '3',\r\n    name: '经济学院校友会',\r\n    type: '院系分会',\r\n    logoUrl: '/static/images/org_logo_default.png',\r\n    qrCodeUrl: 'https://doc.firstui.cn'\r\n  }\r\n];\r\n\r\nconst mockDiscoverableOrganizations = {\r\n  total: 20,\r\n  data: [\r\n    {\r\n      id: '4',\r\n      name: '上海校友分会',\r\n      type: '地方分会',\r\n      description: '覆盖上海地区的校友联络与活动组织',\r\n      logoUrl: '/static/images/org_logo_default.png',\r\n      status: 'joinable'\r\n    },\r\n    {\r\n      id: '5',\r\n      name: '深圳校友分会',\r\n      type: '地方分会',\r\n      description: '覆盖深圳地区的校友联络与活动组织',\r\n      logoUrl: '/static/images/org_logo_default.png',\r\n      status: 'pending'\r\n    },\r\n    {\r\n      id: '6',\r\n      name: '金融学院校友会',\r\n      type: '院系分会',\r\n      description: '金融学院毕业生校友交流平台',\r\n      logoUrl: '/static/images/org_logo_default.png',\r\n      status: 'joinable'\r\n    },\r\n    {\r\n      id: '7',\r\n      name: '会计学院校友会',\r\n      type: '院系分会',\r\n      description: '会计学院校友互助平台',\r\n      logoUrl: '/static/images/org_logo_default.png',\r\n      status: 'joinable'\r\n    },\r\n    {\r\n      id: '8',\r\n      name: '会计师校友分会',\r\n      type: '专业分会',\r\n      description: '从事会计行业校友的交流平台',\r\n      logoUrl: '/static/images/org_logo_default.png',\r\n      status: 'joinable'\r\n    }\r\n  ]\r\n};\r\n\r\n/**\r\n * 获取用户已加入的组织列表\r\n * @returns {Promise<Array>} 已加入的组织列表数组\r\n */\r\nexport const getMyJoinedOrganizations = () => {\r\n  return new Promise((resolve, reject) => {\r\n    // 实际开发中替换为真实接口调用\r\n    setTimeout(() => {\r\n      // 模拟网络请求\r\n      try {\r\n        // 模拟成功响应\r\n        resolve(mockJoinedOrganizations);\r\n      } catch (error) {\r\n        console.error('获取已加入组织列表失败:', error);\r\n        reject(error);\r\n      }\r\n    }, 500); // 模拟网络延迟\r\n  });\r\n};\r\n\r\n/**\r\n * 获取可发现的组织列表\r\n * @param {Object} params 查询参数\r\n * @param {number} params.page 页码\r\n * @param {number} params.limit 每页数量\r\n * @param {string} params.keyword 搜索关键词\r\n * @param {string} params.category 筛选类别\r\n * @returns {Promise<Object>} 返回带有total和data的对象\r\n */\r\nexport const getDiscoverableOrganizations = ({ page = 1, limit = 10, keyword = '', category = '' }) => {\r\n  return new Promise((resolve, reject) => {\r\n    // 实际开发中替换为真实接口调用\r\n    setTimeout(() => {\r\n      try {\r\n        // 模拟筛选和分页\r\n        let filteredData = [...mockDiscoverableOrganizations.data];\r\n        \r\n        // 关键词筛选\r\n        if (keyword) {\r\n          filteredData = filteredData.filter(org => \r\n            org.name.includes(keyword) || \r\n            org.type.includes(keyword) || \r\n            (org.description && org.description.includes(keyword))\r\n          );\r\n        }\r\n        \r\n        // 类别筛选\r\n        if (category) {\r\n          const categoryMap = {\r\n            'main': '校友总会',\r\n            'local': '地方分会',\r\n            'college': '院系分会',\r\n            'major': '专业分会'\r\n          };\r\n          filteredData = filteredData.filter(org => org.type === categoryMap[category]);\r\n        }\r\n        \r\n        // 分页处理\r\n        const startIdx = (page - 1) * limit;\r\n        const endIdx = page * limit;\r\n        const pageData = filteredData.slice(startIdx, endIdx);\r\n        \r\n        resolve({\r\n          total: filteredData.length,\r\n          data: pageData\r\n        });\r\n      } catch (error) {\r\n        console.error('获取可发现组织列表失败:', error);\r\n        reject(error);\r\n      }\r\n    }, 500); // 模拟网络延迟\r\n  });\r\n};\r\n\r\n/**\r\n * 申请加入组织\r\n * @param {string} organizationId 要加入的组织ID\r\n * @returns {Promise<Object>} 申请结果\r\n */\r\nexport const requestToJoinOrganization = (organizationId) => {\r\n  return new Promise((resolve, reject) => {\r\n    // 实际开发中替换为真实接口调用\r\n    setTimeout(() => {\r\n      try {\r\n        // 模拟成功响应\r\n        resolve({\r\n          success: true,\r\n          message: '申请已提交',\r\n          status: 'pending'\r\n        });\r\n      } catch (error) {\r\n        console.error('申请加入组织失败:', error);\r\n        reject(error);\r\n      }\r\n    }, 800); // 模拟网络延迟\r\n  });\r\n};\r\n\r\n/**\r\n * 保存二维码图片到相册\r\n * @param {string} url 图片URL或本地路径\r\n * @returns {Promise<boolean>} 是否保存成功\r\n */\r\nexport const saveImageToPhotosAlbum = async (url) => {\r\n  return new Promise(async (resolve, reject) => {\r\n    try {\r\n      // 获取授权\r\n      const settingRes = await uni.getSetting();\r\n      if (!settingRes.authSetting['scope.writePhotosAlbum']) {\r\n        await uni.authorize({ scope: 'scope.writePhotosAlbum' }).catch(err => {\r\n          uni.showModal({\r\n            title: '提示',\r\n            content: '需要您授权保存图片到相册',\r\n            success: (res) => {\r\n              if (res.confirm) {\r\n                uni.openSetting();\r\n              }\r\n            }\r\n          });\r\n          throw new Error('未授权保存图片');\r\n        });\r\n      }\r\n      \r\n      // 处理图片来源\r\n      let localPath = url;\r\n      if (url.startsWith('http')) {\r\n        uni.showLoading({ title: '下载图片中...' });\r\n        try {\r\n          const downloadRes = await uni.downloadFile({ url });\r\n          if (downloadRes.statusCode === 200) {\r\n            localPath = downloadRes.tempFilePath;\r\n          } else {\r\n            throw new Error('下载图片失败');\r\n          }\r\n        } finally {\r\n          uni.hideLoading();\r\n        }\r\n      }\r\n      \r\n      // 保存到相册\r\n      await uni.saveImageToPhotosAlbum({ filePath: localPath });\r\n      uni.showToast({\r\n        title: '保存成功',\r\n        icon: 'success'\r\n      });\r\n      resolve(true);\r\n    } catch (error) {\r\n      console.error('保存图片失败:', error);\r\n      uni.showToast({\r\n        title: '保存失败，请检查授权',\r\n        icon: 'none'\r\n      });\r\n      resolve(false);\r\n    }\r\n  });\r\n};\r\n","<template>\r\n\t<view class=\"page-container\">\r\n\t\t<!-- 自定义导航栏，参考校友卡页面实现 -->\r\n\t\t<view class=\"custom-nav-bar\" :style=\"{ height: navHeight + 'px' }\">\r\n\t\t\t<view class=\"nav-bar-content\" :style=\"{ paddingTop: statusBarHeight + 'px' }\">\r\n\t\t\t\t<view class=\"nav-back\" @click=\"goBack\">\r\n\t\t\t\t\t<text class=\"back-arrow\">←</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"nav-title\">我的组织</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t\r\n\t\t<!-- 内容区域，添加上边距与导航栏高度相同 -->\r\n\t\t<view class=\"content-area\" :style=\"{ paddingTop: navHeight + 'px' }\">\r\n\t\t\t<!-- 自定义Tab切换栏 -->\r\n\t\t\t<view class=\"custom-tabs\">\r\n\t\t\t\t<view \r\n\t\t\t\t\tv-for=\"(tab, index) in tabs\" \r\n\t\t\t\t\t:key=\"index\"\r\n\t\t\t\t\t:class=\"['custom-tab-item', currentTab === index ? 'custom-tab-active' : '']\"\r\n\t\t\t\t\t@click=\"onTabChange({index})\">\r\n\t\t\t\t\t<text>{{tab.text}}</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"custom-tab-line\" :style=\"{transform: `translateX(${currentTab * 100}%)`}\"></view>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<!-- Tab内容区域 -->\r\n\t\t\t<view class=\"tab-content\">\r\n\t\t\t\t<!-- Tab - 我的已加组织 -->\r\n\t\t\t\t<view v-if=\"currentTab === 0\">\r\n\t\t\t\t\t<!-- 已加入组织列表 -->\r\n\t\t\t\t\t<view v-if=\"joinedOrganizations.length > 0\" class=\"org-list\">\r\n\t\t\t\t\t\t<view class=\"org-card\">\r\n\t\t\t\t\t\t\t<view \r\n\t\t\t\t\t\t\t\tclass=\"org-item\" \r\n\t\t\t\t\t\t\t\tv-for=\"(org, index) in joinedOrganizations\" \r\n\t\t\t\t\t\t\t\t:key=\"org.id\">\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t<!-- 组织Logo -->\r\n\t\t\t\t\t\t\t\t<image \r\n\t\t\t\t\t\t\t\t\tclass=\"org-logo\" \r\n\t\t\t\t\t\t\t\t\t:src=\"org.logoUrl\" \r\n\t\t\t\t\t\t\t\t\tmode=\"aspectFill\"\r\n\t\t\t\t\t\t\t\t\t@error=\"handleLogoError(index, 'joined')\">\r\n\t\t\t\t\t\t\t\t</image>\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t<!-- 组织信息 -->\r\n\t\t\t\t\t\t\t\t<view class=\"org-info\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"org-name\">{{org.name}}</view>\r\n\t\t\t\t\t\t\t\t\t<view class=\"org-type\">{{org.type}}</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t<!-- 查看二维码按钮 -->\r\n\t\t\t\t\t\t\t\t<view class=\"view-qrcode\" @click.stop=\"showQrCode(org)\">\r\n\t\t\t\t\t\t\t\t\t<text>查看二维码</text>\r\n\t\t\t\t\t\t\t\t\t<text class=\"arrow-right\">→</text>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<!-- 加载中状态 -->\r\n\t\t\t\t\t<view v-else-if=\"loading\" class=\"loading-container\">\r\n\t\t\t\t\t\t<view class=\"custom-loading\">\r\n\t\t\t\t\t\t\t<text>加载中...</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<!-- 空状态 -->\r\n\t\t\t\t\t<view v-else class=\"empty-state\">\r\n\t\t\t\t\t\t<view class=\"empty-text\">您尚未加入任何组织，快去\"发现组织\"看看吧！</view>\r\n\t\t\t\t\t\t<view class=\"btn primary-btn empty-action\" @click=\"switchToDiscover\">去发现组织</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t\r\n\t\t\t\t<!-- Tab - 发现组织 -->\r\n\t\t\t\t<view v-else>\r\n\t\t\t\t\t<!-- 搜索栏 -->\r\n\t\t\t\t\t<view class=\"search-container\">\r\n\t\t\t\t\t\t<view class=\"custom-search-bar\">\r\n\t\t\t\t\t\t\t<input \r\n\t\t\t\t\t\t\t\ttype=\"text\" \r\n\t\t\t\t\t\t\t\tclass=\"search-input\" \r\n\t\t\t\t\t\t\t\t:value=\"searchText\" \r\n\t\t\t\t\t\t\t\tplaceholder=\"搜索组织名称或类型\" \r\n\t\t\t\t\t\t\t\tconfirm-type=\"search\"\r\n\t\t\t\t\t\t\t\t@confirm=\"onSearchConfirm\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<text v-if=\"searchText\" class=\"search-clear\" @click=\"onSearchClear\">×</text>\r\n\t\t\t\t\t\t\t<view class=\"search-btn\" @click=\"onSearchConfirm\">搜索</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<!-- 分类筛选条 -->\r\n\t\t\t\t\t<scroll-view scroll-x class=\"category-filter\" show-scrollbar=\"false\">\r\n\t\t\t\t\t\t<view \r\n\t\t\t\t\t\t\tv-for=\"(item, index) in categories\" \r\n\t\t\t\t\t\t\t:key=\"index\" \r\n\t\t\t\t\t\t\t:class=\"['filter-item', selectedCategory === item.value ? 'active' : '']\"\r\n\t\t\t\t\t\t\t@click=\"selectCategory(item.value)\">\r\n\t\t\t\t\t\t\t{{item.label}}\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</scroll-view>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<!-- 可发现组织列表 -->\r\n\t\t\t\t\t<view v-if=\"discoverableOrganizations.length > 0\" class=\"org-list\">\r\n\t\t\t\t\t\t<view class=\"org-card\">\r\n\t\t\t\t\t\t\t<view \r\n\t\t\t\t\t\t\t\tclass=\"org-item\" \r\n\t\t\t\t\t\t\t\tv-for=\"(org, index) in discoverableOrganizations\" \r\n\t\t\t\t\t\t\t\t:key=\"org.id\">\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t<!-- 组织Logo -->\r\n\t\t\t\t\t\t\t\t<image \r\n\t\t\t\t\t\t\t\t\tclass=\"org-logo\" \r\n\t\t\t\t\t\t\t\t\t:src=\"org.logoUrl\" \r\n\t\t\t\t\t\t\t\t\tmode=\"aspectFill\"\r\n\t\t\t\t\t\t\t\t\t@error=\"handleLogoError(index, 'discover')\">\r\n\t\t\t\t\t\t\t\t</image>\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t<!-- 组织信息 -->\r\n\t\t\t\t\t\t\t\t<view class=\"org-info\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"org-name\">{{org.name}}</view>\r\n\t\t\t\t\t\t\t\t\t<view class=\"org-desc\">{{org.description || org.type}}</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t<!-- 根据状态显示不同按钮 -->\r\n\t\t\t\t\t\t\t\t<view \r\n\t\t\t\t\t\t\t\t\t:class=\"['btn', getButtonClass(org)]\"\r\n\t\t\t\t\t\t\t\t\t@click.stop=\"org.status === 'joinable' && joinOrganization(org)\">\r\n\t\t\t\t\t\t\t\t\t{{getButtonText(org)}}\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<!-- 加载更多/无更多数据 -->\r\n\t\t\t\t\t\t<view v-if=\"!loadingMore && hasMoreData\" class=\"load-more-area\" @click=\"loadMoreDiscoverable\">\r\n\t\t\t\t\t\t\t<text class=\"load-more-text\">点击加载更多</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view v-else-if=\"loadingMore\" class=\"load-more-area\">\r\n\t\t\t\t\t\t\t<text class=\"load-more-text\">加载中...</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view v-else-if=\"!hasMoreData && discoverableOrganizations.length > 0\" class=\"load-more-area\">\r\n\t\t\t\t\t\t\t<text class=\"load-more-text\">没有更多了</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<!-- 加载中状态 -->\r\n\t\t\t\t\t<view v-else-if=\"loading\" class=\"loading-container\">\r\n\t\t\t\t\t\t<view class=\"custom-loading\">\r\n\t\t\t\t\t\t\t<text>加载中...</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<!-- 空状态 -->\r\n\t\t\t\t\t<view v-else class=\"empty-state\">\r\n\t\t\t\t\t\t<view class=\"empty-text\">\r\n\t\t\t\t\t\t\t{{searchText || selectedCategory ? '未找到相关组织，请尝试更换关键词或筛选条件' : '暂无可加入的校友组织'}}\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view v-if=\"searchText || selectedCategory\" class=\"btn secondary-btn empty-action\" @click=\"resetFilters\">\r\n\t\t\t\t\t\t\t重置筛选\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t\r\n\t\t<!-- 社群二维码弹窗 - 仿照校友卡页面实现 -->\r\n\t\t<view v-if=\"showQrModal\" class=\"modal-mask\" @click=\"handleCloseQrModal\">\r\n\t\t\t<view class=\"qrcode-modal\" @click.stop>\r\n\t\t\t\t<view class=\"qrcode-title\">{{currentDisplayOrg.name}}</view>\r\n\t\t\t\t<view class=\"qrcode-subtitle\">社群二维码</view>\r\n\t\t\t\t\r\n\t\t\t\t<view class=\"qrcode-container\">\r\n\t\t\t\t\t<!-- 二维码图片 -->\r\n\t\t\t\t\t<view v-if=\"qrCodeLoading\" class=\"qrcode-loading\">\r\n\t\t\t\t\t\t<text class=\"loading-text\">二维码加载中...</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<image \r\n\t\t\t\t\t\tv-else\r\n\t\t\t\t\t\t:src=\"currentDisplayOrg.qrCodeUrl\" \r\n\t\t\t\t\t\tmode=\"aspectFit\"\r\n\t\t\t\t\t\tclass=\"qrcode-image\"\r\n\t\t\t\t\t\t@error=\"handleQrCodeError\">\r\n\t\t\t\t\t</image>\r\n\t\t\t\t</view>\r\n\t\t\t\t\r\n\t\t\t\t<view class=\"qrcode-footer\">\r\n\t\t\t\t\t<text class=\"qrcode-desc\">扫码加入社群</text>\r\n\t\t\t\t\t<text class=\"qrcode-tip\">请勿将二维码分享给无关人员</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t\r\n\t\t\t\t<view class=\"qrcode-buttons\">\r\n\t\t\t\t\t<view class=\"qrcode-btn save-btn\" @click=\"saveQrToAlbum\">保存到相册</view>\r\n\t\t\t\t\t<view class=\"qrcode-btn close-btn\" @click=\"handleCloseQrModal\">关闭</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\nimport { \r\n\tgetMyJoinedOrganizations, \r\n\tgetDiscoverableOrganizations, \r\n\trequestToJoinOrganization, \r\n\tsaveImageToPhotosAlbum \r\n} from './myOrganizationsPage.js'\r\n\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\t// 导航栏相关\r\n\t\t\tstatusBarHeight: 20, // 默认状态栏高度\r\n\t\t\tnavHeight: 64,      // 默认导航栏高度（状态栏 + 导航内容）\r\n\t\t\t\r\n\t\t\t// Tab配置\r\n\t\t\ttabs: [\r\n\t\t\t\t{ text: '我的已加组织' },\r\n\t\t\t\t{ text: '发现组织' }\r\n\t\t\t],\r\n\t\t\tcurrentTab: 0,\r\n\t\t\t\r\n\t\t\t// 状态标志\r\n\t\t\tloading: false,\r\n\t\t\trefreshing: false,\r\n\t\t\tloadingMore: false,\r\n\t\t\tqrCodeLoading: true,\r\n\t\t\t\r\n\t\t\t// 已加入组织数据\r\n\t\t\tjoinedOrganizations: [],\r\n\t\t\t\r\n\t\t\t// 可发现组织数据\r\n\t\t\tdiscoverableOrganizations: [],\r\n\t\t\tsearchText: '',\r\n\t\t\tselectedCategory: '',\r\n\t\t\tpage: 1,\r\n\t\t\tlimit: 10,\r\n\t\t\thasMoreData: true,\r\n\t\t\t\r\n\t\t\t// 分类筛选\r\n\t\t\tcategories: [\r\n\t\t\t\t{ label: '全部', value: '' },\r\n\t\t\t\t{ label: '校友总会', value: 'main' },\r\n\t\t\t\t{ label: '地方分会', value: 'local' },\r\n\t\t\t\t{ label: '院系分会', value: 'college' },\r\n\t\t\t\t{ label: '专业分会', value: 'major' }\r\n\t\t\t],\r\n\t\t\t\r\n\t\t\t// 二维码弹窗\r\n\t\t\tshowQrModal: false,\r\n\t\t\tcurrentDisplayOrg: {}\r\n\t\t}\r\n\t},\r\n\t// 生命周期钩子\r\n\tonLoad() {\r\n\t\t// 获取系统状态栏高度\r\n\t\tthis.getStatusBarHeight();\r\n\t\t// 初始化页面，加载数据\r\n\t\tthis.loadData(true);\r\n\t},\r\n\tonShow() {\r\n\t\t// 若需要每次显示都刷新数据，可在此处调用loadData\r\n\t},\r\n\tonPullDownRefresh() {\r\n\t\tthis.refreshing = true;\r\n\t\tthis.loadData(false);\r\n\t\tsetTimeout(() => {\r\n\t\t\tthis.refreshing = false;\r\n\t\t\tuni.stopPullDownRefresh();\r\n\t\t}, 1000);\r\n\t},\r\n\tonReachBottom() {\r\n\t\tif (this.currentTab === 1 && this.hasMoreData && !this.loadingMore) {\r\n\t\t\tthis.loadMoreDiscoverable();\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\t/**\r\n\t\t * 获取系统状态栏高度\r\n\t\t */\r\n\t\tgetStatusBarHeight() {\r\n\t\t\ttry {\r\n\t\t\t\tconst systemInfo = uni.getSystemInfoSync();\r\n\t\t\t\tthis.statusBarHeight = systemInfo.statusBarHeight || 20;\r\n\t\t\t\tthis.navHeight = this.statusBarHeight + 44; // 44 是导航内容高度\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.error('获取系统信息失败', e);\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * 加载页面数据\r\n\t\t * @param {Boolean} showLoading 是否显示加载中提示\r\n\t\t */\r\n\t\tasync loadData(showLoading = true) {\r\n\t\t\tif (showLoading) {\r\n\t\t\t\tthis.loading = true;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (this.currentTab === 0) {\r\n\t\t\t\tawait this.loadJoinedOrganizations();\r\n\t\t\t} else {\r\n\t\t\t\tthis.resetDiscoverableParams();\r\n\t\t\t\tawait this.loadDiscoverableOrganizations();\r\n\t\t\t\t\r\n\t\t\t\t// 预加载我的组织数据\r\n\t\t\t\tif (this.joinedOrganizations.length === 0) {\r\n\t\t\t\t\tthis.loadJoinedOrganizations(false);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (showLoading) {\r\n\t\t\t\tthis.loading = false;\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * 加载已加入组织列表\r\n\t\t * @param {Boolean} showToast 是否显示错误提示\r\n\t\t */\r\n\t\tasync loadJoinedOrganizations(showToast = true) {\r\n\t\t\ttry {\r\n\t\t\t\tconst result = await getMyJoinedOrganizations();\r\n\t\t\t\tthis.joinedOrganizations = result || [];\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.error('加载已加入组织失败:', error);\r\n\t\t\t\tif (showToast) {\r\n\t\t\t\t\tthis.showToast('获取组织列表失败');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * 加载可发现组织列表\r\n\t\t */\r\n\t\tasync loadDiscoverableOrganizations() {\r\n\t\t\ttry {\r\n\t\t\t\tconst result = await getDiscoverableOrganizations({\r\n\t\t\t\t\tpage: this.page,\r\n\t\t\t\t\tlimit: this.limit,\r\n\t\t\t\t\tkeyword: this.searchText,\r\n\t\t\t\t\tcategory: this.selectedCategory\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tif (this.page === 1) {\r\n\t\t\t\t\tthis.discoverableOrganizations = result.data || [];\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.discoverableOrganizations = [\r\n\t\t\t\t\t\t...this.discoverableOrganizations, \r\n\t\t\t\t\t\t...(result.data || [])\r\n\t\t\t\t\t];\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// 判断是否还有更多数据\r\n\t\t\t\tthis.hasMoreData = this.discoverableOrganizations.length < result.total;\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.error('加载可发现组织列表失败:', error);\r\n\t\t\t\tthis.showToast('获取组织列表失败');\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * 加载更多可发现组织\r\n\t\t */\r\n\t\tasync loadMoreDiscoverable() {\r\n\t\t\tif (this.loadingMore || !this.hasMoreData) return;\r\n\t\t\t\r\n\t\t\tthis.loadingMore = true;\r\n\t\t\tthis.page++;\r\n\t\t\tawait this.loadDiscoverableOrganizations();\r\n\t\t\tthis.loadingMore = false;\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * 重置发现组织参数\r\n\t\t */\r\n\t\tresetDiscoverableParams() {\r\n\t\t\tthis.page = 1;\r\n\t\t\tthis.hasMoreData = true;\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * 重置所有筛选条件\r\n\t\t */\r\n\t\tresetFilters() {\r\n\t\t\tthis.searchText = '';\r\n\t\t\tthis.selectedCategory = '';\r\n\t\t\tthis.resetDiscoverableParams();\r\n\t\t\tthis.loadDiscoverableOrganizations();\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * Tab切换处理函数\r\n\t\t */\r\n\t\tonTabChange(e) {\r\n\t\t\tif (this.currentTab === e.index) return;\r\n\t\t\t\r\n\t\t\tthis.currentTab = e.index;\r\n\t\t\tthis.loadData(true);\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * 搜索处理函数\r\n\t\t */\r\n\t\tonSearchConfirm(e) {\r\n\t\t\tconst value = typeof e.detail === 'object' ? e.detail.value : this.searchText;\r\n\t\t\tif (this.searchText === value) return;\r\n\t\t\t\r\n\t\t\tthis.searchText = value;\r\n\t\t\tthis.resetDiscoverableParams();\r\n\t\t\tthis.loadDiscoverableOrganizations();\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * 清空搜索关键词\r\n\t\t */\r\n\t\tonSearchClear() {\r\n\t\t\tif (!this.searchText) return;\r\n\t\t\t\r\n\t\t\tthis.searchText = '';\r\n\t\t\tthis.resetDiscoverableParams();\r\n\t\t\tthis.loadDiscoverableOrganizations();\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * 选择分类\r\n\t\t */\r\n\t\tselectCategory(category) {\r\n\t\t\tif (this.selectedCategory === category) return;\r\n\t\t\t\r\n\t\t\tthis.selectedCategory = category;\r\n\t\t\tthis.resetDiscoverableParams();\r\n\t\t\tthis.loadDiscoverableOrganizations();\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * 显示二维码\r\n\t\t */\r\n\t\tshowQrCode(org) {\r\n\t\t\tthis.qrCodeLoading = true;\r\n\t\t\tthis.currentDisplayOrg = org;\r\n\t\t\tthis.showQrModal = true;\r\n\t\t\t\r\n\t\t\t// 模拟二维码加载\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tthis.qrCodeLoading = false;\r\n\t\t\t}, 500);\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * 处理二维码图片加载错误\r\n\t\t */\r\n\t\thandleQrCodeError() {\r\n\t\t\tthis.showToast('二维码加载失败');\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * 关闭二维码弹窗\r\n\t\t */\r\n\t\thandleCloseQrModal() {\r\n\t\t\tthis.showQrModal = false;\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tthis.currentDisplayOrg = {};\r\n\t\t\t}, 300);\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * 保存二维码到相册\r\n\t\t */\r\n\t\tasync saveQrToAlbum() {\r\n\t\t\tif (!this.currentDisplayOrg || !this.currentDisplayOrg.qrCodeUrl) {\r\n\t\t\t\tthis.showToast('二维码获取失败');\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tconst success = await saveImageToPhotosAlbum(this.currentDisplayOrg.qrCodeUrl);\r\n\t\t\tif (success) {\r\n\t\t\t\t// 保存成功，自动关闭弹窗\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.handleCloseQrModal();\r\n\t\t\t\t}, 1500);\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * 申请加入组织\r\n\t\t */\r\n\t\tasync joinOrganization(org) {\r\n\t\t\tif (!org || org.status !== 'joinable') return;\r\n\t\t\t\r\n\t\t\tuni.showLoading({ title: '申请中...' });\r\n\t\t\t\r\n\t\t\ttry {\r\n\t\t\t\tconst result = await requestToJoinOrganization(org.id);\r\n\t\t\t\t\r\n\t\t\t\tif (result.success) {\r\n\t\t\t\t\t// 更新组织状态\r\n\t\t\t\t\tconst index = this.discoverableOrganizations.findIndex(item => item.id === org.id);\r\n\t\t\t\t\tif (index !== -1) {\r\n\t\t\t\t\t\tthis.$set(this.discoverableOrganizations[index], 'status', 'pending');\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.showToast('申请已提交', 'success');\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.showToast(result.message || '申请失败');\r\n\t\t\t\t}\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.error('申请加入组织失败:', error);\r\n\t\t\t\tthis.showToast('申请失败，请稍后再试');\r\n\t\t\t} finally {\r\n\t\t\t\tuni.hideLoading();\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * 根据组织状态获取按钮文本\r\n\t\t */\r\n\t\tgetButtonText(org) {\r\n\t\t\tswitch(org.status) {\r\n\t\t\t\tcase 'pending': return '审核中';\r\n\t\t\t\tcase 'rejected': return '已拒绝';\r\n\t\t\t\tcase 'joined': return '已加入';\r\n\t\t\t\tdefault: return '申请加入';\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * 根据组织状态获取按钮样式\r\n\t\t */\r\n\t\tgetButtonClass(org) {\r\n\t\t\tswitch(org.status) {\r\n\t\t\t\tcase 'pending': return 'disabled-btn';\r\n\t\t\t\tcase 'rejected': return 'disabled-btn';\r\n\t\t\t\tcase 'joined': return 'secondary-btn';\r\n\t\t\t\tdefault: return 'primary-btn';\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * 处理组织Logo加载错误\r\n\t\t */\r\n\t\thandleLogoError(index, type) {\r\n\t\t\tconst defaultLogo = '/static/images/org_logo_default.png';\r\n\t\t\t\r\n\t\t\tif (type === 'joined' && this.joinedOrganizations[index]) {\r\n\t\t\t\tthis.$set(this.joinedOrganizations[index], 'logoUrl', defaultLogo);\r\n\t\t\t} else if (type === 'discover' && this.discoverableOrganizations[index]) {\r\n\t\t\t\tthis.$set(this.discoverableOrganizations[index], 'logoUrl', defaultLogo);\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * 切换到发现组织Tab\r\n\t\t */\r\n\t\tswitchToDiscover() {\r\n\t\t\tthis.currentTab = 1;\r\n\t\t\tthis.loadData(true);\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * 显示Toast消息\r\n\t\t */\r\n\t\tshowToast(title, icon = 'none') {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle,\r\n\t\t\t\ticon\r\n\t\t\t});\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * 返回上一页\r\n\t\t */\r\n\t\tgoBack() {\r\n\t\t\tuni.navigateBack();\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n\r\n<style>\r\n@import url(\"./myOrganizationsPage.css\");\r\n\r\n/* 自定义导航栏样式 */\r\n.custom-nav-bar {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  background-color: #004299;\r\n  z-index: 999;\r\n}\r\n\r\n.nav-bar-content {\r\n  display: flex;\r\n  align-items: center;\r\n  height: 44px;\r\n  position: relative;\r\n}\r\n\r\n.nav-back {\r\n  width: 60rpx;\r\n  height: 44px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  position: absolute;\r\n  left: 12px;\r\n  z-index: 2;\r\n}\r\n\r\n.back-arrow {\r\n  font-size: 40rpx;\r\n  font-weight: bold;\r\n  color: #FFFFFF;\r\n}\r\n\r\n.nav-title {\r\n  position: absolute;\r\n  left: 0;\r\n  right: 0;\r\n  text-align: center;\r\n  font-size: 18px;\r\n  font-weight: 500;\r\n  color: #FFFFFF;\r\n  line-height: 44px;\r\n}\r\n\r\n/* 内容区域调整 */\r\n.content-area {\r\n  min-height: 100vh;\r\n  box-sizing: border-box;\r\n}\r\n\r\n/* 自定义Tab样式 */\r\n.custom-tabs {\r\n  display: flex;\r\n  position: relative;\r\n  background-color: #FFFFFF;\r\n  height: 90rpx;\r\n  border-bottom: 1px solid #EEEEEE;\r\n}\r\n\r\n.custom-tab-item {\r\n  flex: 1;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  font-size: 30rpx;\r\n  color: #666666;\r\n  position: relative;\r\n  transition: all 0.3s;\r\n}\r\n\r\n.custom-tab-active {\r\n  color: #004299;\r\n  font-weight: 600;\r\n}\r\n\r\n.custom-tab-line {\r\n  position: absolute;\r\n  bottom: 0;\r\n  left: 0;\r\n  width: 50%;\r\n  height: 4rpx;\r\n  background-color: #004299;\r\n  transition: transform 0.3s;\r\n}\r\n\r\n/* 二维码样式升级 - 参考校友卡页面 */\r\n.modal-mask {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background-color: rgba(0, 0, 0, 0.6);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  z-index: 999;\r\n}\r\n\r\n.qrcode-modal {\r\n  background-color: #FFFFFF;\r\n  border-radius: 16rpx;\r\n  width: 600rpx;\r\n  padding: 40rpx 30rpx;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  box-shadow: 0 6rpx 30rpx rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.qrcode-title {\r\n  font-size: 36rpx;\r\n  color: #333333;\r\n  font-weight: 600;\r\n  text-align: center;\r\n}\r\n\r\n.qrcode-subtitle {\r\n  font-size: 28rpx;\r\n  color: #666666;\r\n  margin-top: 4rpx;\r\n  margin-bottom: 30rpx;\r\n}\r\n\r\n.qrcode-container {\r\n  width: 440rpx;\r\n  height: 440rpx;\r\n  margin: 20rpx 0 30rpx;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  background-color: #F6F6F6;\r\n  border-radius: 8rpx;\r\n  overflow: hidden;\r\n  box-shadow: 0 4rpx 10rpx rgba(0, 0, 0, 0.05);\r\n}\r\n\r\n.qrcode-image {\r\n  width: 100%;\r\n  height: 100%;\r\n  background-color: #FFFFFF;\r\n}\r\n\r\n.qrcode-loading {\r\n  width: 100%;\r\n  height: 100%;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  background-color: #F5F5F5;\r\n}\r\n\r\n.loading-text {\r\n  color: #666666;\r\n  font-size: 28rpx;\r\n}\r\n\r\n.qrcode-footer {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  margin-bottom: 30rpx;\r\n}\r\n\r\n.qrcode-desc {\r\n  font-size: 30rpx;\r\n  color: #333333;\r\n  font-weight: 500;\r\n  margin-bottom: 10rpx;\r\n}\r\n\r\n.qrcode-tip {\r\n  font-size: 24rpx;\r\n  color: #999999;\r\n}\r\n\r\n.qrcode-buttons {\r\n  display: flex;\r\n  width: 100%;\r\n  justify-content: space-between;\r\n  margin-top: 10rpx;\r\n}\r\n\r\n.qrcode-btn {\r\n  flex: 1;\r\n  height: 80rpx;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  border-radius: 8rpx;\r\n  font-size: 30rpx;\r\n}\r\n\r\n.save-btn {\r\n  background-color: #004299;\r\n  color: #FFFFFF;\r\n  margin-right: 20rpx;\r\n}\r\n\r\n.close-btn {\r\n  background-color: #EEEEEE;\r\n  color: #333333;\r\n  margin-left: 20rpx;\r\n}\r\n</style>\r\n","import MiniProgramPage from 'D:/code/cfecer/xiaoyouhui-xiaochengxu/pages/myOrganizationsPage/myOrganizationsPage.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni"],"mappings":";;AAGA,MAAM,0BAA0B;AAAA,EAC9B;AAAA,IACE,IAAI;AAAA,IACJ,MAAM;AAAA,IACN,MAAM;AAAA,IACN,SAAS;AAAA,IACT,WAAW;AAAA,EACZ;AAAA,EACD;AAAA,IACE,IAAI;AAAA,IACJ,MAAM;AAAA,IACN,MAAM;AAAA,IACN,SAAS;AAAA,IACT,WAAW;AAAA,EACZ;AAAA,EACD;AAAA,IACE,IAAI;AAAA,IACJ,MAAM;AAAA,IACN,MAAM;AAAA,IACN,SAAS;AAAA,IACT,WAAW;AAAA,EACZ;AACH;AAEA,MAAM,gCAAgC;AAAA,EACpC,OAAO;AAAA,EACP,MAAM;AAAA,IACJ;AAAA,MACE,IAAI;AAAA,MACJ,MAAM;AAAA,MACN,MAAM;AAAA,MACN,aAAa;AAAA,MACb,SAAS;AAAA,MACT,QAAQ;AAAA,IACT;AAAA,IACD;AAAA,MACE,IAAI;AAAA,MACJ,MAAM;AAAA,MACN,MAAM;AAAA,MACN,aAAa;AAAA,MACb,SAAS;AAAA,MACT,QAAQ;AAAA,IACT;AAAA,IACD;AAAA,MACE,IAAI;AAAA,MACJ,MAAM;AAAA,MACN,MAAM;AAAA,MACN,aAAa;AAAA,MACb,SAAS;AAAA,MACT,QAAQ;AAAA,IACT;AAAA,IACD;AAAA,MACE,IAAI;AAAA,MACJ,MAAM;AAAA,MACN,MAAM;AAAA,MACN,aAAa;AAAA,MACb,SAAS;AAAA,MACT,QAAQ;AAAA,IACT;AAAA,IACD;AAAA,MACE,IAAI;AAAA,MACJ,MAAM;AAAA,MACN,MAAM;AAAA,MACN,aAAa;AAAA,MACb,SAAS;AAAA,MACT,QAAQ;AAAA,IACT;AAAA,EACF;AACH;AAMO,MAAM,2BAA2B,MAAM;AAC5C,SAAO,IAAI,QAAQ,CAAC,SAAS,WAAW;AAEtC,eAAW,MAAM;AAEf,UAAI;AAEF,gBAAQ,uBAAuB;AAAA,MAChC,SAAQ,OAAO;AACdA,sBAAA,MAAA,MAAA,SAAA,0DAAc,gBAAgB,KAAK;AACnC,eAAO,KAAK;AAAA,MACb;AAAA,IACF,GAAE,GAAG;AAAA,EACV,CAAG;AACH;AAWO,MAAM,+BAA+B,CAAC,EAAE,OAAO,GAAG,QAAQ,IAAI,UAAU,IAAI,WAAW,SAAS;AACrG,SAAO,IAAI,QAAQ,CAAC,SAAS,WAAW;AAEtC,eAAW,MAAM;AACf,UAAI;AAEF,YAAI,eAAe,CAAC,GAAG,8BAA8B,IAAI;AAGzD,YAAI,SAAS;AACX,yBAAe,aAAa;AAAA,YAAO,SACjC,IAAI,KAAK,SAAS,OAAO,KACzB,IAAI,KAAK,SAAS,OAAO,KACxB,IAAI,eAAe,IAAI,YAAY,SAAS,OAAO;AAAA,UAChE;AAAA,QACS;AAGD,YAAI,UAAU;AACZ,gBAAM,cAAc;AAAA,YAClB,QAAQ;AAAA,YACR,SAAS;AAAA,YACT,WAAW;AAAA,YACX,SAAS;AAAA,UACrB;AACU,yBAAe,aAAa,OAAO,SAAO,IAAI,SAAS,YAAY,QAAQ,CAAC;AAAA,QAC7E;AAGD,cAAM,YAAY,OAAO,KAAK;AAC9B,cAAM,SAAS,OAAO;AACtB,cAAM,WAAW,aAAa,MAAM,UAAU,MAAM;AAEpD,gBAAQ;AAAA,UACN,OAAO,aAAa;AAAA,UACpB,MAAM;AAAA,QAChB,CAAS;AAAA,MACF,SAAQ,OAAO;AACdA,sBAAA,MAAA,MAAA,SAAA,2DAAc,gBAAgB,KAAK;AACnC,eAAO,KAAK;AAAA,MACb;AAAA,IACF,GAAE,GAAG;AAAA,EACV,CAAG;AACH;AAOO,MAAM,4BAA4B,CAAC,mBAAmB;AAC3D,SAAO,IAAI,QAAQ,CAAC,SAAS,WAAW;AAEtC,eAAW,MAAM;AACf,UAAI;AAEF,gBAAQ;AAAA,UACN,SAAS;AAAA,UACT,SAAS;AAAA,UACT,QAAQ;AAAA,QAClB,CAAS;AAAA,MACF,SAAQ,OAAO;AACdA,sBAAA,MAAA,MAAA,SAAA,2DAAc,aAAa,KAAK;AAChC,eAAO,KAAK;AAAA,MACb;AAAA,IACF,GAAE,GAAG;AAAA,EACV,CAAG;AACH;AAOO,MAAM,yBAAyB,OAAO,QAAQ;AACnD,SAAO,IAAI,QAAQ,OAAO,SAAS,WAAW;AAC5C,QAAI;AAEF,YAAM,aAAa,MAAMA,oBAAI;AAC7B,UAAI,CAAC,WAAW,YAAY,wBAAwB,GAAG;AACrD,cAAMA,cAAAA,MAAI,UAAU,EAAE,OAAO,0BAA0B,EAAE,MAAM,SAAO;AACpEA,wBAAAA,MAAI,UAAU;AAAA,YACZ,OAAO;AAAA,YACP,SAAS;AAAA,YACT,SAAS,CAAC,QAAQ;AAChB,kBAAI,IAAI,SAAS;AACfA,8BAAG,MAAC,YAAW;AAAA,cAChB;AAAA,YACF;AAAA,UACb,CAAW;AACD,gBAAM,IAAI,MAAM,SAAS;AAAA,QACnC,CAAS;AAAA,MACF;AAGD,UAAI,YAAY;AAChB,UAAI,IAAI,WAAW,MAAM,GAAG;AAC1BA,sBAAAA,MAAI,YAAY,EAAE,OAAO,WAAY,CAAA;AACrC,YAAI;AACF,gBAAM,cAAc,MAAMA,cAAG,MAAC,aAAa,EAAE,IAAK,CAAA;AAClD,cAAI,YAAY,eAAe,KAAK;AAClC,wBAAY,YAAY;AAAA,UACpC,OAAiB;AACL,kBAAM,IAAI,MAAM,QAAQ;AAAA,UACzB;AAAA,QACX,UAAkB;AACRA,wBAAG,MAAC,YAAW;AAAA,QAChB;AAAA,MACF;AAGD,YAAMA,cAAG,MAAC,uBAAuB,EAAE,UAAU,UAAW,CAAA;AACxDA,oBAAAA,MAAI,UAAU;AAAA,QACZ,OAAO;AAAA,QACP,MAAM;AAAA,MACd,CAAO;AACD,cAAQ,IAAI;AAAA,IACb,SAAQ,OAAO;AACdA,oGAAc,WAAW,KAAK;AAC9BA,oBAAAA,MAAI,UAAU;AAAA,QACZ,OAAO;AAAA,QACP,MAAM;AAAA,MACd,CAAO;AACD,cAAQ,KAAK;AAAA,IACd;AAAA,EACL,CAAG;AACH;ACnBA,MAAK,YAAU;AAAA,EACd,OAAO;AACN,WAAO;AAAA;AAAA,MAEN,iBAAiB;AAAA;AAAA,MACjB,WAAW;AAAA;AAAA;AAAA,MAGX,MAAM;AAAA,QACL,EAAE,MAAM,SAAU;AAAA,QAClB,EAAE,MAAM,OAAO;AAAA,MACf;AAAA,MACD,YAAY;AAAA;AAAA,MAGZ,SAAS;AAAA,MACT,YAAY;AAAA,MACZ,aAAa;AAAA,MACb,eAAe;AAAA;AAAA,MAGf,qBAAqB,CAAE;AAAA;AAAA,MAGvB,2BAA2B,CAAE;AAAA,MAC7B,YAAY;AAAA,MACZ,kBAAkB;AAAA,MAClB,MAAM;AAAA,MACN,OAAO;AAAA,MACP,aAAa;AAAA;AAAA,MAGb,YAAY;AAAA,QACX,EAAE,OAAO,MAAM,OAAO,GAAI;AAAA,QAC1B,EAAE,OAAO,QAAQ,OAAO,OAAQ;AAAA,QAChC,EAAE,OAAO,QAAQ,OAAO,QAAS;AAAA,QACjC,EAAE,OAAO,QAAQ,OAAO,UAAW;AAAA,QACnC,EAAE,OAAO,QAAQ,OAAO,QAAQ;AAAA,MAChC;AAAA;AAAA,MAGD,aAAa;AAAA,MACb,mBAAmB,CAAC;AAAA,IACrB;AAAA,EACA;AAAA;AAAA,EAED,SAAS;AAER,SAAK,mBAAkB;AAEvB,SAAK,SAAS,IAAI;AAAA,EAClB;AAAA,EACD,SAAS;AAAA,EAER;AAAA,EACD,oBAAoB;AACnB,SAAK,aAAa;AAClB,SAAK,SAAS,KAAK;AACnB,eAAW,MAAM;AAChB,WAAK,aAAa;AAClBA,oBAAG,MAAC,oBAAmB;AAAA,IACvB,GAAE,GAAI;AAAA,EACP;AAAA,EACD,gBAAgB;AACf,QAAI,KAAK,eAAe,KAAK,KAAK,eAAe,CAAC,KAAK,aAAa;AACnE,WAAK,qBAAoB;AAAA,IAC1B;AAAA,EACA;AAAA,EACD,SAAS;AAAA;AAAA;AAAA;AAAA,IAIR,qBAAqB;AACpB,UAAI;AACH,cAAM,aAAaA,oBAAI;AACvB,aAAK,kBAAkB,WAAW,mBAAmB;AACrD,aAAK,YAAY,KAAK,kBAAkB;AAAA,MACzC,SAAS,GAAG;AACXA,uGAAc,YAAY,CAAC;AAAA,MAC5B;AAAA,IACA;AAAA;AAAA;AAAA;AAAA;AAAA,IAMD,MAAM,SAAS,cAAc,MAAM;AAClC,UAAI,aAAa;AAChB,aAAK,UAAU;AAAA,MAChB;AAEA,UAAI,KAAK,eAAe,GAAG;AAC1B,cAAM,KAAK;aACL;AACN,aAAK,wBAAuB;AAC5B,cAAM,KAAK;AAGX,YAAI,KAAK,oBAAoB,WAAW,GAAG;AAC1C,eAAK,wBAAwB,KAAK;AAAA,QACnC;AAAA,MACD;AAEA,UAAI,aAAa;AAChB,aAAK,UAAU;AAAA,MAChB;AAAA,IACA;AAAA;AAAA;AAAA;AAAA;AAAA,IAMD,MAAM,wBAAwB,YAAY,MAAM;AAC/C,UAAI;AACH,cAAM,SAAS,MAAM;AACrB,aAAK,sBAAsB,UAAU;MACpC,SAAO,OAAO;AACfA,sBAAc,MAAA,MAAA,SAAA,4DAAA,cAAc,KAAK;AACjC,YAAI,WAAW;AACd,eAAK,UAAU,UAAU;AAAA,QAC1B;AAAA,MACD;AAAA,IACA;AAAA;AAAA;AAAA;AAAA,IAKD,MAAM,gCAAgC;AACrC,UAAI;AACH,cAAM,SAAS,MAAM,6BAA6B;AAAA,UACjD,MAAM,KAAK;AAAA,UACX,OAAO,KAAK;AAAA,UACZ,SAAS,KAAK;AAAA,UACd,UAAU,KAAK;AAAA,QAChB,CAAC;AAED,YAAI,KAAK,SAAS,GAAG;AACpB,eAAK,4BAA4B,OAAO,QAAQ,CAAA;AAAA,eAC1C;AACN,eAAK,4BAA4B;AAAA,YAChC,GAAG,KAAK;AAAA,YACR,GAAI,OAAO,QAAQ,CAAE;AAAA;QAEvB;AAGA,aAAK,cAAc,KAAK,0BAA0B,SAAS,OAAO;AAAA,MACjE,SAAO,OAAO;AACfA,sBAAc,MAAA,MAAA,SAAA,4DAAA,gBAAgB,KAAK;AACnC,aAAK,UAAU,UAAU;AAAA,MAC1B;AAAA,IACA;AAAA;AAAA;AAAA;AAAA,IAKD,MAAM,uBAAuB;AAC5B,UAAI,KAAK,eAAe,CAAC,KAAK;AAAa;AAE3C,WAAK,cAAc;AACnB,WAAK;AACL,YAAM,KAAK;AACX,WAAK,cAAc;AAAA,IACnB;AAAA;AAAA;AAAA;AAAA,IAKD,0BAA0B;AACzB,WAAK,OAAO;AACZ,WAAK,cAAc;AAAA,IACnB;AAAA;AAAA;AAAA;AAAA,IAKD,eAAe;AACd,WAAK,aAAa;AAClB,WAAK,mBAAmB;AACxB,WAAK,wBAAuB;AAC5B,WAAK,8BAA6B;AAAA,IAClC;AAAA;AAAA;AAAA;AAAA,IAKD,YAAY,GAAG;AACd,UAAI,KAAK,eAAe,EAAE;AAAO;AAEjC,WAAK,aAAa,EAAE;AACpB,WAAK,SAAS,IAAI;AAAA,IAClB;AAAA;AAAA;AAAA;AAAA,IAKD,gBAAgB,GAAG;AAClB,YAAM,QAAQ,OAAO,EAAE,WAAW,WAAW,EAAE,OAAO,QAAQ,KAAK;AACnE,UAAI,KAAK,eAAe;AAAO;AAE/B,WAAK,aAAa;AAClB,WAAK,wBAAuB;AAC5B,WAAK,8BAA6B;AAAA,IAClC;AAAA;AAAA;AAAA;AAAA,IAKD,gBAAgB;AACf,UAAI,CAAC,KAAK;AAAY;AAEtB,WAAK,aAAa;AAClB,WAAK,wBAAuB;AAC5B,WAAK,8BAA6B;AAAA,IAClC;AAAA;AAAA;AAAA;AAAA,IAKD,eAAe,UAAU;AACxB,UAAI,KAAK,qBAAqB;AAAU;AAExC,WAAK,mBAAmB;AACxB,WAAK,wBAAuB;AAC5B,WAAK,8BAA6B;AAAA,IAClC;AAAA;AAAA;AAAA;AAAA,IAKD,WAAW,KAAK;AACf,WAAK,gBAAgB;AACrB,WAAK,oBAAoB;AACzB,WAAK,cAAc;AAGnB,iBAAW,MAAM;AAChB,aAAK,gBAAgB;AAAA,MACrB,GAAE,GAAG;AAAA,IACN;AAAA;AAAA;AAAA;AAAA,IAKD,oBAAoB;AACnB,WAAK,UAAU,SAAS;AAAA,IACxB;AAAA;AAAA;AAAA;AAAA,IAKD,qBAAqB;AACpB,WAAK,cAAc;AACnB,iBAAW,MAAM;AAChB,aAAK,oBAAoB;MACzB,GAAE,GAAG;AAAA,IACN;AAAA;AAAA;AAAA;AAAA,IAKD,MAAM,gBAAgB;AACrB,UAAI,CAAC,KAAK,qBAAqB,CAAC,KAAK,kBAAkB,WAAW;AACjE,aAAK,UAAU,SAAS;AACxB;AAAA,MACD;AAEA,YAAM,UAAU,MAAM,uBAAuB,KAAK,kBAAkB,SAAS;AAC7E,UAAI,SAAS;AAEZ,mBAAW,MAAM;AAChB,eAAK,mBAAkB;AAAA,QACvB,GAAE,IAAI;AAAA,MACR;AAAA,IACA;AAAA;AAAA;AAAA;AAAA,IAKD,MAAM,iBAAiB,KAAK;AAC3B,UAAI,CAAC,OAAO,IAAI,WAAW;AAAY;AAEvCA,oBAAAA,MAAI,YAAY,EAAE,OAAO,SAAU,CAAA;AAEnC,UAAI;AACH,cAAM,SAAS,MAAM,0BAA0B,IAAI,EAAE;AAErD,YAAI,OAAO,SAAS;AAEnB,gBAAM,QAAQ,KAAK,0BAA0B,UAAU,UAAQ,KAAK,OAAO,IAAI,EAAE;AACjF,cAAI,UAAU,IAAI;AACjB,iBAAK,KAAK,KAAK,0BAA0B,KAAK,GAAG,UAAU,SAAS;AAAA,UACrE;AAEA,eAAK,UAAU,SAAS,SAAS;AAAA,eAC3B;AACN,eAAK,UAAU,OAAO,WAAW,MAAM;AAAA,QACxC;AAAA,MACC,SAAO,OAAO;AACfA,sBAAc,MAAA,MAAA,SAAA,4DAAA,aAAa,KAAK;AAChC,aAAK,UAAU,YAAY;AAAA,MAC5B,UAAU;AACTA,sBAAG,MAAC,YAAW;AAAA,MAChB;AAAA,IACA;AAAA;AAAA;AAAA;AAAA,IAKD,cAAc,KAAK;AAClB,cAAO,IAAI,QAAM;AAAA,QAChB,KAAK;AAAW,iBAAO;AAAA,QACvB,KAAK;AAAY,iBAAO;AAAA,QACxB,KAAK;AAAU,iBAAO;AAAA,QACtB;AAAS,iBAAO;AAAA,MACjB;AAAA,IACA;AAAA;AAAA;AAAA;AAAA,IAKD,eAAe,KAAK;AACnB,cAAO,IAAI,QAAM;AAAA,QAChB,KAAK;AAAW,iBAAO;AAAA,QACvB,KAAK;AAAY,iBAAO;AAAA,QACxB,KAAK;AAAU,iBAAO;AAAA,QACtB;AAAS,iBAAO;AAAA,MACjB;AAAA,IACA;AAAA;AAAA;AAAA;AAAA,IAKD,gBAAgB,OAAO,MAAM;AAC5B,YAAM,cAAc;AAEpB,UAAI,SAAS,YAAY,KAAK,oBAAoB,KAAK,GAAG;AACzD,aAAK,KAAK,KAAK,oBAAoB,KAAK,GAAG,WAAW,WAAW;AAAA,MAClE,WAAW,SAAS,cAAc,KAAK,0BAA0B,KAAK,GAAG;AACxE,aAAK,KAAK,KAAK,0BAA0B,KAAK,GAAG,WAAW,WAAW;AAAA,MACxE;AAAA,IACA;AAAA;AAAA;AAAA;AAAA,IAKD,mBAAmB;AAClB,WAAK,aAAa;AAClB,WAAK,SAAS,IAAI;AAAA,IAClB;AAAA;AAAA;AAAA;AAAA,IAKD,UAAU,OAAO,OAAO,QAAQ;AAC/BA,oBAAAA,MAAI,UAAU;AAAA,QACb;AAAA,QACA;AAAA,MACD,CAAC;AAAA,IACD;AAAA;AAAA;AAAA;AAAA,IAKD,SAAS;AACRA,oBAAG,MAAC,aAAY;AAAA,IACjB;AAAA,EACD;AACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AChkBA,GAAG,WAAW,eAAe;"}