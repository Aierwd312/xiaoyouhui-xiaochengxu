{"version":3,"file":"index.js","sources":["pages/index/index.js","pages/index/index.vue","../../../apps/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvaW5kZXgvaW5kZXgudnVl"],"sourcesContent":["import store from '@/store'\r\nimport { getToken } from '@/utils/auth'\r\n\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tnickName: store.getters.nickName || '未登录', // 用户昵称\r\n\t\t\tisVerified: true, // 是否已认证\r\n\t\t\tnotificationText: '最新福利通知：校友专享优惠活动开启', // 通知文本\r\n\t\t\tnavBackground: '#004299', // 导航栏背景色 - 默认为主题色\r\n\t\t\tnavTitleColor: '#000000', // 导航栏标题颜色 - 默认为黑色\r\n\t\t\tbackgroundConfig: {\r\n\t\t\t\tbackgroundType: 'solid', // solid(纯色) | gradient(渐变) | image(图片)\r\n\t\t\t\tsolidColor: '#004299',      // 纯色背景的颜色 - 默认为主题色\r\n\t\t\t\tgradientFrom: '#004299',\r\n\t\t\t\tgradientTo: '#79A6DC',\r\n\t\t\t\tgradientMiddle: '#2A6DCF',\r\n\t\t\t\tgradientAngle: 135,\r\n\t\t\t\timageUrl: '',\r\n\t\t\t\tblurAmount: 0, // 无模糊\r\n\t\t\t\toverlayOpacity: 0, // 无遮罩\r\n\t\t\t\t// 导航栏相关配置\r\n\t\t\t\tnavBarConfig: {\r\n\t\t\t\t\tbackgroundColor: '#004299', // 导航栏背景颜色 - 默认为主题色\r\n\t\t\t\t\ttitleColor: '#000000',         // 标题颜色 - 默认为黑色\r\n\t\t\t\t\tuseGradient: false,            // 不使用渐变背景\r\n\t\t\t\t\tgradientFrom: '#004299',\r\n\t\t\t\t\tgradientTo: '#2A6DCF',\r\n\t\t\t\t\tbackgroundOpacity: 1.0\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// Helper to generate page URLs\r\n\t\t\tgetPageUrl: (pageName) => `/pages/${pageName}/${pageName}`,\r\n\t\t\tfunctionsPersonal: [\r\n\t\t\t\t{ id: 1, icon: 'bank-card-2-line', text: '校友卡', pageName: 'alumniCardPage', iconClass: 'blue-icon', hasNotification: false },\r\n\t\t\t\t{ id: 2, icon: 'user-search-line', text: '发现校友', pageName: 'discoverAlumniPage', iconClass: 'dark-blue-icon', hasNotification: false },\r\n\t\t\t\t{ id: 3, icon: 'user-heart-line', text: '我的好友', pageName: 'myFriendsPage', iconClass: 'red-icon', hasNotification: true },\r\n\t\t\t\t{ id: 4, icon: 'team-line', text: '我的组织', pageName: 'myOrganizationsPage', iconClass: 'green-icon', hasNotification: false },\r\n\t\t\t\t{ id: 5, icon: 'profile-line', text: '学籍信息', pageName: 'studentInfoPage', iconClass: 'blue-icon', hasNotification: false },\r\n\t\t\t\t{ id: 6, icon: 'archive-line', text: '档案查询', pageName: 'archiveQueryPage', iconClass: 'light-blue-icon', hasNotification: false }\r\n\t\t\t].map((item, index) => ({\r\n\t\t\t\tID: item.id,\r\n\t\t\t\tCreatedAt: \"2023-01-01T12:00:00+08:00\",\r\n\t\t\t\tUpdatedAt: \"2023-01-01T12:00:00+08:00\",\r\n\t\t\t\tDeletedAt: null,\r\n\t\t\t\ttype: \"personal_function\",\r\n\t\t\t\tname: item.text,\r\n\t\t\t\ticon: item.icon,\r\n\t\t\t\turl: `/pages/${item.pageName}/${item.pageName}`,\r\n\t\t\t\tparentId: 0,\r\n\t\t\t\tsort: index,\r\n\t\t\t\tstatus: 0,\r\n\t\t\t\tchildren: [],\r\n\t\t\t\tmeta: {\r\n\t\t\t\t\ticonClass: item.iconClass,\r\n\t\t\t\t\thasNotification: item.hasNotification,\r\n\t\t\t\t\tpageName: item.pageName\r\n\t\t\t\t}\r\n\t\t\t})),\r\n\t\t\tfunctionsSchool: [\r\n\t\t\t\t{ id: 7, icon: 'calendar-event-line', text: '母校活动', pageName: 'schoolActivitiesPage', iconClass: 'orange-icon', hasNotification: false },\r\n\t\t\t\t{ id: 8, icon: 'newspaper-line', text: '母校资讯', pageName: 'schoolNewsPage', iconClass: 'blue-icon', hasNotification: false },\r\n\t\t\t\t{ id: 9, icon: 'building-4-line', text: '进校预约', pageName: 'campusAccessApplicationPage', iconClass: 'dark-blue-icon', hasNotification: false },\r\n\t\t\t\t{ id: 10, icon: 'hand-heart-line', text: '回馈母校', pageName: 'giveBackToSchoolPage', iconClass: 'red-icon', hasNotification: false },\r\n\t\t\t\t{ id: 11, icon: 'briefcase-4-line', text: '校友服务', pageName: 'alumniServicesPage', iconClass: 'green-icon', hasNotification: false }\r\n\t\t\t].map((item, index) => ({\r\n\t\t\t\tID: item.id,\r\n\t\t\t\tCreatedAt: \"2023-01-01T12:00:00+08:00\",\r\n\t\t\t\tUpdatedAt: \"2023-01-01T12:00:00+08:00\",\r\n\t\t\t\tDeletedAt: null,\r\n\t\t\t\ttype: \"school_function\",\r\n\t\t\t\tname: item.text,\r\n\t\t\t\ticon: item.icon,\r\n\t\t\t\turl: `/pages/${item.pageName}/${item.pageName}`,\r\n\t\t\t\tparentId: 0,\r\n\t\t\t\tsort: index,\r\n\t\t\t\tstatus: 0,\r\n\t\t\t\tchildren: [],\r\n\t\t\t\tmeta: {\r\n\t\t\t\t\ticonClass: item.iconClass,\r\n\t\t\t\t\thasNotification: item.hasNotification,\r\n\t\t\t\t\tpageName: item.pageName\r\n\t\t\t\t}\r\n\t\t\t})),\r\n\t\t\tfunctionsAccount: [\r\n\t\t\t\t{ id: 12, icon: 'user-settings-line', text: '账号管理', pageName: 'mine', iconClass: 'dark-blue-icon', hasNotification: false },\r\n\t\t\t\t{ id: 13, icon: 'feedback-line', text: '问题反馈', pageName: 'feedbackPage', iconClass: 'orange-icon', hasNotification: false },\r\n\t\t\t\t{ id: 14, icon: 'question-line', text: '系统帮助', pageName: 'systemHelpPage', iconClass: 'blue-icon', hasNotification: false }\r\n\t\t\t].map((item, index) => ({\r\n\t\t\t\tID: item.id,\r\n\t\t\t\tCreatedAt: \"2023-01-01T12:00:00+08:00\",\r\n\t\t\t\tUpdatedAt: \"2023-01-01T12:00:00+08:00\",\r\n\t\t\t\tDeletedAt: null,\r\n\t\t\t\ttype: \"account_function\",\r\n\t\t\t\tname: item.text,\r\n\t\t\t\ticon: item.icon,\r\n\t\t\t\turl: item.pageName === 'mine' ? `/pages/mine/index` : `/pages/${item.pageName}/${item.pageName}`,\r\n\t\t\t\tparentId: 0,\r\n\t\t\t\tsort: index,\r\n\t\t\t\tstatus: 0,\r\n\t\t\t\tchildren: [],\r\n\t\t\t\tmeta: {\r\n\t\t\t\t\ticonClass: item.iconClass,\r\n\t\t\t\t\thasNotification: item.hasNotification,\r\n\t\t\t\t\tpageName: item.pageName\r\n\t\t\t\t}\r\n\t\t\t}))\r\n\t\t}\r\n\t},\r\n\tonLoad() {\r\n\t\t// 页面加载时执行的逻辑\r\n\t\tthis.checkLoginAndRedirect();\r\n\t\tthis.applyBackgroundStyles();\r\n\t\tthis.updateUserInfo();\r\n\t},\r\n\tonShow() {\r\n\t\t// 页面显示时更新用户信息\r\n\t\tthis.updateUserInfo();\r\n\t},\r\n\tmounted() {\r\n\t\t// 在页面初始化时应用背景样式\r\n\t\tthis.applyBackgroundStyles();\r\n\t\t\r\n\t\t// 模拟从后端获取背景配置\r\n\t\t// 实际使用时可通过API请求获取\r\n\t\tsetTimeout(() => {\r\n\t\t\t// 这里是示例数据，实际应用中应从服务器获取\r\n\t\t\tthis.updateBackgroundConfig({\r\n\t\t\t\tbackgroundType: 'solid',\r\n\t\t\t\tsolidColor: '#004299', // 与导航栏和内容区域背景一致\r\n\t\t\t\tblurAmount: 0,\r\n\t\t\t\toverlayOpacity: 0,\r\n\t\t\t\tnavBarConfig: {\r\n\t\t\t\t\tbackgroundColor: '#004299',\r\n\t\t\t\t\ttitleColor: '#FFFFFF', // 导航栏标题黑色\r\n\t\t\t\t\tuseGradient: false,\r\n\t\t\t\t\tbackgroundOpacity: 1.0\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}, 2000);\r\n\t},\r\n\tmethods: {\r\n\t\t/**\r\n\t\t * 检查登录状态并重定向\r\n\t\t */\r\n\t\tcheckLoginAndRedirect() {\r\n\t\t\t// 从utils/auth获取token\r\n\t\t\tconst token = getToken();\r\n\t\t\t\r\n\t\t\tif (!token) {\r\n\t\t\t\tconsole.log('首页检测到未登录，跳转到登录页');\r\n\t\t\t\tuni.reLaunch({\r\n\t\t\t\t\turl: '/pages/login'\r\n\t\t\t\t});\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * 更新用户信息\r\n\t\t */\r\n\t\tasync updateUserInfo() {\r\n\t\t\ttry {\r\n\t\t\t\t// 先尝试从store获取用户信息\r\n\t\t\t\tlet nickName = store.getters.nickName;\r\n\t\t\t\t\r\n\t\t\t\t// 如果store中没有用户信息，则调用API获取\r\n\t\t\t\tif (!nickName) {\r\n\t\t\t\t\tconsole.log('store中无用户信息，正在获取...');\r\n\t\t\t\t\tawait store.dispatch('GetInfo');\r\n\t\t\t\t\tnickName = store.getters.nickName;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tthis.nickName = nickName || '未登录';\r\n\t\t\t\tconsole.log('更新昵称:', this.nickName);\r\n\t\t\t\tconsole.log('完整用户信息:', store.getters.userInfo);\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.error('获取用户信息失败:', error);\r\n\t\t\t\tthis.nickName = '获取失败';\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * 点击通知栏\r\n\t\t */\r\n\t\thandleNotificationClick() {\r\n\t\t\tconst url = this.getPageUrl('notificationsPage');\r\n\t\t\tuni.navigateTo({ url });\r\n\t\t\tconsole.log(`Navigating to: ${url}`);\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * 点击个人资料\r\n\t\t */\r\n\t\thandleProfileClick() {\r\n\t\t\t// 跳转到若依自带的账户管理页面\r\n\t\t\tconst url = '/pages/mine/index';\r\n\t\t\tuni.navigateTo({ url });\r\n\t\t\tconsole.log(`Navigating to: ${url}`);\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * 点击功能项\r\n\t\t * @param {Number} id 功能项ID\r\n\t\t * @param {String} name 功能项名称 (已改为使用ID查找URL)\r\n\t\t */\r\n\t\thandleFunctionClick(id, name) {\r\n\t\t\tlet itemUrl = '';\r\n\t\t\t// Find the item in all lists to get its URL\r\n\t\t\tconst allFunctions = [...this.functionsPersonal, ...this.functionsSchool, ...this.functionsAccount];\r\n\t\t\tconst clickedItem = allFunctions.find(item => item.ID === id);\r\n\t\t\t\r\n\t\t\tif (clickedItem && clickedItem.url) {\r\n\t\t\t\titemUrl = clickedItem.url;\r\n\t\t\t\tuni.navigateTo({ url: itemUrl });\r\n\t\t\t\tconsole.log(`Navigating to function: ${name}, URL: ${itemUrl}`);\r\n\t\t\t} else {\r\n\t\t\t\tconsole.warn(`No URL found for function ID: ${id}, Name: ${name}`);\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: `功能\"${name}\"暂未开放`,\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * 更新背景配置\r\n\t\t * @param {Object} config 背景配置\r\n\t\t */\r\n\t\tupdateBackgroundConfig(config) {\r\n\t\t\t// 合并配置\r\n\t\t\tthis.backgroundConfig = {\r\n\t\t\t\t...this.backgroundConfig,\r\n\t\t\t\t...config\r\n\t\t\t};\r\n\t\t\t\r\n\t\t\t// 应用配置到CSS变量\r\n\t\t\tthis.applyBackgroundStyles();\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * 应用背景样式\r\n\t\t */\r\n\t\tapplyBackgroundStyles() {\r\n\t\t\tconst cfg = this.backgroundConfig;\r\n\t\t\tlet cssBackgroundImageValue = '';\r\n\t\t\tlet cssBackgroundColorValue = '';\r\n\t\t\t\r\n\t\t\tif (cfg.backgroundType === 'gradient') {\r\n\t\t\t\tcssBackgroundImageValue = `linear-gradient(${cfg.gradientAngle}deg, ${cfg.gradientFrom} 0%, ${cfg.gradientMiddle} 50%, ${cfg.gradientTo} 100%)`;\r\n\t\t\t} else if (cfg.backgroundType === 'image' && cfg.imageUrl) {\r\n\t\t\t\tcssBackgroundImageValue = `url('${cfg.imageUrl}')`;\r\n\t\t\t} else if (cfg.backgroundType === 'solid'){\r\n\t\t\t\tcssBackgroundColorValue = cfg.solidColor;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// 应用导航栏样式\r\n\t\t\tthis.applyNavBarStyles();\r\n\t\t\t\r\n\t\t\t// 使用uni-app的方式设置CSS变量\r\n\t\t\tconst sysInfo = uni.getSystemInfoSync();\r\n\t\t\t\r\n\t\t\ttry {\r\n\t\t\t\t// #ifdef H5\r\n\t\t\t\tdocument.documentElement.style.setProperty('--background-image', cssBackgroundImageValue);\r\n\t\t\t\tdocument.documentElement.style.setProperty('--background-color-solid', cssBackgroundColorValue);\r\n\t\t\t\tdocument.documentElement.style.setProperty('--blur-amount', `${cfg.blurAmount}px`);\r\n\t\t\t\tdocument.documentElement.style.setProperty('--overlay-opacity', String(cfg.overlayOpacity));\r\n\t\t\t\t// #endif\r\n\t\t\t\t\r\n\t\t\t\t// #ifdef MP-WEIXIN\r\n\t\t\t\t// 小程序中，如果需要动态修改页面背景色，可能需要操作页面page的style\r\n\t\t\t\t// 但通常建议通过wxml绑定动态class或style来实现\r\n\t\t\t\t// 此处仅为示例，具体实现需要看项目结构和需求\r\n\t\t\t\tconst pages = getCurrentPages();\r\n\t\t\t\tif (pages.length) {\r\n\t\t\t\t\tconst currentPage = pages[pages.length - 1];\r\n\t\t\t\t\t// 注意: vue3中this.$scope 指向当前组件实例, vue2中是 this\r\n\t\t\t\t\t// 直接修改页面style可能不是最佳实践\r\n\t\t\t\t\t// if (currentPage && currentPage.$vm && cssBackgroundColorValue) {\r\n\t\t\t\t\t// \tcurrentPage.$vm.$el.style.backgroundColor = cssBackgroundColorValue;\r\n\t\t\t\t\t// }\r\n\t\t\t\t}\r\n\t\t\t\t// #endif\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.error('设置背景样式失败:', error);\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * 应用导航栏样式\r\n\t\t */\r\n\t\tapplyNavBarStyles() {\r\n\t\t\tconst navCfg = this.backgroundConfig.navBarConfig;\r\n\t\t\t\r\n\t\t\t// 设置导航栏背景色\r\n\t\t\tif (navCfg.useGradient) {\r\n\t\t\t\t// 使用渐变背景\r\n\t\t\t\tthis.navBackground = `linear-gradient(90deg, ${navCfg.gradientFrom}, ${navCfg.gradientTo})`;\r\n\t\t\t} else {\r\n\t\t\t\t// 使用纯色背景，带透明度\r\n\t\t\t\tif (navCfg.backgroundColor === 'transparent') {\r\n\t\t\t\t\tthis.navBackground = 'transparent';\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// 处理带透明度的颜色\r\n\t\t\t\t\tconst colorWithOpacity = this.hexToRgba(navCfg.backgroundColor, navCfg.backgroundOpacity);\r\n\t\t\t\t\tthis.navBackground = colorWithOpacity;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// 设置标题颜色\r\n\t\t\tthis.navTitleColor = navCfg.titleColor;\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * 将HEX颜色转换为带透明度的RGBA\r\n\t\t * @param {String} hex 16进制颜色值\r\n\t\t * @param {Number} opacity 透明度 0-1\r\n\t\t * @returns {String} RGBA颜色值\r\n\t\t */\r\n\t\thexToRgba(hex, opacity) {\r\n\t\t\t// 移除#号\r\n\t\t\thex = hex.replace('#', '');\r\n\t\t\t\r\n\t\t\t// 如果是3位颜色，转为6位\r\n\t\t\tif (hex.length === 3) {\r\n\t\t\t\thex = hex[0] + hex[0] + hex[1] + hex[1] + hex[2] + hex[2];\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// 转为RGB\r\n\t\t\tconst r = parseInt(hex.substring(0, 2), 16);\r\n\t\t\tconst g = parseInt(hex.substring(2, 4), 16);\r\n\t\t\tconst b = parseInt(hex.substring(4, 6), 16);\r\n\t\t\t\r\n\t\t\t// 返回rgba格式\r\n\t\t\treturn `rgba(${r}, ${g}, ${b}, ${opacity})`;\r\n\t\t},\r\n\t}\r\n}\r\n","<template>\r\n\t<view class=\"content-area\">\r\n\t\t<!-- 使用FirstUI导航栏组件 -->\r\n\t\t<fui-nav-bar\r\n\t\t\t:statusBar=\"true\"\r\n\t\t\ttitle=\"重财校友会\"\r\n\t\t\t:background=\"navBackground\"\r\n\t\t\t:color=\"navTitleColor\"\r\n\t\t\t:size=\"18\"\r\n\t\t\t:isFixed=\"true\"\r\n\t\t\t:fontWeight=\"500\"\r\n\t\t\t@init=\"navbarInit\">\r\n\t\t</fui-nav-bar>\r\n\t\t\r\n\t\t<!-- 通知栏卡片 -->\r\n\t\t<view class=\"card notification-card\" @tap=\"handleNotificationClick\" :style=\"{ marginTop: navHeight + 'px' }\">\r\n\t\t\t<view class=\"notification-icon\">\r\n\t\t\t\t<!-- <fui-icon name=\"notification-3-line\" class=\"notification-icon-inner\"></fui-icon> -->\r\n\t\t\t\t<image src=\"/static/notification-3-line.svg\" class=\"notification-icon-inner svg-icon svg-orange\"></image>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"notification-text\">{{ notificationText }}</view>\r\n\t\t\t<view class=\"notification-action\">\r\n\t\t\t\t<!-- <fui-icon name=\"arrow-right-s-line\" class=\"notification-action-icon\"></fui-icon> -->\r\n\t\t\t\t<image src=\"/static/arrow-right-s-line.svg\" class=\"notification-action-icon svg-icon svg-hint\"></image>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t\r\n\t\t<!-- 个人信息总览卡片 -->\r\n\t\t<view class=\"card profile-card\" @tap=\"handleProfileClick\">\r\n\t\t\t<view class=\"profile-avatar\">\r\n\t\t\t\t<image src=\"/static/school-badge.svg\" class=\"avatar-image svg-icon svg-darkblue\"></image>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"profile-info\">\r\n\t\t\t\t<view class=\"profile-name\">{{ nickName }}</view>\r\n\t\t\t\t<view class=\"profile-verified\" v-if=\"isVerified\">\r\n\t\t\t\t\t<!-- <fui-icon name=\"shield-check-fill\" class=\"verified-icon\"></fui-icon> -->\r\n\t\t\t\t\t<!-- <image src=\"/static/shield-check-fill.svg\" class=\"verified-icon svg-icon svg-white\"></image> -->\r\n\t\t\t\t\t<text class=\"verified-text\">已认证</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"profile-action\">\r\n\t\t\t\t<!-- <fui-icon name=\"arrow-right-s-line\" class=\"profile-action-icon\"></fui-icon> -->\r\n\t\t\t\t<image src=\"/static/arrow-right-s-line.svg\" class=\"profile-action-icon svg-icon svg-hint\"></image>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t\r\n\t\t<!-- 功能列表区块（个人区块） -->\r\n\t\t<view class=\"card function-card\">\r\n\t\t\t<block v-for=\"(item, index) in functionsPersonal\" :key=\"item.ID\">\r\n\t\t\t\t<view class=\"function-item\" @tap=\"handleFunctionClick(item.ID, item.name)\">\r\n\t\t\t\t\t<view class=\"function-icon\" :class=\"item.meta.iconClass\">\r\n\t\t\t\t\t\t<!-- <fui-icon :name=\"item.icon\" :class=\"item.iconClass + '-inner'\" class=\"icon\"></fui-icon> -->\r\n\t\t\t\t\t\t<image :src=\"'/static/' + item.icon + '.svg'\" class=\"icon svg-icon\" :class=\"getIconColorClass(item.meta.iconClass)\"></image>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"function-text\">{{ item.name }}</view>\r\n\t\t\t\t\t<view class=\"function-action\" :class=\"{'notification-dot': item.meta.hasNotification}\">\r\n\t\t\t\t\t\t<!-- <fui-icon name=\"arrow-right-s-line\" class=\"function-action-icon\"></fui-icon> -->\r\n\t\t\t\t\t\t<image src=\"/static/arrow-right-s-line.svg\" class=\"function-action-icon svg-icon svg-hint\"></image>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"divider\" v-if=\"index !== functionsPersonal.length - 1\"></view>\r\n\t\t\t</block>\r\n\t\t</view>\r\n\t\t\r\n\t\t<!-- 功能列表区块（母校相关） -->\r\n\t\t<view class=\"card function-card\">\r\n\t\t\t<block v-for=\"(item, index) in functionsSchool\" :key=\"item.ID\">\r\n\t\t\t\t<view class=\"function-item\" @tap=\"handleFunctionClick(item.ID, item.name)\">\r\n\t\t\t\t\t<view class=\"function-icon\" :class=\"item.meta.iconClass\">\r\n\t\t\t\t\t\t<!-- <fui-icon :name=\"item.icon\" :class=\"item.iconClass + '-inner'\" class=\"icon\"></fui-icon> -->\r\n\t\t\t\t\t\t<image :src=\"'/static/' + item.icon + '.svg'\" class=\"icon svg-icon\" :class=\"getIconColorClass(item.meta.iconClass)\"></image>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"function-text\">{{ item.name }}</view>\r\n\t\t\t\t\t<view class=\"function-action\" :class=\"{'notification-dot': item.meta.hasNotification}\">\r\n\t\t\t\t\t\t<!-- <fui-icon name=\"arrow-right-s-line\" class=\"function-action-icon\"></fui-icon> -->\r\n\t\t\t\t\t\t<image src=\"/static/arrow-right-s-line.svg\" class=\"function-action-icon svg-icon svg-hint\"></image>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"divider\" v-if=\"index !== functionsSchool.length - 1\"></view>\r\n\t\t\t</block>\r\n\t\t</view>\r\n\t\t\r\n\t\t<!-- 功能列表区块（账号与帮助） -->\r\n\t\t<view class=\"card function-card\">\r\n\t\t\t<block v-for=\"(item, index) in functionsAccount\" :key=\"item.ID\">\r\n\t\t\t\t<view class=\"function-item\" @tap=\"handleFunctionClick(item.ID, item.name)\">\r\n\t\t\t\t\t<view class=\"function-icon\" :class=\"item.meta.iconClass\">\r\n\t\t\t\t\t\t<!-- <fui-icon :name=\"item.icon\" :class=\"item.iconClass + '-inner'\" class=\"icon\"></fui-icon> -->\r\n\t\t\t\t\t\t<image :src=\"'/static/' + item.icon + '.svg'\" class=\"icon svg-icon\" :class=\"getIconColorClass(item.meta.iconClass)\"></image>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"function-text\">{{ item.name }}</view>\r\n\t\t\t\t\t<view class=\"function-action\" :class=\"{'notification-dot': item.meta.hasNotification}\">\r\n\t\t\t\t\t\t<!-- <fui-icon name=\"arrow-right-s-line\" class=\"function-action-icon\"></fui-icon> -->\r\n\t\t\t\t\t\t<image src=\"/static/arrow-right-s-line.svg\" class=\"function-action-icon svg-icon svg-hint\"></image>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"divider\" v-if=\"index !== functionsAccount.length - 1\"></view>\r\n\t\t\t</block>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport indexJs from './index.js'\r\n\timport { ref, computed, onMounted } from 'vue';\r\n\t// import fuiNavBar from '@/compoents/firstui/fui-nav-bar/fui-nav-bar.vue'; // 使用easycom后，不再需要手动引入\r\n\t\r\n\texport default {\r\n\t\tcomponents: {\r\n\t\t\t// fuiNavBar // 使用easycom后，不再需要手动注册\r\n\t\t},\r\n\t\t...indexJs,\r\n\t\tsetup() {\r\n\t\t\t// 导航栏高度\r\n\t\t\tconst navHeight = ref(44);\r\n\t\t\tconst statusBarHeight = ref(0);\r\n\t\t\t\r\n\t\t\t// 初始化导航栏\r\n\t\t\tconst navbarInit = (e) => {\r\n\t\t\t\tstatusBarHeight.value = e.statusBarHeight;\r\n\t\t\t\tnavHeight.value = e.height + e.statusBarHeight;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn {\r\n\t\t\t\tnavHeight,\r\n\t\t\t\tstatusBarHeight,\r\n\t\t\t\tnavbarInit\r\n\t\t\t};\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t...indexJs.methods,\r\n\t\t\tgetIconColorClass(iconClassFromMeta) {\r\n\t\t\t\t// 将图标类名转换为对应的颜色类名\r\n\t\t\t\tconst colorMap = {\r\n\t\t\t\t\t'blue-icon': 'svg-blue',\r\n\t\t\t\t\t'dark-blue-icon': 'svg-darkblue',\r\n\t\t\t\t\t'red-icon': 'svg-red',\r\n\t\t\t\t\t'green-icon': 'svg-green',\r\n\t\t\t\t\t'gray-icon': 'svg-gray',\r\n\t\t\t\t\t'light-blue-icon': 'svg-lightblue',\r\n\t\t\t\t\t'orange-icon': 'svg-orange'\r\n\t\t\t\t};\r\n\t\t\t\t\r\n\t\t\t\treturn colorMap[iconClassFromMeta] || 'svg-darkblue'; // 确保有默认值\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t@import './index.css';\r\n</style>\r\n","import MiniProgramPage from 'D:/code/cfecer/xiaoyouhui-xiaochengxu/pages/index/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["store","getToken","uni","ref"],"mappings":"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"}