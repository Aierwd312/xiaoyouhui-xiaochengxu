{"version":3,"file":"news.js","sources":["api/news.js"],"sourcesContent":["import request from '@/utils/request'\r\nimport { getToken } from '@/utils/auth'\r\n\r\n// 获取新闻列表\r\nexport function getNewsList(query) {\r\n  return request({\r\n    url: '/core/news/list',\r\n    method: 'get',\r\n    params: query\r\n  })\r\n}\r\n\r\n// 获取新闻详细信息\r\nexport function getNewsDetail(id) {\r\n  return request({\r\n    url: `/core/news/${id}`,\r\n    method: 'get'\r\n  })\r\n}\r\n\r\n// 导出新闻管理列表\r\nexport function exportNewsList(query) {\r\n  return new Promise((resolve, reject) => {\r\n    uni.request({\r\n      url: `http://10.155.10.148:8090/prod-api/core/news/export`,\r\n      method: 'POST',\r\n      data: query,\r\n      header: {\r\n        'Authorization': 'Bearer ' + (getToken() || ''),\r\n        'Content-Type': 'application/json'\r\n      },\r\n      responseType: 'text', // 接收文件数据\r\n      success: (res) => {\r\n        console.log('导出响应状态:', res.statusCode)\r\n        console.log('导出响应数据类型:', typeof res.data)\r\n        console.log('导出响应前100字符:', res.data ? res.data.substring(0, 100) : 'null')\r\n        \r\n        if (res.statusCode === 200) {\r\n          resolve(res.data)\r\n        } else {\r\n          reject(new Error(`HTTP ${res.statusCode}`))\r\n        }\r\n      },\r\n      fail: (error) => {\r\n        console.error('导出请求失败:', error)\r\n        reject(error)\r\n      }\r\n    })\r\n  })\r\n}\r\n\r\n// 新增新闻\r\nexport function addNews(data) {\r\n  return request({\r\n    url: '/core/news',\r\n    method: 'post',\r\n    data: data\r\n  })\r\n}\r\n\r\n// 修改新闻\r\nexport function updateNews(data) {\r\n  return request({\r\n    url: '/core/news',\r\n    method: 'put',\r\n    data: data\r\n  })\r\n}\r\n\r\n// 删除新闻\r\nexport function delNews(id) {\r\n  return request({\r\n    url: `/core/news/${id}`,\r\n    method: 'delete'\r\n  })\r\n}\r\n"],"names":["request","uni","getToken"],"mappings":";;;;AAIO,SAAS,YAAY,OAAO;AACjC,SAAOA,sBAAQ;AAAA,IACb,KAAK;AAAA,IACL,QAAQ;AAAA,IACR,QAAQ;AAAA,EACZ,CAAG;AACH;AAGO,SAAS,cAAc,IAAI;AAChC,SAAOA,sBAAQ;AAAA,IACb,KAAK,cAAc,EAAE;AAAA,IACrB,QAAQ;AAAA,EACZ,CAAG;AACH;AAGO,SAAS,eAAe,OAAO;AACpC,SAAO,IAAI,QAAQ,CAAC,SAAS,WAAW;AACtCC,kBAAAA,MAAI,QAAQ;AAAA,MACV,KAAK;AAAA,MACL,QAAQ;AAAA,MACR,MAAM;AAAA,MACN,QAAQ;AAAA,QACN,iBAAiB,aAAaC,oBAAU,KAAI;AAAA,QAC5C,gBAAgB;AAAA,MACjB;AAAA,MACD,cAAc;AAAA;AAAA,MACd,SAAS,CAAC,QAAQ;AAChBD,sBAAY,MAAA,MAAA,OAAA,qBAAA,WAAW,IAAI,UAAU;AACrCA,sBAAA,MAAA,MAAA,OAAA,qBAAY,aAAa,OAAO,IAAI,IAAI;AACxCA,sBAAAA,MAAY,MAAA,OAAA,qBAAA,eAAe,IAAI,OAAO,IAAI,KAAK,UAAU,GAAG,GAAG,IAAI,MAAM;AAEzE,YAAI,IAAI,eAAe,KAAK;AAC1B,kBAAQ,IAAI,IAAI;AAAA,QAC1B,OAAe;AACL,iBAAO,IAAI,MAAM,QAAQ,IAAI,UAAU,EAAE,CAAC;AAAA,QAC3C;AAAA,MACF;AAAA,MACD,MAAM,CAAC,UAAU;AACfA,sBAAAA,MAAA,MAAA,SAAA,qBAAc,WAAW,KAAK;AAC9B,eAAO,KAAK;AAAA,MACb;AAAA,IACP,CAAK;AAAA,EACL,CAAG;AACH;;;;"}