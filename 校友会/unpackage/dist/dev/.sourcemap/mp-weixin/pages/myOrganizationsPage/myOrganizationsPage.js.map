{"version":3,"file":"myOrganizationsPage.js","sources":["pages/myOrganizationsPage/myOrganizationsPage.js","pages/myOrganizationsPage/myOrganizationsPage.vue","../../../../Program Files/HBuilderX.4.76.2025082103/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvbXlPcmdhbml6YXRpb25zUGFnZS9teU9yZ2FuaXphdGlvbnNQYWdlLnZ1ZQ"],"sourcesContent":["// myOrganizationsPage.js - API接口和模拟数据\r\n\r\n// 模拟数据 - 仅用于开发测试\r\nconst mockJoinedOrganizations = [\r\n  {\r\n    id: '1',\r\n    name: '重庆财经校友总会',\r\n    type: '校友总会',\r\n    logoUrl: '/static/images/org_logo_default.png',\r\n    qrCodeUrl: 'https://doc.firstui.cn'\r\n  },\r\n  {\r\n    id: '2',\r\n    name: '北京校友分会',\r\n    type: '地方分会',\r\n    logoUrl: '/static/images/org_logo_default.png',\r\n    qrCodeUrl: 'https://doc.firstui.cn'\r\n  },\r\n  {\r\n    id: '3',\r\n    name: '经济学院校友会',\r\n    type: '院系分会',\r\n    logoUrl: '/static/images/org_logo_default.png',\r\n    qrCodeUrl: 'https://doc.firstui.cn'\r\n  }\r\n];\r\n\r\nconst mockDiscoverableOrganizations = {\r\n  total: 20,\r\n  data: [\r\n    {\r\n      id: '4',\r\n      name: '上海校友分会',\r\n      type: '地方分会',\r\n      description: '覆盖上海地区的校友联络与活动组织',\r\n      logoUrl: '/static/images/org_logo_default.png',\r\n      status: 'joinable'\r\n    },\r\n    {\r\n      id: '5',\r\n      name: '深圳校友分会',\r\n      type: '地方分会',\r\n      description: '覆盖深圳地区的校友联络与活动组织',\r\n      logoUrl: '/static/images/org_logo_default.png',\r\n      status: 'pending'\r\n    },\r\n    {\r\n      id: '6',\r\n      name: '金融学院校友会',\r\n      type: '院系分会',\r\n      description: '金融学院毕业生校友交流平台',\r\n      logoUrl: '/static/images/org_logo_default.png',\r\n      status: 'joinable'\r\n    },\r\n    {\r\n      id: '7',\r\n      name: '会计学院校友会',\r\n      type: '院系分会',\r\n      description: '会计学院校友互助平台',\r\n      logoUrl: '/static/images/org_logo_default.png',\r\n      status: 'joinable'\r\n    },\r\n    {\r\n      id: '8',\r\n      name: '会计师校友分会',\r\n      type: '专业分会',\r\n      description: '从事会计行业校友的交流平台',\r\n      logoUrl: '/static/images/org_logo_default.png',\r\n      status: 'joinable'\r\n    }\r\n  ]\r\n};\r\n\r\n/**\r\n * 获取用户已加入的组织列表\r\n * @returns {Promise<Array>} 已加入的组织列表数组\r\n */\r\nexport const getMyJoinedOrganizations = () => {\r\n  return new Promise((resolve, reject) => {\r\n    // 实际开发中替换为真实接口调用\r\n    setTimeout(() => {\r\n      // 模拟网络请求\r\n      try {\r\n        // 模拟成功响应\r\n        resolve(mockJoinedOrganizations);\r\n      } catch (error) {\r\n        console.error('获取已加入组织列表失败:', error);\r\n        reject(error);\r\n      }\r\n    }, 500); // 模拟网络延迟\r\n  });\r\n};\r\n\r\n/**\r\n * 获取可发现的组织列表\r\n * @param {Object} params 查询参数\r\n * @param {number} params.page 页码\r\n * @param {number} params.limit 每页数量\r\n * @param {string} params.keyword 搜索关键词\r\n * @param {string} params.category 筛选类别\r\n * @returns {Promise<Object>} 返回带有total和data的对象\r\n */\r\nexport const getDiscoverableOrganizations = ({ page = 1, limit = 10, keyword = '', category = '' }) => {\r\n  return new Promise((resolve, reject) => {\r\n    // 实际开发中替换为真实接口调用\r\n    setTimeout(() => {\r\n      try {\r\n        // 模拟筛选和分页\r\n        let filteredData = [...mockDiscoverableOrganizations.data];\r\n        \r\n        // 关键词筛选\r\n        if (keyword) {\r\n          filteredData = filteredData.filter(org => \r\n            org.name.includes(keyword) || \r\n            org.type.includes(keyword) || \r\n            (org.description && org.description.includes(keyword))\r\n          );\r\n        }\r\n        \r\n        // 类别筛选\r\n        if (category) {\r\n          const categoryMap = {\r\n            'main': '校友总会',\r\n            'local': '地方分会',\r\n            'college': '院系分会',\r\n            'major': '专业分会'\r\n          };\r\n          filteredData = filteredData.filter(org => org.type === categoryMap[category]);\r\n        }\r\n        \r\n        // 分页处理\r\n        const startIdx = (page - 1) * limit;\r\n        const endIdx = page * limit;\r\n        const pageData = filteredData.slice(startIdx, endIdx);\r\n        \r\n        resolve({\r\n          total: filteredData.length,\r\n          data: pageData\r\n        });\r\n      } catch (error) {\r\n        console.error('获取可发现组织列表失败:', error);\r\n        reject(error);\r\n      }\r\n    }, 500); // 模拟网络延迟\r\n  });\r\n};\r\n\r\n/**\r\n * 申请加入组织\r\n * @param {string} organizationId 要加入的组织ID\r\n * @returns {Promise<Object>} 申请结果\r\n */\r\nexport const requestToJoinOrganization = (organizationId) => {\r\n  return new Promise((resolve, reject) => {\r\n    // 实际开发中替换为真实接口调用\r\n    setTimeout(() => {\r\n      try {\r\n        // 模拟成功响应\r\n        resolve({\r\n          success: true,\r\n          message: '申请已提交',\r\n          status: 'pending'\r\n        });\r\n      } catch (error) {\r\n        console.error('申请加入组织失败:', error);\r\n        reject(error);\r\n      }\r\n    }, 800); // 模拟网络延迟\r\n  });\r\n};\r\n\r\n/**\r\n * 保存二维码图片到相册\r\n * @param {string} url 图片URL或本地路径\r\n * @returns {Promise<boolean>} 是否保存成功\r\n */\r\nexport const saveImageToPhotosAlbum = async (url) => {\r\n  return new Promise(async (resolve, reject) => {\r\n    try {\r\n      // 获取授权\r\n      const settingRes = await uni.getSetting();\r\n      if (!settingRes.authSetting['scope.writePhotosAlbum']) {\r\n        await uni.authorize({ scope: 'scope.writePhotosAlbum' }).catch(err => {\r\n          uni.showModal({\r\n            title: '提示',\r\n            content: '需要您授权保存图片到相册',\r\n            success: (res) => {\r\n              if (res.confirm) {\r\n                uni.openSetting();\r\n              }\r\n            }\r\n          });\r\n          throw new Error('未授权保存图片');\r\n        });\r\n      }\r\n      \r\n      // 处理图片来源\r\n      let localPath = url;\r\n      if (url.startsWith('http')) {\r\n        uni.showLoading({ title: '下载图片中...' });\r\n        try {\r\n          const downloadRes = await uni.downloadFile({ url });\r\n          if (downloadRes.statusCode === 200) {\r\n            localPath = downloadRes.tempFilePath;\r\n          } else {\r\n            throw new Error('下载图片失败');\r\n          }\r\n        } finally {\r\n          uni.hideLoading();\r\n        }\r\n      }\r\n      \r\n      // 保存到相册\r\n      await uni.saveImageToPhotosAlbum({ filePath: localPath });\r\n      uni.showToast({\r\n        title: '保存成功',\r\n        icon: 'success'\r\n      });\r\n      resolve(true);\r\n    } catch (error) {\r\n      console.error('保存图片失败:', error);\r\n      uni.showToast({\r\n        title: '保存失败，请检查授权',\r\n        icon: 'none'\r\n      });\r\n      resolve(false);\r\n    }\r\n  });\r\n};\r\n","<template>\n\t<view class=\"page-container\">\n\t\t<!-- 自定义导航栏，参考校友卡页面实现 -->\n\t\t<view class=\"custom-nav-bar\" :style=\"{ height: navHeight + 'px' }\">\n\t\t\t<view class=\"nav-bar-content\" :style=\"{ paddingTop: statusBarHeight + 'px' }\">\n\t\t\t\t<view class=\"nav-back\" @click=\"goBack\">\n\t\t\t\t\t<text class=\"back-arrow\">←</text>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"nav-title\">我的组织</view>\n\t\t\t</view>\n\t\t</view>\n\t\t\n\t\t<!-- 内容区域，添加上边距与导航栏高度相同 -->\n\t\t<view class=\"content-area\" :style=\"{ paddingTop: navHeight + 'px' }\">\n\t\t\t<!-- 自定义Tab切换栏 -->\n\t\t\t<view class=\"custom-tabs\">\n\t\t\t\t<view \n\t\t\t\t\tv-for=\"(tab, index) in tabs\" \n\t\t\t\t\t:key=\"index\"\n\t\t\t\t\t:class=\"['custom-tab-item', currentTab === index ? 'custom-tab-active' : '']\"\n\t\t\t\t\t@click=\"onTabChange({index})\">\n\t\t\t\t\t<text>{{tab.text}}</text>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"custom-tab-line\" :style=\"{transform: `translateX(${currentTab * 100}%)`}\"></view>\n\t\t\t</view>\n\t\t\t\n\t\t\t<!-- Tab内容区域 -->\n\t\t\t<view class=\"tab-content\">\n\t\t\t\t<!-- Tab - 我的已加组织 -->\n\t\t\t\t<view v-if=\"currentTab === 0\">\n\t\t\t\t\t<!-- 已加入组织列表 -->\n\t\t\t\t\t<view v-if=\"joinedOrganizations.length > 0\" class=\"org-list\">\n\t\t\t\t\t\t<view class=\"org-card\">\n\t\t\t\t\t\t\t<view \n\t\t\t\t\t\t\t\tclass=\"org-item\" \n\t\t\t\t\t\t\t\tv-for=\"(org, index) in joinedOrganizations\" \n\t\t\t\t\t\t\t\t:key=\"org.id\">\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<!-- 组织Logo -->\n\t\t\t\t\t\t\t\t<image \n\t\t\t\t\t\t\t\t\tclass=\"org-logo\" \n\t\t\t\t\t\t\t\t\t:src=\"org.logoUrl\" \n\t\t\t\t\t\t\t\t\tmode=\"aspectFill\"\n\t\t\t\t\t\t\t\t\t@error=\"handleLogoError(index, 'joined')\">\n\t\t\t\t\t\t\t\t</image>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<!-- 组织信息 -->\n\t\t\t\t\t\t\t\t<view class=\"org-info\">\n\t\t\t\t\t\t\t\t\t<view class=\"org-name\">{{org.name}}</view>\n\t\t\t\t\t\t\t\t\t<view class=\"org-type\">{{org.type}}</view>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<!-- 查看二维码按钮 -->\n\t\t\t\t\t\t\t\t<view class=\"view-qrcode\" @click.stop=\"showQrCode(org)\">\n\t\t\t\t\t\t\t\t\t<text>查看二维码</text>\n\t\t\t\t\t\t\t\t\t<text class=\"arrow-right\">→</text>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t\t\n\t\t\t\t\t<!-- 加载中状态 -->\n\t\t\t\t\t<view v-else-if=\"loading\" class=\"loading-container\">\n\t\t\t\t\t\t<view class=\"custom-loading\">\n\t\t\t\t\t\t\t<text>加载中...</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t\t\n\t\t\t\t\t<!-- 空状态 -->\n\t\t\t\t\t<view v-else class=\"empty-state\">\n\t\t\t\t\t\t<view class=\"empty-text\">您尚未加入任何组织，快去\"发现组织\"看看吧！</view>\n\t\t\t\t\t\t<view class=\"btn primary-btn empty-action\" @click=\"switchToDiscover\">去发现组织</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t\n\t\t\t\t<!-- Tab - 发现组织 -->\n\t\t\t\t<view v-else>\n\t\t\t\t\t<!-- 搜索栏 -->\n\t\t\t\t\t<view class=\"search-container\">\n\t\t\t\t\t\t<view class=\"custom-search-bar\">\n\t\t\t\t\t\t\t<input \n\t\t\t\t\t\t\t\ttype=\"text\" \n\t\t\t\t\t\t\t\tclass=\"search-input\" \n\t\t\t\t\t\t\t\t:value=\"searchText\" \n\t\t\t\t\t\t\t\tplaceholder=\"搜索组织名称或类型\" \n\t\t\t\t\t\t\t\tconfirm-type=\"search\"\n\t\t\t\t\t\t\t\t@confirm=\"onSearchConfirm\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<text v-if=\"searchText\" class=\"search-clear\" @click=\"onSearchClear\">×</text>\n\t\t\t\t\t\t\t<view class=\"search-btn\" @click=\"onSearchConfirm\">搜索</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t\t\n\t\t\t\t\t<!-- 分类筛选条 -->\n\t\t\t\t\t<scroll-view scroll-x class=\"category-filter\" show-scrollbar=\"false\">\n\t\t\t\t\t\t<view \n\t\t\t\t\t\t\tv-for=\"(item, index) in categories\" \n\t\t\t\t\t\t\t:key=\"index\" \n\t\t\t\t\t\t\t:class=\"['filter-item', selectedCategory === item.value ? 'active' : '']\"\n\t\t\t\t\t\t\t@click=\"selectCategory(item.value)\">\n\t\t\t\t\t\t\t{{item.label}}\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</scroll-view>\n\t\t\t\t\t\n\t\t\t\t\t<!-- 可发现组织列表 -->\n\t\t\t\t\t<view v-if=\"discoverableOrganizations.length > 0\" class=\"org-list\">\n\t\t\t\t\t\t<view class=\"org-card\">\n\t\t\t\t\t\t\t<view \n\t\t\t\t\t\t\t\tclass=\"org-item\" \n\t\t\t\t\t\t\t\tv-for=\"(org, index) in discoverableOrganizations\" \n\t\t\t\t\t\t\t\t:key=\"org.id\">\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<!-- 组织Logo -->\n\t\t\t\t\t\t\t\t<image \n\t\t\t\t\t\t\t\t\tclass=\"org-logo\" \n\t\t\t\t\t\t\t\t\t:src=\"org.logoUrl\" \n\t\t\t\t\t\t\t\t\tmode=\"aspectFill\"\n\t\t\t\t\t\t\t\t\t@error=\"handleLogoError(index, 'discover')\">\n\t\t\t\t\t\t\t\t</image>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<!-- 组织信息 -->\n\t\t\t\t\t\t\t\t<view class=\"org-info\">\n\t\t\t\t\t\t\t\t\t<view class=\"org-name\">{{org.name}}</view>\n\t\t\t\t\t\t\t\t\t<view class=\"org-desc\">{{org.description || org.type}}</view>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<!-- 根据状态显示不同按钮 -->\n\t\t\t\t\t\t\t\t<view \n\t\t\t\t\t\t\t\t\t:class=\"['btn', getButtonClass(org)]\"\n\t\t\t\t\t\t\t\t\t@click.stop=\"org.status === 'joinable' && joinOrganization(org)\">\n\t\t\t\t\t\t\t\t\t{{getButtonText(org)}}\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<!-- 加载更多/无更多数据 -->\n\t\t\t\t\t\t<view v-if=\"!loadingMore && hasMoreData\" class=\"load-more-area\" @click=\"loadMoreDiscoverable\">\n\t\t\t\t\t\t\t<text class=\"load-more-text\">点击加载更多</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view v-else-if=\"loadingMore\" class=\"load-more-area\">\n\t\t\t\t\t\t\t<text class=\"load-more-text\">加载中...</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view v-else-if=\"!hasMoreData && discoverableOrganizations.length > 0\" class=\"load-more-area\">\n\t\t\t\t\t\t\t<text class=\"load-more-text\">没有更多了</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t\t\n\t\t\t\t\t<!-- 加载中状态 -->\n\t\t\t\t\t<view v-else-if=\"loading\" class=\"loading-container\">\n\t\t\t\t\t\t<view class=\"custom-loading\">\n\t\t\t\t\t\t\t<text>加载中...</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t\t\n\t\t\t\t\t<!-- 空状态 -->\n\t\t\t\t\t<view v-else class=\"empty-state\">\n\t\t\t\t\t\t<view class=\"empty-text\">\n\t\t\t\t\t\t\t{{searchText || selectedCategory ? '未找到相关组织，请尝试更换关键词或筛选条件' : '暂无可加入的校友组织'}}\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view v-if=\"searchText || selectedCategory\" class=\"btn secondary-btn empty-action\" @click=\"resetFilters\">\n\t\t\t\t\t\t\t重置筛选\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\t\t\n\t\t<!-- 社群二维码弹窗 - 仿照校友卡页面实现 -->\n\t\t<view v-if=\"showQrModal\" class=\"modal-mask\" @click=\"handleCloseQrModal\">\n\t\t\t<view class=\"qrcode-modal\" @click.stop>\n\t\t\t\t<view class=\"qrcode-title\">{{currentDisplayOrg.name}}</view>\n\t\t\t\t<view class=\"qrcode-subtitle\">社群二维码</view>\n\t\t\t\t\n\t\t\t\t<view class=\"qrcode-container\">\n\t\t\t\t\t<!-- 二维码图片 -->\n\t\t\t\t\t<view v-if=\"qrCodeLoading\" class=\"qrcode-loading\">\n\t\t\t\t\t\t<text class=\"loading-text\">二维码加载中...</text>\n\t\t\t\t\t</view>\n\t\t\t\t\t<image \n\t\t\t\t\t\tv-else\n\t\t\t\t\t\t:src=\"currentDisplayOrg.qrCodeUrl\" \n\t\t\t\t\t\tmode=\"aspectFit\"\n\t\t\t\t\t\tclass=\"qrcode-image\"\n\t\t\t\t\t\t@error=\"handleQrCodeError\">\n\t\t\t\t\t</image>\n\t\t\t\t</view>\n\t\t\t\t\n\t\t\t\t<view class=\"qrcode-footer\">\n\t\t\t\t\t<text class=\"qrcode-desc\">扫码加入社群</text>\n\t\t\t\t\t<text class=\"qrcode-tip\">请勿将二维码分享给无关人员</text>\n\t\t\t\t</view>\n\t\t\t\t\n\t\t\t\t<view class=\"qrcode-buttons\">\n\t\t\t\t\t<view class=\"qrcode-btn save-btn\" @click=\"saveQrToAlbum\">保存到相册</view>\n\t\t\t\t\t<view class=\"qrcode-btn close-btn\" @click=\"handleCloseQrModal\">关闭</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\t</view>\n</template>\n\n<script>\nimport { \n\tgetMyJoinedOrganizations, \n\tgetDiscoverableOrganizations, \n\trequestToJoinOrganization, \n\tsaveImageToPhotosAlbum \n} from './myOrganizationsPage.js'\n\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\t// 导航栏相关\n\t\t\tstatusBarHeight: 20, // 默认状态栏高度\n\t\t\tnavHeight: 64,      // 默认导航栏高度（状态栏 + 导航内容）\n\t\t\t\n\t\t\t// Tab配置\n\t\t\ttabs: [\n\t\t\t\t{ text: '我的已加组织' },\n\t\t\t\t{ text: '发现组织' }\n\t\t\t],\n\t\t\tcurrentTab: 0,\n\t\t\t\n\t\t\t// 状态标志\n\t\t\tloading: false,\n\t\t\trefreshing: false,\n\t\t\tloadingMore: false,\n\t\t\tqrCodeLoading: true,\n\t\t\t\n\t\t\t// 已加入组织数据\n\t\t\tjoinedOrganizations: [],\n\t\t\t\n\t\t\t// 可发现组织数据\n\t\t\tdiscoverableOrganizations: [],\n\t\t\tsearchText: '',\n\t\t\tselectedCategory: '',\n\t\t\tpage: 1,\n\t\t\tlimit: 10,\n\t\t\thasMoreData: true,\n\t\t\t\n\t\t\t// 分类筛选\n\t\t\tcategories: [\n\t\t\t\t{ label: '全部', value: '' },\n\t\t\t\t{ label: '校友总会', value: 'main' },\n\t\t\t\t{ label: '地方分会', value: 'local' },\n\t\t\t\t{ label: '院系分会', value: 'college' },\n\t\t\t\t{ label: '专业分会', value: 'major' }\n\t\t\t],\n\t\t\t\n\t\t\t// 二维码弹窗\n\t\t\tshowQrModal: false,\n\t\t\tcurrentDisplayOrg: {}\n\t\t}\n\t},\n\t// 生命周期钩子\n\tonLoad() {\n\t\t// 获取系统状态栏高度\n\t\tthis.getStatusBarHeight();\n\t\t// 初始化页面，加载数据\n\t\tthis.loadData(true);\n\t},\n\tonShow() {\n\t\t// 若需要每次显示都刷新数据，可在此处调用loadData\n\t},\n\tonPullDownRefresh() {\n\t\tthis.refreshing = true;\n\t\tthis.loadData(false);\n\t\tsetTimeout(() => {\n\t\t\tthis.refreshing = false;\n\t\t\tuni.stopPullDownRefresh();\n\t\t}, 1000);\n\t},\n\tonReachBottom() {\n\t\tif (this.currentTab === 1 && this.hasMoreData && !this.loadingMore) {\n\t\t\tthis.loadMoreDiscoverable();\n\t\t}\n\t},\n\tmethods: {\n\t\t/**\n\t\t * 获取系统状态栏高度\n\t\t */\n\t\tgetStatusBarHeight() {\n\t\t\ttry {\n\t\t\t\tconst systemInfo = uni.getSystemInfoSync();\n\t\t\t\tthis.statusBarHeight = systemInfo.statusBarHeight || 20;\n\t\t\t\tthis.navHeight = this.statusBarHeight + 44; // 44 是导航内容高度\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error('获取系统信息失败', e);\n\t\t\t}\n\t\t},\n\t\t\n\t\t/**\n\t\t * 加载页面数据\n\t\t * @param {Boolean} showLoading 是否显示加载中提示\n\t\t */\n\t\tasync loadData(showLoading = true) {\n\t\t\tif (showLoading) {\n\t\t\t\tthis.loading = true;\n\t\t\t}\n\t\t\t\n\t\t\tif (this.currentTab === 0) {\n\t\t\t\tawait this.loadJoinedOrganizations();\n\t\t\t} else {\n\t\t\t\tthis.resetDiscoverableParams();\n\t\t\t\tawait this.loadDiscoverableOrganizations();\n\t\t\t\t\n\t\t\t\t// 预加载我的组织数据\n\t\t\t\tif (this.joinedOrganizations.length === 0) {\n\t\t\t\t\tthis.loadJoinedOrganizations(false);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif (showLoading) {\n\t\t\t\tthis.loading = false;\n\t\t\t}\n\t\t},\n\t\t\n\t\t/**\n\t\t * 加载已加入组织列表\n\t\t * @param {Boolean} showToast 是否显示错误提示\n\t\t */\n\t\tasync loadJoinedOrganizations(showToast = true) {\n\t\t\ttry {\n\t\t\t\tconst result = await getMyJoinedOrganizations();\n\t\t\t\tthis.joinedOrganizations = result || [];\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('加载已加入组织失败:', error);\n\t\t\t\tif (showToast) {\n\t\t\t\t\tthis.showToast('获取组织列表失败');\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t\n\t\t/**\n\t\t * 加载可发现组织列表\n\t\t */\n\t\tasync loadDiscoverableOrganizations() {\n\t\t\ttry {\n\t\t\t\tconst result = await getDiscoverableOrganizations({\n\t\t\t\t\tpage: this.page,\n\t\t\t\t\tlimit: this.limit,\n\t\t\t\t\tkeyword: this.searchText,\n\t\t\t\t\tcategory: this.selectedCategory\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tif (this.page === 1) {\n\t\t\t\t\tthis.discoverableOrganizations = result.data || [];\n\t\t\t\t} else {\n\t\t\t\t\tthis.discoverableOrganizations = [\n\t\t\t\t\t\t...this.discoverableOrganizations, \n\t\t\t\t\t\t...(result.data || [])\n\t\t\t\t\t];\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 判断是否还有更多数据\n\t\t\t\tthis.hasMoreData = this.discoverableOrganizations.length < result.total;\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('加载可发现组织列表失败:', error);\n\t\t\t\tthis.showToast('获取组织列表失败');\n\t\t\t}\n\t\t},\n\t\t\n\t\t/**\n\t\t * 加载更多可发现组织\n\t\t */\n\t\tasync loadMoreDiscoverable() {\n\t\t\tif (this.loadingMore || !this.hasMoreData) return;\n\t\t\t\n\t\t\tthis.loadingMore = true;\n\t\t\tthis.page++;\n\t\t\tawait this.loadDiscoverableOrganizations();\n\t\t\tthis.loadingMore = false;\n\t\t},\n\t\t\n\t\t/**\n\t\t * 重置发现组织参数\n\t\t */\n\t\tresetDiscoverableParams() {\n\t\t\tthis.page = 1;\n\t\t\tthis.hasMoreData = true;\n\t\t},\n\t\t\n\t\t/**\n\t\t * 重置所有筛选条件\n\t\t */\n\t\tresetFilters() {\n\t\t\tthis.searchText = '';\n\t\t\tthis.selectedCategory = '';\n\t\t\tthis.resetDiscoverableParams();\n\t\t\tthis.loadDiscoverableOrganizations();\n\t\t},\n\t\t\n\t\t/**\n\t\t * Tab切换处理函数\n\t\t */\n\t\tonTabChange(e) {\n\t\t\tif (this.currentTab === e.index) return;\n\t\t\t\n\t\t\tthis.currentTab = e.index;\n\t\t\tthis.loadData(true);\n\t\t},\n\t\t\n\t\t/**\n\t\t * 搜索处理函数\n\t\t */\n\t\tonSearchConfirm(e) {\n\t\t\tconst value = typeof e.detail === 'object' ? e.detail.value : this.searchText;\n\t\t\tif (this.searchText === value) return;\n\t\t\t\n\t\t\tthis.searchText = value;\n\t\t\tthis.resetDiscoverableParams();\n\t\t\tthis.loadDiscoverableOrganizations();\n\t\t},\n\t\t\n\t\t/**\n\t\t * 清空搜索关键词\n\t\t */\n\t\tonSearchClear() {\n\t\t\tif (!this.searchText) return;\n\t\t\t\n\t\t\tthis.searchText = '';\n\t\t\tthis.resetDiscoverableParams();\n\t\t\tthis.loadDiscoverableOrganizations();\n\t\t},\n\t\t\n\t\t/**\n\t\t * 选择分类\n\t\t */\n\t\tselectCategory(category) {\n\t\t\tif (this.selectedCategory === category) return;\n\t\t\t\n\t\t\tthis.selectedCategory = category;\n\t\t\tthis.resetDiscoverableParams();\n\t\t\tthis.loadDiscoverableOrganizations();\n\t\t},\n\t\t\n\t\t/**\n\t\t * 显示二维码\n\t\t */\n\t\tshowQrCode(org) {\n\t\t\tthis.qrCodeLoading = true;\n\t\t\tthis.currentDisplayOrg = org;\n\t\t\tthis.showQrModal = true;\n\t\t\t\n\t\t\t// 模拟二维码加载\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.qrCodeLoading = false;\n\t\t\t}, 500);\n\t\t},\n\t\t\n\t\t/**\n\t\t * 处理二维码图片加载错误\n\t\t */\n\t\thandleQrCodeError() {\n\t\t\tthis.showToast('二维码加载失败');\n\t\t},\n\t\t\n\t\t/**\n\t\t * 关闭二维码弹窗\n\t\t */\n\t\thandleCloseQrModal() {\n\t\t\tthis.showQrModal = false;\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.currentDisplayOrg = {};\n\t\t\t}, 300);\n\t\t},\n\t\t\n\t\t/**\n\t\t * 保存二维码到相册\n\t\t */\n\t\tasync saveQrToAlbum() {\n\t\t\tif (!this.currentDisplayOrg || !this.currentDisplayOrg.qrCodeUrl) {\n\t\t\t\tthis.showToast('二维码获取失败');\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\tconst success = await saveImageToPhotosAlbum(this.currentDisplayOrg.qrCodeUrl);\n\t\t\tif (success) {\n\t\t\t\t// 保存成功，自动关闭弹窗\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.handleCloseQrModal();\n\t\t\t\t}, 1500);\n\t\t\t}\n\t\t},\n\t\t\n\t\t/**\n\t\t * 申请加入组织\n\t\t */\n\t\tasync joinOrganization(org) {\n\t\t\tif (!org || org.status !== 'joinable') return;\n\t\t\t\n\t\t\tuni.showLoading({ title: '申请中...' });\n\t\t\t\n\t\t\ttry {\n\t\t\t\tconst result = await requestToJoinOrganization(org.id);\n\t\t\t\t\n\t\t\t\tif (result.success) {\n\t\t\t\t\t// 更新组织状态\n\t\t\t\t\tconst index = this.discoverableOrganizations.findIndex(item => item.id === org.id);\n\t\t\t\t\tif (index !== -1) {\n\t\t\t\t\t\tthis.$set(this.discoverableOrganizations[index], 'status', 'pending');\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tthis.showToast('申请已提交', 'success');\n\t\t\t\t} else {\n\t\t\t\t\tthis.showToast(result.message || '申请失败');\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('申请加入组织失败:', error);\n\t\t\t\tthis.showToast('申请失败，请稍后再试');\n\t\t\t} finally {\n\t\t\t\tuni.hideLoading();\n\t\t\t}\n\t\t},\n\t\t\n\t\t/**\n\t\t * 根据组织状态获取按钮文本\n\t\t */\n\t\tgetButtonText(org) {\n\t\t\tswitch(org.status) {\n\t\t\t\tcase 'pending': return '审核中';\n\t\t\t\tcase 'rejected': return '已拒绝';\n\t\t\t\tcase 'joined': return '已加入';\n\t\t\t\tdefault: return '申请加入';\n\t\t\t}\n\t\t},\n\t\t\n\t\t/**\n\t\t * 根据组织状态获取按钮样式\n\t\t */\n\t\tgetButtonClass(org) {\n\t\t\tswitch(org.status) {\n\t\t\t\tcase 'pending': return 'disabled-btn';\n\t\t\t\tcase 'rejected': return 'disabled-btn';\n\t\t\t\tcase 'joined': return 'secondary-btn';\n\t\t\t\tdefault: return 'primary-btn';\n\t\t\t}\n\t\t},\n\t\t\n\t\t/**\n\t\t * 处理组织Logo加载错误\n\t\t */\n\t\thandleLogoError(index, type) {\n\t\t\tconst defaultLogo = '/static/images/org_logo_default.png';\n\t\t\t\n\t\t\tif (type === 'joined' && this.joinedOrganizations[index]) {\n\t\t\t\tthis.$set(this.joinedOrganizations[index], 'logoUrl', defaultLogo);\n\t\t\t} else if (type === 'discover' && this.discoverableOrganizations[index]) {\n\t\t\t\tthis.$set(this.discoverableOrganizations[index], 'logoUrl', defaultLogo);\n\t\t\t}\n\t\t},\n\t\t\n\t\t/**\n\t\t * 切换到发现组织Tab\n\t\t */\n\t\tswitchToDiscover() {\n\t\t\tthis.currentTab = 1;\n\t\t\tthis.loadData(true);\n\t\t},\n\t\t\n\t\t/**\n\t\t * 显示Toast消息\n\t\t */\n\t\tshowToast(title, icon = 'none') {\n\t\t\tuni.showToast({\n\t\t\t\ttitle,\n\t\t\t\ticon\n\t\t\t});\n\t\t},\n\t\t\n\t\t/**\n\t\t * 返回上一页\n\t\t */\n\t\tgoBack() {\n\t\t\tuni.navigateBack();\n\t\t}\n\t}\n}\n</script>\n\n<style>\n@import url(\"./myOrganizationsPage.css\");\n\n/* 自定义导航栏样式 */\n.custom-nav-bar {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  background-color: #004299;\n  z-index: 999;\n}\n\n.nav-bar-content {\n  display: flex;\n  align-items: center;\n  height: 44px;\n  position: relative;\n}\n\n.nav-back {\n  width: 60rpx;\n  height: 44px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: absolute;\n  left: 12px;\n  z-index: 2;\n}\n\n.back-arrow {\n  font-size: 40rpx;\n  font-weight: bold;\n  color: #FFFFFF;\n}\n\n.nav-title {\n  position: absolute;\n  left: 0;\n  right: 0;\n  text-align: center;\n  font-size: 18px;\n  font-weight: 500;\n  color: #FFFFFF;\n  line-height: 44px;\n}\n\n/* 内容区域调整 */\n.content-area {\n  min-height: 100vh;\n  box-sizing: border-box;\n}\n\n/* 自定义Tab样式 */\n.custom-tabs {\n  display: flex;\n  position: relative;\n  background-color: #FFFFFF;\n  height: 90rpx;\n  border-bottom: 1px solid #EEEEEE;\n}\n\n.custom-tab-item {\n  flex: 1;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 30rpx;\n  color: #666666;\n  position: relative;\n  transition: all 0.3s;\n}\n\n.custom-tab-active {\n  color: #004299;\n  font-weight: 600;\n}\n\n.custom-tab-line {\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  width: 50%;\n  height: 4rpx;\n  background-color: #004299;\n  transition: transform 0.3s;\n}\n\n/* 二维码样式升级 - 参考校友卡页面 */\n.modal-mask {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: rgba(0, 0, 0, 0.6);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 999;\n}\n\n.qrcode-modal {\n  background-color: #FFFFFF;\n  border-radius: 16rpx;\n  width: 600rpx;\n  padding: 40rpx 30rpx;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  box-shadow: 0 6rpx 30rpx rgba(0, 0, 0, 0.1);\n}\n\n.qrcode-title {\n  font-size: 36rpx;\n  color: #333333;\n  font-weight: 600;\n  text-align: center;\n}\n\n.qrcode-subtitle {\n  font-size: 28rpx;\n  color: #666666;\n  margin-top: 4rpx;\n  margin-bottom: 30rpx;\n}\n\n.qrcode-container {\n  width: 440rpx;\n  height: 440rpx;\n  margin: 20rpx 0 30rpx;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: #F6F6F6;\n  border-radius: 8rpx;\n  overflow: hidden;\n  box-shadow: 0 4rpx 10rpx rgba(0, 0, 0, 0.05);\n}\n\n.qrcode-image {\n  width: 100%;\n  height: 100%;\n  background-color: #FFFFFF;\n}\n\n.qrcode-loading {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: #F5F5F5;\n}\n\n.loading-text {\n  color: #666666;\n  font-size: 28rpx;\n}\n\n.qrcode-footer {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  margin-bottom: 30rpx;\n}\n\n.qrcode-desc {\n  font-size: 30rpx;\n  color: #333333;\n  font-weight: 500;\n  margin-bottom: 10rpx;\n}\n\n.qrcode-tip {\n  font-size: 24rpx;\n  color: #999999;\n}\n\n.qrcode-buttons {\n  display: flex;\n  width: 100%;\n  justify-content: space-between;\n  margin-top: 10rpx;\n}\n\n.qrcode-btn {\n  flex: 1;\n  height: 80rpx;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 8rpx;\n  font-size: 30rpx;\n}\n\n.save-btn {\n  background-color: #004299;\n  color: #FFFFFF;\n  margin-right: 20rpx;\n}\n\n.close-btn {\n  background-color: #EEEEEE;\n  color: #333333;\n  margin-left: 20rpx;\n}\n</style>\n","import MiniProgramPage from 'D:/Projects/XBuider/校友会/校友会/pages/myOrganizationsPage/myOrganizationsPage.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni"],"mappings":"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"}